"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[272],{90272:function(e,t,a){a.r(t);var n=a(4942),l=a(93433),s=a(37762),o=a(29439),r=a(72791),i=a(66818),u=a(13832),c=a(2556),d=a(58768),p=a(97892),h=a.n(p),g=a(90575),f=a(70525),m=a(74332),y=a(32201),Z=a(5122),v=a(96106),b=(a(62995),a(80184)),S=i.Z.Option;t.default=function(e){var t,a=(0,r.useState)(!1),p=(0,o.Z)(a,2),x=(p[0],p[1],(0,r.useState)([])),T=(0,o.Z)(x,2),Y=T[0],D=T[1],M=(0,r.useState)(""),j=(0,o.Z)(M,2),w=(j[0],j[1],(0,r.useState)(h()().startOf("month").toDate())),k=(0,o.Z)(w,2),C=(k[0],k[1]),N=(0,r.useState)([]),F=(0,o.Z)(N,2),P=(F[0],F[1],(0,r.useState)([])),E=(0,o.Z)(P,2),O=(E[0],E[1],(0,r.useState)([])),_=(0,o.Z)(O,2),A=_[0],R=(_[1],(0,r.useState)("")),B=(0,o.Z)(R,2),L=(B[0],B[1]),$=(0,r.useState)(!1),I=(0,o.Z)($,2),U=I[0],W=I[1],q=(0,r.useState)(""),G=(0,o.Z)(q,2),H=G[0],V=G[1],z=(0,r.useState)(""),J=(0,o.Z)(z,2),K=J[0],Q=J[1],X=(0,r.useState)([{label:"\u5de5\u4f5c\u65e5",value:1},{label:"\u4f11\u606f\u65e5",value:2},{label:"\u5220\u9664\u8ba1\u7b97\u65e5",value:3},{label:"\u5143\u65e6",value:4},{label:"\u6625\u8282",value:5},{label:"\u6e05\u660e\u8282",value:6},{label:"\u52b3\u52a8\u8282",value:7},{label:"\u7aef\u5348\u8282",value:8},{label:"\u4e2d\u79cb\u8282",value:9},{label:"\u56fd\u5e86\u8282",value:10}]),ee=(0,o.Z)(X,2),te=ee[0],ae=(ee[1],(0,r.useState)(!1)),ne=(0,o.Z)(ae,2),le=ne[0],se=ne[1],oe=(0,r.useState)([]),re=(0,o.Z)(oe,2),ie=re[0],ue=re[1],ce=(0,r.useState)(""),de=(0,o.Z)(ce,2),pe=de[0],he=de[1],ge=(0,r.useState)([]),fe=(0,o.Z)(ge,2),me=fe[0],ye=fe[1],Ze=(0,r.useState)(h()().format("YYYY-MM")),ve=(0,o.Z)(Ze,2),be=ve[0],Se=ve[1],xe=(0,r.useState)(h()().format("YYYY-MM")),Te=(0,o.Z)(xe,2),Ye=Te[0],De=Te[1],Me=(0,r.useState)("\u8bf7\u9009\u62e9"),je=(0,o.Z)(Me,2),we=je[0],ke=je[1],Ce=(0,r.useState)(!1),Ne=(0,o.Z)(Ce,2),Fe=Ne[0],Pe=Ne[1],Ee=(0,r.useState)(""),Oe=(0,o.Z)(Ee,2),_e=Oe[0],Ae=Oe[1],Re=(0,r.useState)(""),Be=(0,o.Z)(Re,2),Le=Be[0],$e=Be[1],Ie=(0,r.useState)(""),Ue=(0,o.Z)(Ie,2),We=Ue[0],qe=Ue[1],Ge=(0,r.useState)(""),He=(0,o.Z)(Ge,2),Ve=(He[0],He[1],(0,r.useState)("")),ze=(0,o.Z)(Ve,2),Je=(ze[0],ze[1],(0,r.useState)("")),Ke=(0,o.Z)(Je,2),Qe=(Ke[0],Ke[1],(0,r.useState)("")),Xe=(0,o.Z)(Qe,2),et=(Xe[0],Xe[1],(0,r.useState)("")),tt=(0,o.Z)(et,2),at=(tt[0],tt[1],(0,r.useState)("")),nt=(0,o.Z)(at,2),lt=(nt[0],nt[1],(0,r.useState)("")),st=(0,o.Z)(lt,2),ot=(st[0],st[1],(0,r.useState)("")),rt=(0,o.Z)(ot,2),it=(rt[0],rt[1],(0,r.useState)("")),ut=(0,o.Z)(it,2),ct=(ut[0],ut[1],(0,r.useState)("")),dt=(0,o.Z)(ct,2),pt=(dt[0],dt[1],r.createRef());(0,r.useEffect)((function(){ft();for(var e=(new Date).getFullYear(),t=[],a=0;a<12;a++){var n=new Date(e,a,1),l=n.getFullYear(),s=n.getMonth()+1;10==s||11==s||12==s||(s="0"+s),console.log(s),t.push(l+"-"+s),ye(t)}}),[]);var ht=function(e,t){var a=new Array,n=e.split("-");console.log(n);var l=t.split("-"),s=new Date;s.setUTCFullYear(n[0],n[1]-1,n[2]);var o=new Date;o.setUTCFullYear(l[0],l[1]-1,l[2]);for(var r=s.getTime(),i=o.getTime(),u=r;u<=i;)a.push(gt(new Date(parseInt(u)),"yyyy-MM-dd")),u+=864e5;return console.log(a),a},gt=function(e,t){if(""===e||null===e||void 0===e)return null;""!==t&&null!==t&&void 0!==t||(t="yyyy-MM");var a={"M+":(e=new Date(e)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t},ft=function(){Z.Z.post("demand_resp/calendar/getDateList?month="+be).then((function(e){if(console.log(e),200==e.data.code){var t=function(e){e.sort((function(e,t){return e.dateType!==t.dateType?e.dateType-t.dateType:new Date(e.date)-new Date(t.date)}));var t,a=[],n=null,l=0,o=(0,s.Z)(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;n&&n.dateType===r.dateType&&new Date(n.end).getTime()+864e5===new Date(r.date).getTime()?n.end=r.date:(n={start:r.date,end:r.date,dateType:r.dateType,id:l++,allDay:!0},a.push(n))}}catch(i){o.e(i)}finally{o.f()}return a.forEach((function(e){1===e.dateType?e.title="\u5de5\u4f5c\u65e5":2===e.dateType?e.title="\u4f11\u606f\u65e5":3===e.dateType?e.title="\u5220\u9664\u8ba1\u7b97\u65e5":4===e.dateType?e.title="\u5143\u65e6":5===e.dateType?e.title="\u6625\u8282":6===e.dateType?e.title="\u6e05\u660e\u8282":7===e.dateType?e.title="\u52b3\u52a8\u8282":8===e.dateType?e.title="\u7aef\u5348\u8282":9===e.dateType?e.title="\u4e2d\u79cb\u8282":10===e.dateType&&(e.title="\u56fd\u5e86\u8282"),delete e.dateType})),a}(e.data.data),a=function(e){return e.map((function(e){var t=new Date(e.end);return t.setDate(t.getDate()+1),e.end=t.toISOString().split("T")[0],e}))}(t);D(a)}})).catch((function(e){console.log(e)}))},mt=function(e){console.log(e),he(e),ke(e),Ae(e)};(0,r.useEffect)((function(){ft()}),[be]);var yt=function(){W(!1),Z.Z.post("demand_resp/calendar/editDateType",{dateList:ie,dateType:pe}).then((function(e){console.log(e),200==e.data.code?(ke(""),u.ZP.success("\u7f16\u8f91\u6210\u529f"),ft(),se(!1)):u.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))},Zt=function(){se(!1),ke("")},vt=function(){L(h()().format("YYYY-MM")),De(h()().format("YYYY-MM")),Se(h()().format("YYYY-MM")),pt.current.getApi().gotoDate(h()().format("YYYY-MM"))},bt=function(){console.log(Le);for(var e=[7,1,2,3,4,5,6],t=ht(Le,We),a=(t.pop(),[]),n=0;n<t.length;n++){t[n].substring(5,7);console.log(t[n].substring(5,7)),a.push({dateType:_e,date:t[n],dayOfWeek:e[new Date(t[n]).getDay()],year:t[n].substr(0,4),month:"0"===t[n].substr(5,10).charAt(0)?Number(t[n].substr(6,10)):Number(t[n].substr(5,7)),day:"0"===t[n].substr(8,10).charAt(0)?Number(t[n].substr(9,10)):Number(t[n].substr(8,10)),updateBy:null,updateTime:null})}console.log(a),D.apply(void 0,(0,l.Z)(Y).concat([{start:Le,end:We,title:1==_e?"\u5de5\u4f5c\u65e5":2==_e?"\u4f11\u606f\u65e5":3==_e?"\u5220\u9664\u8ba1\u7b97\u65e5":4==_e?"\u5143\u65e6":5==_e?"\u6625\u8282":6==_e?"\u6e05\u660e\u8282":7==_e?"\u52b3\u52a8\u8282":8==_e?"\u7aef\u5348\u8282":9==_e?"\u4e2d\u79cb\u8282":"\u56fd\u5e86\u8282"}])),Pe(!1),Z.Z.post("demand_resp/calendar/editDateType",{dateList:t,dateType:_e}).then((function(e){console.log(e),200==e.data.code?(ke(""),u.ZP.success("\u7f16\u8f91\u6210\u529f"),ft()):u.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))},St=function(){Pe(!1),ke("")},xt=function(e){console.log(e),e.startStr&&e.endStr&&($e(e.startStr),qe(e.endStr),Pe(!0))};(0,r.useEffect)((function(){console.log(Le)}),[Le]);return(0,b.jsxs)("div",{style:{height:"calc(100% - 16px)"},className:"newDatebody",children:[(0,b.jsx)("div",{className:"newDatetitle",children:(0,b.jsxs)("a",{style:{color:"#FFF"},onClick:function(){e.history.push({pathname:"/Sarguments"})},children:[(0,b.jsx)(v.Z,{style:{marginRight:10}}),"\u8fd4\u56de"]})}),(0,b.jsxs)("div",{className:"newDate",children:[(0,b.jsxs)("div",{className:"newDateName",children:[(0,b.jsx)(c.ZP,{ghost:!0,onClick:vt,children:"\u4eca\u5929"}),(0,b.jsx)(i.Z,{style:{width:"119px",marginLeft:20},onChange:function(e){console.log(e),L(e),Se(e),De(e),C(e),pt.current.getApi().gotoDate(e)},value:Ye,children:me.map((function(e){return(0,b.jsx)(S,{value:e,children:e},e)}))})]}),(0,b.jsx)("div",{className:"Sarguments-FullCalendar",children:(0,b.jsx)(g.Z,(t={locale:y.Z,plugins:[f.Z,m.ZP],initialView:"dayGridMonth",editable:!0,selectable:!0,events:Y,eventContent:function(e){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("b",{children:e.timeText}),(0,b.jsx)("i",{children:e.event.title})]})},eventClick:function(e,t){var a=e.event._def,n=e.event._instance.range,l=h()(n.start).format("YYYY-MM-DD"),s=h()(n.end).format("YYYY-MM-DD"),o=[];o.push(l),o.push(s);for(var r=[],i=0;i<A.length;i++)for(var u=0;u<o.length;u++)if(A[i].date===o[u]){r.push(A[i]);break}var c=[7,1,2,3,4,5,6],d=ht(l,s);ue(d);d.pop();for(var p=[],g=0;g<d.length;g++){d[g].substring(5,7);p.push({dateType:"\u5de5\u4f5c\u65e5"==a.title?1:"\u4f11\u606f\u65e5"==a.title||"\u4f11\u606f\u65e5"==a.title?2:"\u5220\u9664\u8ba1\u7b97\u65e5"==a.title?3:"\u5143\u65e6"==a.title?4:"\u6625\u8282"==a.title?5:"\u6e05\u660e\u8282"==a.title?6:"\u52b3\u52a8\u8282"==a.title?7:"\u7aef\u5348\u8282"==a.title?8:"\u4e2d\u79cb\u8282"==a.title?9:"\u56fd\u5e86\u8282"==a.title?10:"",date:d[g],dayOfWeek:c[new Date(d[g]).getDay()],year:d[g].substr(0,4),month:0==d[g].substring(5,7).charAt(0)?Number(d[g].substring(6,7)):Number(d[g].substring(5,7)),day:"0"==d[g].substr(8,10).charAt(0)?Number(d[g].substr(9,10)):Number(d[g].substr(8,10)),updateBy:null,updateTime:null})}W(!0),V(a.title),console.log(p),Z.Z.post("demand_resp/calendar/convertDateStr",p).then((function(e){console.log(e),200==e.data.code&&Q(e.data.data)})).catch((function(e){console.log(e)}))},ref:pt,dateClick:xt},(0,n.Z)(t,"selectable",!0),(0,n.Z)(t,"select",xt),(0,n.Z)(t,"editable",!0),(0,n.Z)(t,"today",(function(){alert(0)})),(0,n.Z)(t,"headerToolbar",{left:"",center:"",right:""}),t))}),(0,b.jsx)(d.Z,{title:"\u5c5e\u6027\u7f16\u8f91",visible:Fe,wrapClassName:"Modal-visible",onOk:bt,onCancel:St,centered:!0,footer:[(0,b.jsx)(c.ZP,{ghost:!0,onClick:St,children:"\u53d6\u6d88"}),(0,b.jsx)(c.ZP,{type:"primary",onClick:bt,children:"\u786e\u5b9a"},"submit")],children:(0,b.jsx)(i.Z,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%",marginBottom:30},onChange:mt,value:we,children:te.length&&te.map((function(e){return(0,b.jsx)(S,{value:e.value,children:e.label},e.value)}))})}),(0,b.jsxs)(d.Z,{title:H,mask:!1,visible:U,onOk:function(){W(!1)},onCancel:function(){W(!1)},footer:null,centered:!0,children:[(0,b.jsx)("p",{className:"titlename",children:K}),(0,b.jsx)("div",{className:"blockName",children:(0,b.jsx)(c.ZP,{type:"text",onClick:function(){se(!0)},style:{color:"#FFF",background:"#0F9D90",marginTop:40},block:!0,ghost:!0,children:"\u7f16\u8f91"})})]}),(0,b.jsx)(d.Z,{title:"\u7f16\u8f91",centered:!0,visible:le,onOk:yt,onCancel:Zt,wrapClassName:"Modal-visible",footer:[(0,b.jsx)(c.ZP,{ghost:!0,onClick:Zt,children:"\u53d6\u6d88"}),(0,b.jsx)(c.ZP,{type:"primary",onClick:yt,children:"\u786e\u5b9a"},"submit")],children:(0,b.jsx)(i.Z,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%",marginBottom:30},onChange:mt,value:we,children:te.length&&te.map((function(e){return(0,b.jsx)(S,{value:e.value,children:e.label},e.value)}))})})]})]})}},62995:function(){}}]);
//# sourceMappingURL=272.fa6a2c54.chunk.js.map
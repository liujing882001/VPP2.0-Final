{"version":3,"file":"static/js/7178.5c6c7fd6.chunk.js","mappings":"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","sources":["views/Carbon/source/index.js"],"sourcesContent":["import React, { useEffect,useState } from 'react';\r\nimport { Tabs,Table,Select,Input,Button,DatePicker,ConfigProvider,Space,Modal,message,Typography } from 'antd';\nimport {\n  InfoCircleOutlined,\r\n  CaretDownOutlined,\r\n  CaretUpOutlined\n} from '@ant-design/icons';\r\n\r\nimport './index.css'\r\nimport './source.scss'\r\nimport locale from 'antd/locale/zh_CN';\nimport dayjs from 'dayjs';\r\nimport http from '../../../server/server.js'\r\nconst { Search } = Input;\r\nconst { Text } = Typography;\r\n\r\nconst { TabPane } = Tabs;\r\nconst { Option } = Select;\r\nconst { MonthPicker, RangePicker } = DatePicker;\r\nconst dateFormat = 'YYYY-MM-DD';\nconst monthFormat = 'YYYY-MM';\n\r\n\n \nconst columns = [\n  {\n    title: '类型',\n    dataIndex: 'dischargeEntity',\n    key: 'dischargeEntity',\n  },\n  {\n    title: '数量',\n    dataIndex: 'num',\n    key: 'num',\r\n\trender: (s, record, index) =>{\r\n\t\tconsole.log(record)\r\n\t\treturn s?Number(s).toFixed(1):'-'\r\n\t}\n  },\n  {\n    title: '单位',\n    dataIndex: 'unit',\n    key: 'unit',\r\n\trender: (text,record,_,action) =>{\r\n\t\tif( text==null||text==undefined){\r\n\t\t\treturn '-'\r\n\t\t}else if(text!==''){\r\n\t\t\t// console.log(text)\r\n\t\t\treturn text\r\n\t\t}else{\r\n\t\t\treturn text\r\n\t\t}\r\n\t}\n  },\r\n  {\r\n    title: '碳排放因子',\r\n    dataIndex: 'factor',\r\n    key: 'factor',\r\n  },\r\n  {\r\n    title: 'CO2排放量（t）',\r\n    dataIndex: 'emission',\r\n    key: 'emission',\r\n\trender: (text,record,_,action) =>{\r\n\t\tif( text==null||text==undefined){\r\n\t\t\treturn '-'\r\n\t\t}else if(text!==''){\r\n\t\t\t// console.log(text)\r\n\t\t\treturn Number(text).toFixed(2)\r\n\t\t}else{\r\n\t\t\treturn Number(text).toFixed(2)\r\n\t\t}\r\n\t}\r\n  },\r\n  {\r\n    title: '燃烧源',\r\n    dataIndex: 'dischargeType',\r\n    key: 'dischargeType',\r\n\trender: (text, record, index) =>{\r\n\t\tconsole.log(record)\r\n\t\tif( text===null||text===undefined||text===\"\"){\r\n\t\t\treturn '-'\r\n\t\t}else{\r\n\t\t\treturn text==1?'固定燃烧源':text==2?'移动燃烧源':text==3?'逸散型排放源':''\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n  },\n];\r\nconst Source =() =>{\r\n\tconst [display, setDisplay] = useState('none');\r\n\tconst [isToggleOn, setIsToggleOn] = useState(true);\r\n\tconst [nodeId, setNodeId] = useState('');\r\n\tconst [nodeList, setNodeList] = useState([]);\r\n\tconst [currentUnit, setCurrentUnit] = useState('请选择');\r\n\tconst [scopeType, setScopeType] = useState('1');\r\n\tconst [startTime, setStartTime] = useState('');\r\n\tconst [endTime, setEndTime] = useState('');\r\n\tconst [content, setContent] = useState([]);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [currentloading, setCurrentLoading] = useState(false);\r\n\r\n\tuseEffect(() =>{\r\n\t\tnodeList1()\r\n\t},[])\r\n\t// 获取节点列表\r\n\tuseEffect(() =>{\r\n\t\tsetDisplay(isToggleOn ? 'none' : 'block')\r\n\t},[isToggleOn])\r\n\tconst shrink =() =>{\r\n\t\tsetIsToggleOn(!isToggleOn)\r\n\t}\r\n\tconst onChange=() =>{\r\n\t\t\r\n\t}\r\n\tconst onSearch =(e) =>{\r\n\t\t\r\n\t}\r\n\t// 获取节点列表\r\n\tconst nodeList1 =() =>{\r\n\t\t// 节点\r\n\t\tsetCurrentLoading(true)\r\n\t\thttp.post('system_management/node_model/nodeNameList').then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tsetNodeList(res.data.data);\r\n\t\t\t\tsetCurrentLoading(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t// 查询碳溯源列表\r\n\tconst getTraceabilityList =() =>{\r\n\t\tsetLoading(true)\r\n\t\thttp.post('carbon/traceability/getTraceabilityList',{\r\n\t\t\t\"endTime\":endTime,\r\n\t\t\t\"nodeId\": nodeId,\r\n\t\t\t\"scopeType\": scopeType,\r\n\t\t\t\"startTime\": startTime\r\n\t\t}).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tsetContent(res.data.data);\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}else{\r\n\t\t\t\tmessage.info(res.data.msg)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\tconst onMonth =(val,mode) =>{\r\n\t\tconsole.log(mode);\r\n\t\tsetStartTime(mode[0]);\r\n\t\tsetEndTime(mode[1])\r\n\t}\r\n\tconst search =() =>{\r\n\t\tif(startTime&&startTime&&nodeId){\r\n\t\t\tgetTraceabilityList()\r\n\t\t}else{\r\n\t\t\tmessage.info('请选择时间和节点')\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t// 节点\r\n\tconst handlepoint =(val) =>{\r\n\t\tconsole.log(val)\r\n\t\tsetNodeId(val)\r\n\t}\r\n\t// 范围\r\n\tconst handlepoint1 =(val) =>{\r\n\t\tconsole.log(val)\r\n\t\tsetScopeType(val)\r\n\t}\r\n\t\r\n\tconst disabledDate: RangePickerProps['disabledDate'] = current => {\r\n\t\treturn current < dayjs(new Date('2023-01')) || current > dayjs().endOf('month')\r\n\t};\r\n\treturn(\r\n\t\t<div className=\"allcontent12\" style={{background:'#212029',padding:16,borderRadius:10}}>\r\n\t\t\r\n\t\t\t<div className=\"sourceheader\">\r\n\t\t\t\t<h4><InfoCircleOutlined style={{color:'#0F9D90'}} />排放源说明<b className={display =='none'?'no':''} onClick={shrink}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdisplay =='none'?<CaretDownOutlined />:<CaretUpOutlined />\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</b></h4>\r\n\t\t\t\t<div className=\"imgdiv\" style={{display: display}}>\r\n\t\t\t\t\t<img src={require('./img/bg.png')}  />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"header\">\r\n\t\t\t\t节点：\r\n\t\t\t\t<Select\r\n\t\t\t\t\tstyle={{ width: 217,marginRight:16 }}\r\n\t\t\t\t\tloading={currentloading}\r\n\t\t\t\t\tonChange={handlepoint}\r\n\t\t\t\t\tdefaultValue={currentUnit}\r\n\t\t\t\t\tkey={currentUnit}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnodeList&&nodeList.map(res =>{\r\n\t\t\t\t\t\t\treturn <Option key={res.id} value={res.id}>{res.nodeName}</Option>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Select>\r\n\t\t\t\t范围：\r\n\t\t\t\t<Select\r\n\t\t\t\t  defaultValue=\"1\"\r\n\t\t\t\t  style={{ width: 217,marginRight:16}}\r\n\t\t\t\t  onChange={handlepoint1}\r\n\t\t\t\t  options={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t  value: '1',\r\n\t\t\t\t\t  label: '范围一',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t  value: '2',\r\n\t\t\t\t\t  label: '范围二',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t  value: '3',\r\n\t\t\t\t\t  label: '范围三',\r\n\t\t\t\t\t},\r\n\t\t\t\t  ]}\r\n\t\t\t\t/>\r\n\t\t\t\t<Space>\r\n\t\t\t\t\t<ConfigProvider locale={locale}>\r\n\t\t\t\t\t\t<RangePicker disabledDate={disabledDate} picker=\"month\" onChange={onMonth}  />\r\n\t\t\t\t\t</ConfigProvider>\r\n\t\t\t\t</Space>\r\n\t\t\t\t<Button type=\"primary\" onClick={search} style={{marginLeft:'24px'}}>查询</Button>\r\n\t\t</div>\r\n\t\t\t<div style={{marginTop:20}}>\r\n\t\t\t\t<Table dataSource={content} columns={columns} \r\n\t\t\t\t\tpagination={false} \r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\trowClassName={\r\n\t\t\t\t\t\t(record, index) => {\r\n\t\t\t\t\t\t  let className = ''\r\n\t\t\t\t\t\t  className = index % 2 ===0 ? 'ou' : 'ji'\r\n\t\t\t\t\t\t  // console.log(className)\r\n\t\t\t\t\t\t  return className\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  }\r\n\t\t\t\t\tsummary={pageData => {\r\n\t\t\t\t\t\t// console.log(pageData)\r\n\t\t\t\t\t\tlet totalBorrow = 0;\r\n\t\t\t\t\t\tlet totalRepayment = 0;\r\n\t\t\t\t  \r\n\t\t\t\t\t\tpageData.forEach(({ emission }) => {\r\n\t\t\t\t\t\t\tconsole.log(emission)\r\n\t\t\t\t\t\t\tif(emission){\r\n\t\t\t\t\t\t\t\ttotalBorrow += Number(emission);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// totalRepayment += repayment;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t  \r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Table.Summary.Row>\r\n\t\t\t\t\t\t\t\t\t<Table.Summary.Cell index={0}>合计</Table.Summary.Cell>\r\n\t\t\t\t\t\t\t\t\t<Table.Summary.Cell index={1}>\r\n\t\t\t\t\t\t\t\t\t</Table.Summary.Cell>\r\n\t\t\t\t\t\t\t\t\t<Table.Summary.Cell index={2}>\r\n\t\t\t\t\t\t\t\t\t</Table.Summary.Cell>\r\n\t\t\t\t\t\t\t\t\t<Table.Summary.Cell index={3}>\r\n\t\t\t\t\t\t\t\t\t</Table.Summary.Cell>\r\n\t\t\t\t\t\t\t\t\t<Table.Summary.Cell index={4}>\r\n\t\t\t\t\t\t\t\t\t\t<Text>{totalBorrow.toFixed(2)}</Text>\r\n\t\t\t\t\t\t\t\t\t</Table.Summary.Cell>\r\n\t\t\t\t\t\t\t\t\t<Table.Summary.Cell index={5}>\r\n\t\t\t\t\t\t\t\t\t</Table.Summary.Cell>\r\n\t\t\t\t\t\t\t\t</Table.Summary.Row>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\t\r\n\r\n\r\nexport default Source"],"names":["Text","Input","Typography","Option","Tabs","Select","RangePicker","DatePicker","columns","title","dataIndex","key","render","s","record","index","console","log","Number","toFixed","text","_","action","undefined","useState","display","setDisplay","isToggleOn","setIsToggleOn","nodeId","setNodeId","nodeList","setNodeList","currentUnit","scopeType","setScopeType","startTime","setStartTime","endTime","setEndTime","content","setContent","loading","setLoading","currentloading","setCurrentLoading","useEffect","nodeList1","http","then","res","data","code","className","style","background","padding","borderRadius","InfoCircleOutlined","color","onClick","CaretDownOutlined","CaretUpOutlined","src","require","width","marginRight","onChange","val","defaultValue","map","value","id","nodeName","options","label","locale","disabledDate","current","dayjs","Date","endOf","picker","mode","type","message","msg","catch","err","marginLeft","marginTop","dataSource","pagination","rowClassName","summary","pageData","totalBorrow","forEach","emission"],"sourceRoot":""}
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[8689],{18689:function(e,t,n){n.r(t);var r=n(29439),a=n(72791),o=n(47195),s=n(61855),i=n(13832),d=n(2556),u=n(78347),c=n(67571),l=(n(81714),n(97892)),f=n.n(l),p=n(5122),S=n(80184),y=o.Z.RangePicker;s.Z.Search;t.default=function(e){var t=(0,a.useState)(2),n=(0,r.Z)(t,2),o=(n[0],n[1],(0,a.useState)([])),s=(0,r.Z)(o,2),l=s[0],h=s[1],m=(0,a.useState)(f()().startOf("year").format("YYYY-MM-DD")),Z=(0,r.Z)(m,2),g=Z[0],k=Z[1],v=(0,a.useState)(f()().format("YYYY-MM-DD")),x=(0,r.Z)(v,2),D=x[0],Y=x[1],C=(0,a.useState)(!1),T=(0,r.Z)(C,2),b=(T[0],T[1],(0,a.useState)([])),j=(0,r.Z)(b,2),w=(j[0],j[1],(0,a.useState)(!1)),I=(0,r.Z)(w,2),M=I[0],L=I[1],N=(0,a.useState)(1),P=(0,r.Z)(N,2),_=P[0],z=P[1],E=(0,a.useState)(""),F=(0,r.Z)(E,2),K=F[0],O=F[1],R=(0,a.useState)(""),H=(0,r.Z)(R,2),W=H[0],q=(H[1],(0,a.useState)("")),A=(0,r.Z)(q,2),B=A[0],G=(A[1],(0,a.useState)("")),J=(0,r.Z)(G,2),Q=J[0],U=(J[1],(0,a.useState)("")),V=(0,r.Z)(U,2),X=V[0],$=(V[1],(0,a.useState)("")),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],re=(0,a.useState)(2),ae=(0,r.Z)(re,2),oe=ae[0],se=ae[1],ie=(0,a.useState)(1),de=(0,r.Z)(ie,2),ue=de[0],ce=de[1],le=(0,a.useState)(!1),fe=(0,r.Z)(le,2),pe=fe[0],Se=fe[1],ye=(0,c.k6)();console.log(e),(0,a.useEffect)((function(){if(e.location.state){var t=e.location.state;Y(t.endDate2),k(t.startDate2),Se(!0)}else Se(!1)}),[]),(0,a.useEffect)((function(){e.location.state?pe&&he():pe||he()}),[_,ue,oe,te,pe]);var he=function(){L(!0),p.Z.post("demand_resp/resp_history/getTaskList",{number:_,pageSize:10,startDate:g,endDate:D,feedbackTimeSort:W,profitSort:B,respLevelSort:Q,respSubsidySort:X,respTypeSort:te,rsTimeSort:oe}).then((function(e){if(console.log(e),200==e.data.code){var t=e.data.data.content;h(t),L(!1),O(e.data.data.totalElements)}})).catch((function(e){console.log(e)}))},me=[{title:"\u5e8f\u53f7",width:90,render:function(e,t,n){return 10*(_-1)+n+1}},{title:"\u4efb\u52a1\u7f16\u7801",dataIndex:"taskCode",key:"taskCode"},{title:"\u54cd\u5e94\u65f6\u6bb5",dataIndex:"rsDate",key:"rsDate",sorter:!0,render:function(e,t,n){return t.rsTime+"~"+t.reTime}},{title:"\u54cd\u5e94\u7c7b\u578b",dataIndex:"respType",key:"respType",sorter:!0,render:function(e,t,n,r){return 1===t.respType?"\u524a\u5cf0\u54cd\u5e94":2===t.respType?"\u586b\u8c37\u54cd\u5e94":void 0}},{title:"\u54cd\u5e94\u7ea7\u522b",dataIndex:"respLevel",key:"respLevel",render:function(e,t,n,r){return 1==e?"\u65e5\u524d\u54cd\u5e94":2==e?"\u5c0f\u65f6\u54cd\u5e94":3==e?"\u5206\u949f\u54cd\u5e94":4==e?"\u79d2\u7ea7\u54cd\u5e94":void 0}},{title:"\u54cd\u5e94\u8865\u8d34\uff08\u5143/kWh\uff09",dataIndex:"respSubsidy",key:"respSubsidy",render:function(e,t,n){return null==e||void 0==e||""===e||"-"==e?"-":Number(e).toFixed(2)}},{title:"\u6536\u76ca(\u5143)",dataIndex:"profit",key:"profit",render:function(e,t,n){return null==e||void 0==e||""===e||"-"==e?"-":Number(e).toFixed(2)}},{title:"\u8be6\u60c5",key:"action",render:function(e,t,n,r){return(0,S.jsx)("a",{onClick:function(){return e=t,console.log(e),ye.push({pathname:"/Historydetail",state:{detail:e,startDate1:g,endDate1:D}}),void Se(!1);var e},children:"\u67e5\u770b"})}}],Ze="YYYY-MM-DD";return(0,S.jsxs)("div",{className:"historys",children:[(0,S.jsxs)("div",{className:"",style:{overflow:"hidden"},children:[(0,S.jsx)(y,{style:{marginRight:20},onChange:function(e,t){console.log(t),t[0]?(Y(t[1]),k(t[0])):(Y(""),k(""))},disabledDate:function(e){return e<f()(new Date("2023-01-01"))||e>f()().endOf("day")},value:""!=g&&""!=D?[f()(g,Ze),f()(D,Ze)]:void 0,format:Ze}),(0,S.jsx)(d.ZP,{type:"primary",onClick:function(){console.log(),g&&D?(ce(1),z(1),he()):i.ZP.info("\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4")},children:"\u67e5\u8be2"})]}),(0,S.jsx)("div",{style:{margin:"20px 0px"},children:(0,S.jsx)(u.Z,{dataSource:l,columns:me,loading:M,onChange:function(e,t,n){!function(e,t,n){console.log(e,t,n),"rsDate"==n.columnKey&&(n.order?"ascend"==n.order?(se(1),ne("")):"descend"==n.order&&(se(2),ne("")):(se(2),ne(""))),"respType"==n.columnKey&&(n.order?"ascend"==n.order?(se(""),ne(1)):"descend"==n.order&&(se(""),ne(2)):(se(""),ne(2)))}(e,t,n)},pagination:{total:K,defaultCurrent:1,defaultPageSize:10,showSizeChanger:!1,current:ue,onChange:function(e){z(e),ce(e)}}})})]})}},81714:function(){}}]);
//# sourceMappingURL=8689.83b8f8b2.chunk.js.map
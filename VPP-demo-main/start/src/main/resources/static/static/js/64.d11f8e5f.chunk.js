"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[64],{50064:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var a=s(29439),i=s(72791),l=s(97943),n=s(13832),o=s(47195),d=s(2556),r=s(50131),c=s(67571),u=function(e){var t=new Date(e),s=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),l=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(i," ").concat(l,":").concat(n)},v=function(e){return 1===e?"\u524a\u5cf0\u54cd\u5e94":2===e?"\u586b\u8c37\u54cd\u5e94":"-"},m=function(e){return 1===e?"\u65e5\u524d\u54cd\u5e94":2===e?"\u5c0f\u65f6\u54cd\u5e94":3===e?"\u5206\u949f\u54cd\u5e94":4===e?"\u79d2\u7ea7\u54cd\u5e94":void 0},p=function(e,t){if(!t){if(1===e)return"\u5f85\u7533\u62a5";if(2===e)return"\u6267\u884c\u4e2d";if(3===e)return"\u5df2\u5b8c\u6210";if(4===e||0===e)return"\u4e0d\u53c2\u52a0"}if(!e){if(1===t)return"\u5f85\u7533\u62a5";if(2===t)return"\u5f85\u51fa\u6e05";if(3===t)return"\u5df2\u51fa\u6e05"}if(t){if(1===t&&1===e)return"\u5f85\u7533\u62a5";if(2===t&&1===e)return"\u5f85\u51fa\u6e05";if(3===t&&1===e)return"\u5df2\u51fa\u6e05";if(3===t&&2===e)return"\u6267\u884c\u4e2d";if(3===t&&3===e)return"\u5df2\u5b8c\u6210";if(4===e||0===e)return"\u4e0d\u53c2\u52a0"}return"\u4e0d\u53c2\u52a0"},h=function(e){switch(e){case 11:case 12:return"\u5f85\u7533\u62a5";case 15:return"\u4e0d\u53c2\u52a0";case 21:return"\u5f85\u51fa\u6e05";case 22:return"\u5df2\u51fa\u6e05";case 24:return"\u6267\u884c\u4e2d";case 25:return"\u5df2\u5b8c\u6210";default:return"-"}},x=function(e){var t=new Date(e),s=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),l="",n="";return Number(t.getHours().toString())>=22?(l="23",n="45"):(l=(Number(t.getHours().toString())+2).toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0")),{startTime:e.split(" ")[1],endDate:"".concat(s,"-").concat(a,"-").concat(i),endTime:"".concat(l,":").concat(n)}},f=function(e){return isNaN(e)?0:e?Math.round(100*e)/100:0},g=s(58768),j=s(41418),y=s.n(j),N=s(61855),S=s(97892),b=s.n(S),k=s(80184),L=(o.Z.RangePicker,N.Z.Search,function(e){var t=e||{},s=t.setIsTipsModalOpen,a=t.isTipsModalOpen,i=function(){s(!1)};return(0,k.jsxs)(g.Z,{className:"report-modal",visible:a,footer:null,title:"\u63d0\u793a",onCancel:i,children:[(0,k.jsx)("p",{className:"tips-content",children:"\u662f\u5426\u786e\u8ba4\u6309\u5f53\u524d\u7684\u7533\u62a5\u8d1f\u8377\u8fdb\u884c\u7533\u62a5\uff1f"}),(0,k.jsxs)("div",{className:"btn-wrapper",children:[(0,k.jsx)(d.ZP,{className:"cancel-btn",onClick:i,children:"\u53d6\u6d88"}),(0,k.jsx)(d.ZP,{className:"ok-btn",onClick:i,children:"\u786e\u5b9a"})]})]})}),w=function(e){var t=e||{},s=t.isModalOpen,l=t.setIsModalOpen,n=t.taskInfo,o=t.nodeList,d=(0,i.useState)(!1),r=(0,a.Z)(d,2),c=r[0],u=r[1];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(g.Z,{className:"expand-modal",visible:s,footer:null,closable:!1,children:[(0,k.jsx)("i",{className:"close-icon",onClick:function(){l(!1)}}),(0,k.jsxs)("div",{className:"spot-forecast_content_right_content",children:[(0,k.jsxs)("div",{className:"spot-forecast-right-top",children:[(0,k.jsx)("div",{className:"right-img"}),(0,k.jsx)("span",{className:"right-text",children:"\u9700\u6c42\u54cd\u5e94\u5e73\u53f0"})]}),(0,k.jsxs)("div",{className:"spot-forecast-right-center",children:[(0,k.jsx)("div",{className:"center-img-top"}),(0,k.jsxs)("div",{className:"model-wrap",children:[(0,k.jsx)("div",{className:"modal-img"}),(0,k.jsx)("span",{className:"model-text",children:"\u80fd\u6e90\u5927\u6a21\u578b"})]})]}),(0,k.jsx)("div",{className:"spot-forecast-right-bottom",children:(0,k.jsx)("div",{className:"arrow-bottom"})}),(0,k.jsxs)("div",{className:"left-text-wrap",children:[(0,k.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u65f6\u6bb5\uff1a",null===n||void 0===n?void 0:n.rsDate]}),(0,k.jsxs)("p",{className:"left-text",children:["\u8d1f\u8377\u9700\u6c42(kW)\uff1a",null===n||void 0===n?void 0:n.respLoad,"kW"]}),(0,k.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u7c7b\u578b\uff1a",v(null===n||void 0===n?void 0:n.respType)]}),(0,k.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u7ea7\u522b\uff1a",m(null===n||void 0===n?void 0:n.respLevel)]})]}),(0,k.jsxs)("div",{className:"right-text-wrap",children:[(0,k.jsxs)("p",{className:"other-right-text",children:["\u9700\u6c42\u54cd\u5e94\u72b6\u6001\uff1a",111]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u7533\u62a5\u8d1f\u8377(kW)\uff1a",null===n||void 0===n?void 0:n.declareLoad,"kW"]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u8c03\u8282\u8d1f\u8377(kW)\uff1a",null===n||void 0===n?void 0:n.adjustLoad,"kW"]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u9884\u6d4b\u8d1f\u8377(kW)\uff1a",null===n||void 0===n?void 0:n.forecastLoad,"kW"]})]})]}),(0,k.jsx)("div",{className:"dots-wrapper",children:null===o||void 0===o?void 0:o.map((function(e,t){return(0,k.jsxs)("div",{className:"dots-1",children:[(0,k.jsxs)("div",{className:"dots-1-header",children:[(0,k.jsx)("div",{className:y()("round",{"online-status":null===e||void 0===e?void 0:e.online})}),(0,k.jsx)("span",{className:"dots-1-header-text",children:null===e||void 0===e?void 0:e.nodeName})]}),(0,k.jsxs)("div",{className:"dots1-content",children:[(0,k.jsxs)("p",{className:"dots1-text",children:["\u72b6\u6001\uff1a",h(null===e||void 0===e?void 0:e.drsStatus)||"-"]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u7533\u62a5\u8d1f\u8377(kW)\uff1a",null===e||void 0===e?void 0:e.declareLoad,"kW"]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u8c03\u8282\u8d1f\u8377(kW)\uff1a",null===e||void 0===e?void 0:e.adjustLoad,"kW"]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u9884\u6d4b\u8d1f\u8377(kW)\uff1a",null===e||void 0===e?void 0:e.forecastLoad,"kW"]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u54cd\u5e94\u8d1f\u8377(kW)\uff1a",null===e||void 0===e?void 0:e.deviceRatedLoad,"kW"]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u54cd\u5e94\u7535\u91cf(kW)\uff1a",null===e||void 0===e?void 0:e.reality,"kW"]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u9884\u4f30\u6536\u76ca\uff08\u5143\uff09\uff1a",null===e||void 0===e?void 0:e.income,"\u5143"]})]})]},t)}))})]}),(0,k.jsx)(L,{isTipsModalOpen:c,setIsTipsModalOpen:u})]})},Z=(s(74569),s(5122)),F=function(e){var t=e||{},s=t.setIsStrategyModalOpen,l=t.selectedStrategyItem,o=t.queryStrategy,c=l||{},v=c.id,m=c.nodeName,p=c.noHouseholds,h=c.time,x=c.deviceName,f=c.content,j=(0,i.useState)(f?null===f||void 0===f?void 0:f.substring(4,(null===f||void 0===f?void 0:f.length)-1):null),y=(0,a.Z)(j,2),S=y[0],b=y[1],L=function(){b(f?null===f||void 0===f?void 0:f.substring(4,null===f||void 0===f?void 0:f.length):""),s(!1)};return(0,k.jsxs)(g.Z,{className:"strategy-modal",visible:!0,footer:null,title:"\u51b7\u673a\u51fa\u6c34\u6e29\u5ea6\u8c03\u8282",onCancel:L,children:[(0,k.jsxs)("div",{className:"strategy-modal-content",children:[(0,k.jsxs)("div",{className:"strategy-modal-content-left",children:[(0,k.jsx)("p",{className:"strategy-modal-content-left-item",children:"\u8282\u70b9"}),(0,k.jsx)("p",{className:"strategy-modal-content-left-item",children:"\u6237\u53f7"}),(0,k.jsx)("p",{className:"strategy-modal-content-left-item",children:"\u65f6\u95f4\u70b9"}),(0,k.jsx)("p",{className:"strategy-modal-content-left-item",children:"\u63a7\u5236\u8bbe\u5907"}),(0,k.jsx)("p",{className:"strategy-modal-content-left-item",children:"\u51fa\u6c34\u6e29\u5ea6"})]}),(0,k.jsxs)("div",{className:"strategy-modal-content-right",children:[(0,k.jsx)("p",{className:"strategy-modal-content-right-item",children:m}),(0,k.jsx)("p",{className:"strategy-modal-content-right-item",children:p}),(0,k.jsx)("p",{className:"strategy-modal-content-right-item",children:u(h)}),(0,k.jsx)(r.Z,{placement:"top",title:null===x||void 0===x?void 0:x.join(","),color:"#38373F",children:(0,k.jsx)("span",{className:"strategy-modal-content-right-item",children:null===x||void 0===x?void 0:x.join(",")})}),(0,k.jsxs)("p",{className:"strategy-modal-content-right-item",children:[(0,k.jsx)(N.Z,{value:S,className:"temperature-input",onChange:function(e){b(e.target.value)},style:{width:"65px",height:"32px"}}),(0,k.jsx)("span",{className:"temperature-icon",children:"\xb0C"}),(0,k.jsx)("span",{className:"rang-text",children:"\uff08\u8303\u56f4\u9650\u5236\uff1a14\xb0C-20\xb0C\uff09"})]})]})]}),(0,k.jsxs)("div",{className:"btn-wrapper",children:[(0,k.jsx)(d.ZP,{className:"cancel-btn",onClick:L,children:"\u53d6\u6d88"}),(0,k.jsx)(d.ZP,{className:"ok-btn",onClick:function(){S>20||S<14?n.ZP.error("\u51fa\u6c34\u6e29\u5ea6\u53ea\u80fd\u572814\u523020\u4e4b\u524d"):Z.Z.post("AIEnergy/strategyUpdate",{id:v,strategyContent:S},{headers:{"Content-Type":"application/json"}}).then((function(e){n.ZP.success("\u4fee\u6539\u6210\u529f"),L(),o()})).catch((function(e){n.ZP.error("\u63a5\u53e3\u9519\u8befstrategyUpdate")}))},children:"\u786e\u5b9a"})]})]})},E=s(4942),C=s(66550),T=(s(870),function(e){var t=e||{},s=t.timerList,a=t.baselineList,l=t.predictionList;return(0,i.useEffect)((function(){!function(){for(var e,t=document.getElementById("main-01"),s=C.init(t),a=[{adjust:!1,value:[0,40,120]},{adjust:!0,value:[[1,10,100],[1,20,100]]},{adjust:!1,value:[2,20,110]}],i=[],l=0;l<a.length;l++)if(a[l].adjust){for(var n=a[l].value,o=JSON.parse(JSON.stringify(n[0])),d=JSON.parse(JSON.stringify(n[1])),r=1;r<=o[1];r++)i.push({value:[o[0],r,o[2]],itemStyle:{color:"#3370FF"}});for(var c=o[1];c<=o[1]+d[1];c++)i.push({value:[d[0],c,d[2]],itemStyle:{color:"#44D7B6"}})}else for(var u=a[l],v=1;v<=u.value[1];v++)i.push({value:[u.value[0],v,u.value[2]],itemStyle:{color:"#B1CBE2"}});(e={xAxis3D:{name:"",nameTextStyle:{color:"#8F959E",fontSize:12},type:"category",data:[0,1,2,3,4],axisLine:{show:!0,interval:0,lineStyle:{color:"#8F959E"}},axisLabel:{interval:0,textStyle:{color:"#8F959E"}}},yAxis3D:{name:"",nameGap:30,type:"value",axisLine:{show:!0,interval:0,lineStyle:{color:"#8F959E"}},minInterval:0,interval:50,axisLabel:{interval:5}},zAxis3D:{name:"\u529f\u7387(kW)",type:"value",nameGap:30,nameTextStyle:{color:"#8F959E",fontSize:12},axisLine:{show:!0,interval:0,lineStyle:{color:"#8F959E"}},axisLabel:{interval:0,textStyle:{color:"#8F959E"}}},grid3D:(0,E.Z)({boxDepth:100,boxHeight:40,light:{main:{intensity:1.2,shadow:!0},ambient:{intensity:.3}}},"light",{main:{intensity:1.2},ambient:{intensity:.3}}),series:[].concat([])})&&s.setOption(e)}()}),[s,a,l]),(0,k.jsx)("div",{id:"main-01",style:{width:"580px",height:"220px"}})}),W=function(e){var t=e||{},s=t.timerList,a=t.baselineList,l=t.predictionList;return(0,i.useEffect)((function(){!function(){for(var e,t=document.getElementById("main-02"),s=C.init(t),a=[],i=[{adjust:!1,value:[0,10,400]},{adjust:!0,value:[[1,50,500],[1,40,500]]},{adjust:!1,value:[2,20,400]}],l=[],n=0;n<i.length;n++)if(i[n].adjust){for(var o=i[n].value,d=o[0],r=o[1],c=1;c<=d[1];c++)l.push({value:[d[0],c,d[2]],itemStyle:{color:"#3370FF"}});for(var u=d[1];u<=d[1]+r[1];u++)l.push({value:[r[0],u,r[2]],itemStyle:{color:"#44D7B6"}})}else for(var v=i[n],m=1;m<=v.value[1];m++)l.push({value:[v.value[0],m,v.value[2]],itemStyle:{color:"#B1CBE2"}});console.log(l,"formdata"),a.push({stack:!0,shading:"lambert",emphasis:{label:{show:!1}},type:"bar3D",barSize:[10,1,10],data:l}),e={tooltip:(0,E.Z)({trigger:"item",triggerOn:"mousemove",enterable:!0,formatter:function(e){var t=e.data.value,s=t[0],a=i[s].adjust,l="",n="",o="";return a?i[s].value.forEach((function(e,t){0===t?n=e[1]:o=e[1]})):l=i[s].value[1],a?'<div style="padding-left:5px;height:30px;line-height:30px;color:#fff;font-size:14px"></div>'+'<div style="display:flex;color:#fff">\n                 <div style="display:flex;align-items:center;margin-right:125px"> <span style="display:inline-block;width:6px;height:6px;background:#C9E3FE;border-radius:6px;margin-right:6px"></span>\u65f6\u95f4\uff1a</div>\n                 <span style="">'.concat(t[0],"</span>\n             </div>")+'<div style="display:flex;color:#fff">\n               <div style="display:flex;align-items:center;margin-right:125px"> <span style="display:inline-block;width:6px;height:6px;background:#C9E3FE;border-radius:6px;margin-right:6px"></span>\u4ef7\u683c\uff1a</div>\n               <span style="">'.concat(t[2],"</span>\n             </div>")+'<div style="display:flex;color:#fff">\n                 <div style="display:flex;align-items:center;margin-right:124px"> <span style="display:inline-block;width:6px;height:6px;background:#E02020;border-radius:6px;margin-right:6px"></span>\u529f\u7387(kW)\uff1a</div>\n                 <span style="">'.concat(n,"</span>\n             </div>")+'<div style="display:flex;color:#fff">\n                 <div style="display:flex;align-items:center;margin-right:124px"> <span style="display:inline-block;width:6px;height:6px;background:#E02020;border-radius:6px;margin-right:6px"></span>\u529f\u7387(kW)\uff1a</div>\n                 <span style="">'.concat(o,"</span>\n             </div>"):'<div style="padding-left:5px;height:30px;line-height:30px;color:#fff;font-size:14px"></div>'+'<div style="display:flex;color:#fff">\n                 <div style="display:flex;align-items:center;margin-right:125px"> <span style="display:inline-block;width:6px;height:6px;background:#C9E3FE;border-radius:6px;margin-right:6px"></span>\u65f6\u95f4\uff1a</div>\n                 <span style="">'.concat(t[0],"</span>\n             </div>")+'<div style="display:flex;color:#fff">\n               <div style="display:flex;align-items:center;margin-right:125px"> <span style="display:inline-block;width:6px;height:6px;background:#C9E3FE;border-radius:6px;margin-right:6px"></span>\u4ef7\u683c\uff1a</div>\n               <span style="">'.concat(t[2],"</span>\n             </div>")+'<div style="display:flex;color:#fff">\n                 <div style="display:flex;align-items:center;margin-right:124px"> <span style="display:inline-block;width:6px;height:6px;background:#E02020;border-radius:6px;margin-right:6px"></span>\u529f\u7387(kW)\uff1a</div>\n                 <span style="">'.concat(l,"</span>\n             </div>")},backgroundColor:"#302F39",borderColor:"#302F39",className:"base-tool-tip"},"enterable",!0),xAxis3D:{name:"",nameTextStyle:{color:"#8F959E",fontSize:12},type:"category",data:[0,1,2,3,4],axisLine:{show:!0,interval:0,lineStyle:{color:"#8F959E"}},axisLabel:{interval:0,textStyle:{color:"#8F959E"}}},yAxis3D:{name:"",type:"value"},zAxis3D:{name:"\u529f\u7387(kW)",type:"value",nameGap:30,nameTextStyle:{color:"#8F959E",fontSize:12},axisLine:{show:!0,interval:0,lineStyle:{color:"#8F959E"}},axisLabel:{interval:0,textStyle:{color:"#8F959E"}}},grid3D:(0,E.Z)({top:0,show:!0,axisLine:{show:!0,lineStyle:{width:1}},viewControl:{beta:20,alpha:3,distance:170},splitLine:{show:!1},axisPointer:{show:!1},borderWidth:0,boxHeight:40,light:{main:{intensity:1.2,shadow:!0},ambient:{intensity:.3}}},"light",{main:{intensity:1.2},ambient:{intensity:.3}}),series:[].concat(a)},e&&s.setOption(e)}()}),[s,a,l]),(0,k.jsx)("div",{id:"main-02",style:{width:"592px",height:"320px"}})},D=function(e){var t=e||{},s=t.timerList,a=t.baselineList,l=t.predictionList;return(0,i.useEffect)((function(){!function(){for(var e,t=document.getElementById("main-03"),s=C.init(t),a=[],i=[{adjust:!1,value:[0,800,400]},{adjust:!0,value:[[1,500,500],[1,400,500]]},{adjust:!1,value:[2,700,400]}],l=[],n=0;n<i.length;n++)if(i[n].adjust){for(var o=i[n].value,d=o[0],r=o[1],c=1;c<=d[1];c++)l.push({value:[d[0],c,d[2]],itemStyle:{color:"#3370FF"}});for(var u=d[1];u<=d[1]+d[2];u++)l.push({value:[r[0],u,r[2]],itemStyle:{color:"#44D7B6"}})}else for(var v=i[n],m=1;m<=v.value[1];m++)l.push({value:[v.value[0],m,v.value[2]],itemStyle:{color:"#B1CBE2"}});a.push({stack:!0,shading:"lambert",emphasis:{label:{show:!1}},type:"bar3D",barSize:[10,1,10],data:l}),(e={xAxis3D:{name:"",nameTextStyle:{color:"#8F959E",fontSize:12},type:"category",data:[0,1,2,3,4],axisLine:{show:!0,interval:0,lineStyle:{color:"#8F959E"}},axisLabel:{interval:0,textStyle:{color:"#8F959E"}}},yAxis3D:{name:"",type:"value"},zAxis3D:{name:"\u529f\u7387(kW)",type:"value",nameGap:30,nameTextStyle:{color:"#8F959E",fontSize:12},axisLine:{show:!0,interval:0,lineStyle:{color:"#8F959E"}},axisLabel:{interval:0,textStyle:{color:"#8F959E"}}},grid3D:(0,E.Z)({top:0,show:!0,axisLine:{show:!0,lineStyle:{width:1}},viewControl:{beta:20,alpha:3,distance:170},splitLine:{show:!1},axisPointer:{show:!1},borderWidth:0,boxWidth:200,boxDepth:30,light:{main:{intensity:1.2,shadow:!0},ambient:{intensity:.3}}},"light",{main:{intensity:1.2},ambient:{intensity:.3}}),series:[].concat(a)})&&s.setOption(e)}()}),[s,a,l]),(0,k.jsx)("div",{id:"main-03",style:{width:"592px",height:"320px"}})},I=s(96463),_=s(54334),H=s.n(_),P=s(14036),A=s.n(P);b().extend(H()),b().extend(A());var M=l.Z.RangePicker,O=function(){var e,t,s,l=(0,i.useState)(!1),g=(0,a.Z)(l,2),j=g[0],N=g[1],S=(0,i.useState)(!1),L=(0,a.Z)(S,2),E=L[0],C=L[1],_=(0,i.useState)(null),H=(0,a.Z)(_,2),P=H[0],A=H[1],O=(0,i.useState)([]),z=(0,a.Z)(O,2),B=(z[0],z[1]),Y=(0,i.useState)("-1"),R=(0,a.Z)(Y,2),G=R[0],J=(R[1],(0,i.useState)("-1")),V=(0,a.Z)(J,2),q=V[0],Q=(V[1],(0,i.useState)([])),U=(0,a.Z)(Q,2),K=U[0],X=U[1],$=(0,i.useState)([]),ee=(0,a.Z)($,2),te=(ee[0],ee[1],(0,i.useState)({})),se=(0,a.Z)(te,2),ae=se[0],ie=se[1],le=(0,i.useState)([]),ne=(0,a.Z)(le,2),oe=(ne[0],ne[1]),de=(0,i.useState)([]),re=(0,a.Z)(de,2),ce=re[0],ue=re[1],ve=(0,i.useState)([]),me=(0,a.Z)(ve,2),pe=me[0],he=me[1],xe=(0,i.useState)([]),fe=(0,a.Z)(xe,2),ge=fe[0],je=fe[1],ye=(0,i.useState)([]),Ne=(0,a.Z)(ye,2),Se=Ne[0],be=Ne[1],ke=(0,i.useState)([]),Le=(0,a.Z)(ke,2),we=Le[0],Ze=Le[1],Fe=(0,i.useState)([]),Ee=(0,a.Z)(Fe,2),Ce=Ee[0],Te=Ee[1],We=(0,i.useState)(null),De=(0,a.Z)(We,2),Ie=De[0],_e=De[1],He=(0,i.useState)(null),Pe=(0,a.Z)(He,2),Ae=Pe[0],Me=Pe[1],Oe=(0,i.useState)(""),ze=(0,a.Z)(Oe,2),Be=ze[0],Ye=ze[1],Re=(0,i.useState)([]),Ge=(0,a.Z)(Re,2),Je=(Ge[0],Ge[1]),Ve=(0,i.useState)(""),qe=(0,a.Z)(Ve,2),Qe=qe[0],Ue=qe[1],Ke=(0,i.useState)([]),Xe=(0,a.Z)(Ke,2),$e=Xe[0],et=Xe[1],tt=(0,i.useState)({}),st=(0,a.Z)(tt,2),at=st[0],it=st[1],lt=(0,i.useState)([]),nt=(0,a.Z)(lt,2),ot=(nt[0],nt[1]),dt=(0,i.useState)(null),rt=(0,a.Z)(dt,2),ct=rt[0],ut=rt[1],vt=(0,i.useState)(null),mt=(0,a.Z)(vt,2),pt=mt[0],ht=mt[1],xt=(0,c.k6)(),ft=function(e,t,s,a,i){jt(e),setTimeout((function(){bt(e)}),300),setTimeout((function(){!function(e,t,s,a,i){Z.Z.post("AIEnergy/demandNodeQuery",{respId:e},{headers:{"Content-Type":"application/json"}}).then((function(l){var n=l.data.data||[];ot(n),Ue(n[0].value),setTimeout((function(){yt(e,t,s,n[0].value,a,i)}),200)})).catch((function(e){}))}(e,t,s,a,i)}),400)},gt=function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a={status:e,respType:t};Z.Z.post("AIEnergy/getTaskCodeList",a,{headers:{"Content-Type":"application/json"}}).then((function(e){var t,a,i,l,n,o,d,r=e.data.data.content;Je(r);var c=null===r||void 0===r?void 0:r.map((function(e){return{label:null===e||void 0===e?void 0:e.taskCode,value:null===e||void 0===e?void 0:e.respId}})),u=null===(t=c[0])||void 0===t?void 0:t.value,v=x(null===(a=r[0])||void 0===a?void 0:a.rsTime),m=v.startTime,p=v.endDate,h=v.endTime;_e(m),Me(h),Ye(p),ut(null===(i=r[0])||void 0===i?void 0:i.rsTime),ht(null===(l=r[0])||void 0===l?void 0:l.reTime),A(u),B(c),s&&u&&ft(u,null===(n=r[0])||void 0===n?void 0:n.rsTime,"".concat(p," ").concat(h),null===(o=r[0])||void 0===o?void 0:o.rsTime,null===(d=r[0])||void 0===d?void 0:d.reTime)})).catch((function(e){}))},jt=function(e){Z.Z.post("AIEnergy/strategyQuery",{respId:e},{headers:{"Content-Type":"application/json"}}).then((function(e){var t,s=null===(t=e.data.data)||void 0===t?void 0:t.map((function(e){return{nodeName:null===e||void 0===e?void 0:e.nodeName,id:null===e||void 0===e?void 0:e.id,content:null===e||void 0===e?void 0:e.strategyContent,time:null===e||void 0===e?void 0:e.timePoint,noHouseholds:null===e||void 0===e?void 0:e.noHouseholds,deviceName:null===e||void 0===e?void 0:e.deviceName}}));X(s)})).catch((function(e){n.ZP.error("\u63a5\u53e3\u9519\u8befstrategyQuery")}))},yt=function(e,t,s,a,i,l){Z.Z.post("AIEnergy/demandForecastChart",{respId:e,nodeId:a,systemId:"kongtiao",rsTime:t,reTime:s,sTime:i,eTime:l},{headers:{"Content-Type":"application/json"}}).then((function(e){var t,s,a,i,l,n,o,d=null===(t=e.data.data)||void 0===t?void 0:t.map((function(e){return{value:null===e||void 0===e?void 0:e.timeStamp,textStyle:{fontSize:8,color:"#8F959E"}}})),r=null===(s=e.data.data)||void 0===s?void 0:s.map((function(e){return{value:null===e||void 0===e?void 0:e.timeStamp,textStyle:{fontSize:8,color:e.adjust?"#0F9D90":"#8F959E"}}}));ue(r);var c=null===(a=e.data.data)||void 0===a?void 0:a.map((function(e){return{value:null===e||void 0===e?void 0:e.forecastLoad,itemStyle:{color:"#7CA5CF"}}})),u=null===(i=e.data.data)||void 0===i?void 0:i.map((function(e){return{value:null===e||void 0===e?void 0:e.realValue,itemStyle:{color:"#3370FF"}}})),v=null===(l=e.data.data)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.baselineLoadValue})),m=null===(n=e.data.data)||void 0===n?void 0:n.map((function(e,t){return null!==e&&void 0!==e&&e.adjust?{value:null!==e&&void 0!==e&&e.forecastLoadAfterRegulation?null===e||void 0===e?void 0:e.forecastLoadAfterRegulation:[t,0,0],itemStyle:{color:"#3370FF"}}:{value:null===e||void 0===e?void 0:e.forecastLoad,itemStyle:{color:"#7CA5CF"}}})),p=null===(o=e.data.data)||void 0===o?void 0:o.map((function(e,t){return e.adjust?{value:null!==e&&void 0!==e&&e.forecastRegulationLoad?null===e||void 0===e?void 0:e.forecastRegulationLoad:[t,0,0],itemStyle:{color:"#44D7B6"}}:{value:[t,0,0],itemStyle:{color:"#7CA5CF"}}}));oe(d),je(c),he(v),be(u),Te(p),Ze(m)})).catch((function(e){n.ZP.error("\u63a5\u53e3\u9519\u8befdemandForecastChart")}))},Nt=I.jsPlumb.getInstance(),St=function(){Nt.repaintEverything()},bt=function(e){var t=new URLSearchParams;t.append("respId",e),Z.Z.post("AIEnergy/getDecisionChainList",t).then((function(e){var t=e.data.data;et(null===t||void 0===t?void 0:t.nodeList),it(null===t||void 0===t?void 0:t.respTask),null===t||void 0===t||t.nodeList,null===t||void 0===t||t.respTask})).catch((function(e){n.ZP.error("\u63a5\u53e3\u9519\u8befgetDecisionChainList")}))},kt=function(e,t,s,a,i){Be?t&&s?!function(e,t){var s=new Date(e),a=new Date(t);return Math.abs(a.getTime()-s.getTime())>72e5}(t,s)?yt(e,t,s,Qe,a,i):n.ZP.error("\u65f6\u95f4\u8303\u56f4\u53ea\u5141\u8bb8\u4e24\u4e2a\u534a\u5c0f\u65f6\u4e4b\u5185"):n.ZP.error("\u8bf7\u8f93\u5165\u65f6\u95f4"):n.ZP.error("\u8bf7\u8f93\u5165\u65e5\u671f")};return(0,i.useEffect)((function(){var e=document.getElementsByClassName("spot-forecast_content_left")[0],t=document.getElementsByClassName("spot-forecast_content_right")[0];return null===t||void 0===t||t.setAttribute("style","height:".concat(e.clientHeight,"px")),gt(G,q),function(){Nt.deleteEveryConnection(),window.removeEventListener("resize",St)}}),[]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"spot-forecast",children:(0,k.jsxs)("div",{className:"spot-forecast_content",children:[(0,k.jsxs)("div",{className:y()("spot-forecast_content_left"),children:[(0,k.jsxs)("div",{className:"spot-forecast_content_left_header",children:[(0,k.jsx)(o.Z,{format:"YYYY-MM-DD",allowClear:!1,defaultValue:b()(Be,"YYYY-MM-DD"),value:b()(Be,"YYYY-MM-DD"),style:{width:"150px",marginRight:"10px"},onChange:function(e,t){Ye(t)}}),(0,k.jsx)(M,{format:"HH:mm",style:{width:"150px",marginRight:"5px"},defaultValue:[b()(Ie,"HH:mm"),b()(Ae,"HH:mm")],value:[b()(Ie,"HH:mm"),b()(Ae,"HH:mm")],onChange:function(e){if(e&&2===e.length){var t,s,a=null===(t=e[0])||void 0===t?void 0:t.format("HH:mm"),i=null===(s=e[1])||void 0===s?void 0:s.format("HH:mm");_e(a),Me(i)}else _e(null),Me(null)},minuteStep:15}),(0,k.jsx)(d.ZP,{className:"left-query-btn",style:{width:"63px"},onClick:function(){return kt(P,Be+" "+Ie,Be+" "+Ae,ct,pt)},children:"\u67e5\u8be2"})]}),(0,k.jsxs)("div",{className:"spot-forecast_content_left_content",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"chart-wrap",children:[(0,k.jsx)("i",{className:"chart-icon"}),(0,k.jsx)("span",{className:"chart-title",children:"\u57fa\u7840\u73b0\u8d27\u529f\u7387\u4ef7\u683c\u9884\u6d4b\u80fd\u91cf\u5757"})]}),(0,k.jsx)(T,{timerList:ce,baselineList:pe,predictionList:ge})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"chart-wrap",children:[(0,k.jsx)("i",{className:"chart-icon"}),(0,k.jsx)("span",{className:"chart-title",children:"\u57fa\u4e8e\u7b56\u7565\u7684\u529f\u7387\u4ef7\u683c\u9884\u6d4b\u80fd\u91cf\u5757"})]}),(0,k.jsx)(W,{timerList:ce,baselineList:pe,topList:Ce,bottomList:we,predictionList:ge})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"chart-wrap",children:[(0,k.jsx)("i",{className:"chart-icon"}),(0,k.jsx)("span",{className:"chart-title",children:"\u5b9e\u9645\u73b0\u8d27\u529f\u7387\u4ef7\u683c\u80fd\u91cf\u5757"})]}),(0,k.jsx)(D,{timerList:ce,realList:Se,baselineList:pe})]})]})]}),(0,k.jsx)("div",{className:"spot-forecast_content_right",children:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"spot-forecast_content_right_header",children:[(0,k.jsxs)("div",{className:"title-wrapper",children:[(0,k.jsx)("i",{className:"spot-forecast-dots"}),(0,k.jsx)("span",{className:"spot-forecast-title",children:"\u62d3\u6251\u56fe"})]}),(0,k.jsx)("i",{className:"expand-icon",onClick:function(){xt.push({pathname:"/AllNodePage",state:{respId:P}})}})]}),(0,k.jsxs)("div",{className:"spot-forecast_content_right_content",children:[(0,k.jsxs)("div",{className:"spot-forecast-right-top",children:[(0,k.jsx)("div",{className:"right-img"}),(0,k.jsx)("span",{className:"right-text",id:"node-top",children:"\u9700\u6c42\u54cd\u5e94\u5e73\u53f0"})]}),(0,k.jsxs)("div",{className:"spot-forecast-right-center",children:[(0,k.jsx)("div",{className:y()("center-img-top",{overturn:"\u5f85\u51fa\u6e05"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)||"\u6267\u884c\u4e2d"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)},{completed:"\u5df2\u5b8c\u6210"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)})}),(0,k.jsxs)("div",{className:"model-wrap",children:[(0,k.jsx)("div",{className:"modal-img",id:"node-center"}),(0,k.jsx)("span",{className:"model-text",id:"node-center-bottom",children:"\u80fd\u6e90\u5927\u6a21\u578b"})]}),(0,k.jsxs)("div",{className:"left-text-wrap",children:[(0,k.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u65f6\u6bb5\uff1a",null===at||void 0===at?void 0:at.rsTime,"-",null===at||void 0===at||null===(e=at.reTime)||void 0===e?void 0:e.split(" ")[1]]}),(0,k.jsxs)("p",{className:"left-text",children:["\u8d1f\u8377\u9700\u6c42(kW)\uff1a",f(null===at||void 0===at?void 0:at.respLoad)]}),"\u5df2\u51fa\u6e05"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)||"\u6267\u884c\u4e2d"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)||"\u5df2\u5b8c\u6210"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?(0,k.jsxs)("p",{className:"left-text",children:["\u51fa\u6e05\u8d1f\u8377(kW)\uff1a",f(null===at||void 0===at?void 0:at.declareLoad)]}):null,(0,k.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u7c7b\u578b\uff1a",v(null===at||void 0===at?void 0:at.respType)]}),(0,k.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u7ea7\u522b\uff1a",m(null===at||void 0===at?void 0:at.respLevel)]})]}),(0,k.jsxs)("div",{className:y()("right-text-wrap",{"special-right-text-wrap":"\u5df2\u5b8c\u6210"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)||(null===$e||void 0===$e?void 0:$e.length)>=3}),children:[(0,k.jsxs)("p",{className:"other-right-text",children:["\u9700\u6c42\u54cd\u5e94\u72b6\u6001\uff1a",p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u7533\u62a5\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?0:f(null===at||void 0===at?void 0:at.declareLoad)]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u8c03\u8282\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?0:f(null===at||void 0===at?void 0:at.adjustLoad)]}),"\u5f85\u7533\u62a5"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?null:(0,k.jsxs)("p",{className:"other-right-text",children:["\u9884\u6d4b\u8d1f\u8377(kW)\uff1a",f(null===at||void 0===at?void 0:at.forecastLoad)]}),"\u6267\u884c\u4e2d"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:"other-right-text",children:["\u5b9e\u9645\u8d1f\u8377(kW)\uff1a",f(null===at||void 0===at?void 0:at.nowLoad)]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u57fa\u7ebf\u8d1f\u8377(kW)\uff1a",f(null===at||void 0===at?void 0:at.baseLoad)]})]}):null,"\u5df2\u5b8c\u6210"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:"other-right-text",children:["\u54cd\u5e94\u8d1f\u8377(kW)\uff1a",f(null===at||void 0===at?void 0:at.actualLoad)]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u54cd\u5e94\u7535\u91cf(kW)\uff1a",f(null===at||void 0===at?void 0:at.actualPower)]}),(0,k.jsxs)("p",{className:"other-right-text",children:["\u9884\u4f30\u6536\u76ca\uff08\u5143\uff09\uff1a",f(null===at||void 0===at?void 0:at.profit),"\u5143"]})]}):null]})]}),(0,k.jsx)("div",{className:"spot-forecast-right-bottom-".concat(null===$e||void 0===$e?void 0:$e.length),children:null===$e||void 0===$e||null===(t=$e.slice(0,3))||void 0===t?void 0:t.map((function(e,t){return(0,k.jsx)("div",{className:y()("bottom-gif-".concat(t+1),{overturn:"\u5f85\u7533\u62a5"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)||"\u6267\u884c\u4e2d"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)},{completed:"\u5df2\u5b8c\u6210"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)})})}))}),(0,k.jsx)("div",{className:"dots-wrapper",children:null===$e||void 0===$e||null===(s=$e.slice(0,3))||void 0===s?void 0:s.map((function(e,t){return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:"dots-1",children:[(0,k.jsxs)("div",{className:"dots-1-header",id:"node-item-".concat(t),children:[(0,k.jsx)("div",{className:y()("round",{"online-status":null===e||void 0===e?void 0:e.online})}),(0,k.jsx)(r.Z,{placement:"top",title:e.nodeName,color:"#38373F",children:(0,k.jsx)("span",{className:"dots-1-header-text",children:null===e||void 0===e?void 0:e.nodeName})})]}),(0,k.jsxs)("div",{className:"dots1-content",children:[(0,k.jsxs)("p",{className:"dots1-text",children:["\u72b6\u6001\uff1a",h(null===e||void 0===e?void 0:e.drsStatus)||"-"]}),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:"dots1-text",children:["\u7533\u62a5\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===h(null===e||void 0===e?void 0:e.drsStatus)?f((null===at||void 0===at?void 0:at.declareLoad)-(null===e||void 0===e?void 0:e.declareLoad)):f(null===e||void 0===e?void 0:e.declareLoad)]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u8c03\u8282\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===h(null===e||void 0===e?void 0:e.drsStatus)?f((null===at||void 0===at?void 0:at.adjustLoad)-(null===e||void 0===e?void 0:e.adjustLoad)):f(null===e||void 0===e?void 0:e.adjustLoad)]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u9884\u6d4b\u8d1f\u8377(kW)\uff1a",f(null===e||void 0===e?void 0:e.forecastLoad)]})]}),24===(null===e||void 0===e?void 0:e.drsStatus)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:"dots1-text",children:["\u5b9e\u9645\u8d1f\u8377(kW)\uff1a",f(null===e||void 0===e?void 0:e.nowLoad)]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u57fa\u7ebf\u8d1f\u8377(kW)\uff1a",f(null===e||void 0===e?void 0:e.baseLoad)]})]}):null,25===(null===e||void 0===e?void 0:e.drsStatus)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:"dots1-text",children:["\u54cd\u5e94\u8d1f\u8377(kW)\uff1a",f(null===e||void 0===e?void 0:e.responseLoad)]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u54cd\u5e94\u7535\u91cf(kW)\uff1a",f(null===e||void 0===e?void 0:e.realTimeLoad)]}),(0,k.jsxs)("p",{className:"dots1-text",children:["\u9884\u4f30\u6536\u76ca\uff08\u5143\uff09\uff1a",f(null===e||void 0===e?void 0:e.profit),"\u5143"]})]}):null]})]})})}))}),(0,k.jsxs)("div",{className:"strategy-wrap",children:[(0,k.jsx)("div",{className:"strategy-title-wrap",children:(0,k.jsxs)("div",{className:"strategy-title",children:[(0,k.jsx)("span",{className:"strategy-wrap-title active",children:"\u7b56\u7565"}),(0,k.jsx)("i",{className:"line"})]})}),(0,k.jsxs)("div",{className:"table-wrap",children:[(0,k.jsxs)("div",{className:"odd-rows first-line",children:[(0,k.jsx)("span",{className:"one-arrange",children:"\u8282\u70b9"}),(0,k.jsx)("span",{className:"two-arrange",children:"\u6237\u53f7"}),(0,k.jsx)("span",{className:"three-arrange",children:"\u65f6\u95f4\u70b9"}),(0,k.jsx)("span",{className:"three-arrange",children:"\u7b56\u7565\u5185\u5bb9"}),(0,k.jsx)("span",{className:"four-arrange",style:{display:"\u6267\u884c\u4e2d"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)||"\u5df2\u5b8c\u6210"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?"none":"block"},children:"\u64cd\u4f5c"})]}),null===K||void 0===K?void 0:K.map((function(e,t){return(0,k.jsxs)("div",{className:y()(t%2===0?"even-rows":"odd-rows"),children:[(0,k.jsx)(r.Z,{placement:"top",title:e.nodeName,color:"#38373F",children:(0,k.jsx)("span",{className:"one-arrange",children:e.nodeName})}),(0,k.jsx)(r.Z,{placement:"top",title:e.noHouseholds,color:"#38373F",children:(0,k.jsx)("span",{className:"two-arrange",children:e.noHouseholds})}),(0,k.jsx)("span",{className:"three-arrange",children:u(e.time)}),(0,k.jsx)(r.Z,{placement:"top",title:e.content,color:"#38373F",children:(0,k.jsx)("span",{className:"three-arrange",children:e.content})}),(0,k.jsx)("span",{className:"four-arrange",style:{display:"\u6267\u884c\u4e2d"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)||"\u5df2\u5b8c\u6210"===p(null===at||void 0===at?void 0:at.dstatus,null===at||void 0===at?void 0:at.declareStatus)?"none":"block"},onClick:function(t){ie(e),C(!0)},children:"\u4fee\u6539"})]},t)}))]})]})]})]})})]})}),(0,k.jsx)(w,{setIsModalOpen:N,isModalOpen:j,nodeList:$e,taskInfo:at}),E?(0,k.jsx)(F,{setIsStrategyModalOpen:C,selectedStrategyItem:ae,queryStrategy:function(){return jt(P)}}):null]})}}}]);
//# sourceMappingURL=64.d11f8e5f.chunk.js.map
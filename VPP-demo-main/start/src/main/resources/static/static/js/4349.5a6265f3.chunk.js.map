{"version":3,"file":"static/js/4349.5a6265f3.chunk.js","mappings":"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","sources":["views/Carbon/carbon/pattern/index.js"],"sourcesContent":["import React, { useEffect,useState } from 'react';\r\nimport { Tabs,Table,Select,Input,Button,DatePicker,ConfigProvider,Space,Modal,Form,message } from 'antd';\r\n\r\nimport './pattern.scss'\r\nimport {\n  FormOutlined,\r\n  DeleteOutlined,\r\n  ExclamationCircleOutlined\n} from '@ant-design/icons';\r\n// import http from '../../../../axios/serve.js'\r\nimport http from '../../../../server/server.js'\r\n\r\nconst { Option } = Select;\r\nconst { confirm } = Modal;\r\nconst Pattern =() =>{\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [nodeList, setNodeList] = useState([]);\r\n\tconst [nodeId, setNodeId] = useState('');\r\n\tconst [scopeType, setScopeType] = useState('');\r\n\tconst [content, setContent] = useState([]);\r\n\tconst [status, setStatus] = useState(0);\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false);\r\n\tconst [systemList, setSystemList] = useState([]);\r\n\tconst [systemId, setSystemId] = useState('');\r\n\tconst [deviceList, setDeviceList] = useState([]);\r\n\tconst [pointViewList, setPointViewList] = useState([]);\r\n\tconst [dataPointName, setDataPointName] = useState('');\r\n\tconst [collectionModelId, setCollectionModelId] = useState('');\r\n\tconst [createdTime, setCreatedTime] = useState('');\r\n\tconst [emissionFactorNum, setEmissionFactorNum] = useState('');\r\n\tconst [hige, setHige] = useState('');\r\n\tconst [scopeType1, setScopeType1] = useState('');\r\n\tconst [edit, setEdit] = useState('');\r\n\tconst [currentUnit,setCurrentUnit] = useState('');\r\n\tconst [systemName,setSystemName] = useState('');\r\n\tconst [deviceName,setDeviceName] = useState('');\r\n\tconst [myForm] = Form.useForm()\r\n\tuseEffect(() =>{\r\n\t\tgetnodeList()\r\n\t},[])\r\n\tconst handlepoint =(val) =>{\r\n\t\tconsole.log(val)\r\n\t\tsetScopeType(val);\r\n\t\tsetScopeType1(val)\r\n\t}\r\n\tuseEffect(() =>{\r\n\t\tif(currentUnit!==''){\r\n\t\t\t\r\n\t\t\tgetCollectionModelList()\r\n\t\t\tnodeSystemList()\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t},[currentUnit])\r\n\t// 获取节点列表\r\n\tconst getnodeList =() =>{\r\n\t\t// http.post('carbon/collectionModel/nodeList',{\r\n\t\thttp.post('system_management/node_model/nodeNameList').then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tsetNodeList(res.data.data);\r\n\t\t\t\tsetNodeId(res.data.data.length>0?res.data.data[0].id:'');\r\n\t\t\t\tsetCurrentUnit(res.data.data.length>0?res.data.data[0].id:'');\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tModal.error({\r\n\t\t\t\t\ttitle:'错误'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 获取采集模型列表\r\n\tconst getCollectionModelList =() =>{\r\n\t\tsetLoading(true)\r\n\t\thttp.post('carbon/collectionModel/getCollectionModelList?nodeId='+nodeId+'&scopeType='+scopeType).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tsetContent(res.data.data.content);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 搜索\r\n\tconst search =() =>{\r\n\t\tgetCollectionModelList()\r\n\t}\r\n\t// 选择节点\r\n\tconst handleChange =(e) =>{\r\n\t\tconsole.log(e)\r\n\t\tsetNodeId(e)\r\n\t}\r\n\t// 编辑\r\n\tconst editbtn =(e) =>{\r\n\t\tconsole.log(e)\r\n\t\tgetAllDevice1(e.systemId)\r\n\t\tif(e.collectMode==0){\r\n\t\t\tsetIsModalVisible(true);\r\n\t\t\tsetCollectionModelId(e.collectionModelId);\r\n\t\t\tsetEmissionFactorNum(e.emissionFactorNum);\r\n\t\t\tsetScopeType1(e.scopeType);\r\n\t\t\tsetDataPointName(e.dataPointName);\r\n\t\t\tsetHige(e.collectMode);\r\n\t\t\tsetEdit(0);\r\n\t\t\tmyForm.setFieldsValue({\r\n\t\t\t\temissionFactorName:e.emissionFactorName,\r\n\t\t\t\tcollectMode:e.collectMode,\r\n\t\t\t\tsystemId:e.systemId,\r\n\t\t\t\tdeviceId:e.deviceId,\r\n\t\t\t\tdataPointId:e.dataPointId,\r\n\t\t\t})\r\n\t\t}else if(e.collectMode==1){\r\n\t\t\tsetIsModalVisible(true);\r\n\t\t\tsetCollectionModelId(e.collectionModelId);\r\n\t\t\tsetEmissionFactorNum(e.emissionFactorNum);\r\n\t\t\tsetScopeType1(e.scopeType);\r\n\t\t\tsetDataPointName(null);\r\n\t\t\tsetHige(e.collectMode);\r\n\t\t\tsetEdit(0);\r\n\t\t\tmyForm.setFieldsValue({\r\n\t\t\t\temissionFactorName:e.emissionFactorName,\r\n\t\t\t\tcollectMode:e.collectMode,\r\n\t\t\t\tsystemId:null,\r\n\t\t\t\tdeviceId:null,\r\n\t\t\t\tdataPointId:null,\r\n\t\t\t})\r\n\t\t}else if(e.collectMode===null){\r\n\t\t\tsetIsModalVisible(true);\r\n\t\t\tsetCollectionModelId(e.collectionModelId);\r\n\t\t\tsetEmissionFactorNum(e.emissionFactorNum);\r\n\t\t\tsetScopeType1(e.scopeType);\r\n\t\t\tsetDataPointName(null);\r\n\t\t\tsetHige(e.collectMode);\r\n\t\t\tsetEdit(0);\r\n\t\t\tmyForm.setFieldsValue({\r\n\t\t\t\temissionFactorName:e.emissionFactorName,\r\n\t\t\t\tcollectMode:e.collectMode,\r\n\t\t\t\tsystemId:null,\r\n\t\t\t\tdeviceId:null,\r\n\t\t\t\tdataPointId:null,\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t// 根据节点获取系统列表\r\n\tconst nodeSystemList =() =>{\r\n\t\thttp.post('carbon/collectionModel/nodeSystemList?nodeId='+nodeId).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tsetSystemList(res.data.data)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 根据节点和系统获取设备列表及点位\r\n\tconst getAllDevice =() =>{\r\n\t\thttp.post('carbon/collectionModel/getAllDevice?nodeId='+nodeId+'&systemId='+systemId).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tsetDeviceList(res.data.data)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 根据节点和系统获取设备列表及点位\r\n\tconst getAllDevice1=(e) =>{\r\n\t\tconsole.log(e)\r\n\t\thttp.post('carbon/collectionModel/getAllDevice?nodeId='+nodeId+'&systemId='+e).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tlet deviceList = res.data.data\r\n\t\t\t\tconsole.log(deviceList,'deviceList')\r\n\t\t\t\tfor(var i=0;i<deviceList.length;i++){\r\n\t\t\t\t\t// console.log(deviceList[i].pointViewList)\r\n\t\t\t\t\tif(deviceList[i].systemId==e){\r\n\t\t\t\t\t\tsetPointViewList(deviceList[i].pointViewList)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetDeviceList(res.data.data)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 选择系统\r\n\tconst chosenode =(val,e) =>{\r\n\t\tsetSystemId(val);\r\n\t\tsetSystemName(e.children);\r\n\t\tgetAllDevice()\r\n\t\tmyForm.setFieldsValue({\r\n\t\t\tdeviceId:null,\r\n\t\t\tdataPointId:null,\r\n\t\t})\r\n\t}\r\n\t// 选择设备\r\n\tconst choseSystem =(val,e) =>{\r\n\t\tconsole.log(val,e)\r\n\t\tsetDeviceName(e.children);\r\n\t\tmyForm.setFieldsValue({\r\n\t\t\tdataPointId:null,\r\n\t\t})\r\n\t\tfor(var i=0;i<deviceList.length;i++){\r\n\t\t\tif(deviceList[i].deviceId==val){\r\n\t\t\t\tsetPointViewList(deviceList[i].pointViewList)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 选择数据点\r\n\tconst chosepoint =(val,e) =>{\r\n\t\tsetDataPointName(e.children)\r\n\t}\r\n\t// 取消\r\n\tconst quxiao =() =>{\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\tconst del =(e) =>{\r\n\t\tconsole.log(e)\r\n\t\tconfirm({\r\n\t\t\ttitle: '提示',\r\n\t\t\ticon: <ExclamationCircleOutlined />,\r\n\t\t\tcontent: '确定要删除吗',\r\n\t\t\tcancelText:'取消',\r\n\t\t\tokText:'确定',\r\n\t\t\tcancelButtonProps: {className:'newbutton',style: { background: 'none'} }, \r\n\t\t\tonOk() {\r\n\t\t\t\tconsole.log('OK');\r\n\t\t\t\thttp.post('carbon/collectionModel/removeCollectionModel?collectionModelId='+e.collectionModelId\r\n\t\t\t\t).then(res =>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.code ==200){\r\n\t\t\t\t\t\tmessage.success(res.data.msg)\r\n\t\t\t\t\t\tgetCollectionModelList()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmessage.success(res.data.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err =>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonCancel() {\r\n\t\t\t\t\tconsole.log('Cancel');\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\t// 选择采集方式\r\n\tconst choseHigh =(e) =>{\r\n\t\tconsole.log(e)\r\n\t\tif(e==1){\r\n\t\t\tmyForm.setFieldsValue({\r\n\t\t\t\t\r\n\t\t\t\tsystemId:null,\r\n\t\t\t\tdeviceId:null,\r\n\t\t\t\tdataPointId:null,\r\n\t\t\t})\r\n\t\t\tsetDataPointName(null);\r\n\t\t\tsetDeviceName(null);\r\n\t\t\tsetSystemName(null);\r\n\t\t}\r\n\t\tsetHige(e);\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: '类型',\r\n\t\t\tdataIndex: 'emissionFactorName',\r\n\t\t\tkey: 'emissionFactorName',\r\n\t\t\t// render: (text,record,_,action) =>{\r\n\t\t\t// \treturn  text==1?'固定燃烧源的燃烧排放':text==2?'移动燃烧源的燃烧排放':text==3?'逸散型排放源的排放':''\r\n\t\t\t// \tconsole.log(text)\r\n\t\t\t// }\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '采集方式',\r\n\t\t\tdataIndex: 'collectMode',\r\n\t\t\tkey: 'collectMode',\r\n\t\t\trender: (text,record) => {\r\n\t\t\t  return  <span>\r\n\t\t\t\t\t\t{text==0 ? '自动': text==1 ?'手动':'-'}\r\n\t\t\t\t\t  </span>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '系统',\r\n\t\t\tdataIndex: 'systemName',\r\n\t\t\tkey: 'systemName',\r\n\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\tconsole.log(text)\r\n\t\t\t\tif( text==null||text==undefined||text==''){\r\n\t\t\t\t\treturn '-'\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn text\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '设备',\r\n\t\t\tdataIndex: 'deviceName',\r\n\t\t\tkey: 'deviceName',\r\n\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\tif( text==null||text==undefined||text==''){\r\n\t\t\t\t\treturn '-'\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn text\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\ttitle: '数据点',\r\n\t\t\tdataIndex: 'dataPointName',\r\n\t\t\tkey: 'dataPointName',\r\n\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\tif( text==null||text==undefined||text==''){\r\n\t\t\t\t\treturn '-'\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn text\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t  title: '操作',\r\n\t\t  dataIndex: 'dates',\r\n\t\t  key: 'dates',\r\n\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\treturn  <Space size=\"middle\">\r\n\t\t\t\t\t<a onClick={() => editbtn(record)}>编辑</a>\r\n\t\t\t\t\t<a onClick={() => del(record)}>删除</a>\r\n\t\t\t\t</Space>\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\tconst handleOk = () => {\r\n\t\r\n\t};\r\n\t\r\n\tconst handleCancel = () => {\r\n\t\tconsole.log('Clicked cancel button');\r\n\t\tsetIsModalVisible(false);\r\n\t\tmyForm.resetFields()\r\n\t};\r\n\tconst onFinish = (values) => {\r\n\t\tconsole.log('Success:', values);\r\n\t\thttp.post('carbon/collectionModel/editCollectionModel',{\r\n\t\t\t\"collectMode\": values.collectMode,\t\t\t//采集方式\r\n\t\t\t\"collectionModelId\": collectionModelId,\t\t//采集模型ID\r\n\t\t\t\"createdTime\": createdTime,\t//创建时间\r\n\t\t\t\"dataPointId\": values.dataPointId,\t//数据点ID\r\n\t\t\t\"dataPointName\": dataPointName,\t//数据点名称\r\n\t\t\t\"deviceId\": values.deviceId,\t//\t设备ID\r\n\t\t\t\"deviceName\":deviceName,\t//设备名\r\n\t\t\t\"emissionFactorName\": values.emissionFactorName,\t//排放因子名称\r\n\t\t\t\"emissionFactorNum\":emissionFactorNum,\t\t//排放因子编号\r\n\t\t\t\"nodeId\": nodeId,\t//楼宇节点id\r\n\t\t\t\"scopeType\": scopeType1,\t//范围\r\n\t\t\t\"sstatus\": '',\r\n\t\t\t\"systemId\": values.systemId,\t//系统ID\r\n\t\t\t\"systemName\": systemName,\t//系统名\r\n\t\t\t\"updateTime\": \"\"\r\n\t\t}).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\t\t\t\t\r\n\t\t\t\tsetIsModalVisible(false);\r\n\t\t\t\tmyForm.resetFields()\r\n\t\t\t\tmessage.success('编辑成功')\r\n\t\t\t\tgetCollectionModelList()\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\tconst onFinishFailed = (errorInfo) => {\r\n\t\tconsole.log('Failed:', errorInfo);\r\n\t};\r\n\treturn(\r\n\t\t<div className=\"allcontent1\">\r\n\t\t\t<div className=\"header\">\r\n\t\t\t\t节点：\r\n\t\t\t\t<Select\r\n\t\t\t\t\tplaceholder=\"节点\"\r\n\t\t\t\t\tstyle={{width:217}}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tdefaultValue={currentUnit}\r\n\t\t\t\t\tkey={currentUnit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnodeList&&nodeList.map(res =>{\r\n\t\t\t\t\t\t\treturn <Option value={res.id}>{res.nodeName}</Option>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</Select>\r\n\t\t\t\t范围：\r\n\t\t\t\t<Select\r\n\t\t\t\t\tdefaultValue=\"\"\r\n\t\t\t\t\tstyle={{ width: 217 }}\r\n\t\t\t\t\tonChange={handlepoint}\r\n\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\t\tlabel: '全部',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue: '1',\r\n\t\t\t\t\t\t\tlabel: '范围一',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue: '2',\r\n\t\t\t\t\t\t\tlabel: '范围二',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue: '3',\r\n\t\t\t\t\t\t\tlabel: '范围三',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}\r\n\t\t\t\t/>\r\n\t\t\t\t<Button type=\"primary\" onClick={search}>查询</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mechanism\">\r\n\t\t\t\t<Table dataSource={content} columns={columns} loading={loading}\r\n\t\t\t\t // onChange={onChangetab}\r\n\t\t\t\t pagination={\r\n\t\t\t\t\t{\r\n\t\t\t\t\t  // total: this.state.total,//数据的总条数\r\n\t\t\t\t\t  defaultCurrent: 1,//默认当前的页数\r\n\t\t\t\t\t  defaultPageSize: 10,//默认每页的条数\r\n\t\t\t\t\t  showSizeChanger:false,\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t }\r\n\t\t\t\t />\r\n\t\t\t</div>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='编辑'\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\t// confirmLoading={confirmLoading}\r\n\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\tfooter={null}\r\n\t\t\t>\r\n\t\t\t\t<Form\r\n\t\t\t\t\tname=\"basic\"\r\n\t\t\t\t\tlabelCol={{ span: 6 }}\r\n\t\t\t\t\twrapperCol={{ span: 16 }}\r\n\t\t\t\t\tinitialValues={{ remember: true }}\r\n\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\tonFinishFailed={onFinishFailed}\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tform={myForm}\r\n\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t<Form.Item label=\"类型\" name=\"emissionFactorName\" >\r\n\t\t\t\t\t\t\t<Input disabled={true} />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"采集方式\"\r\n\t\t\t\t\t\tname=\"collectMode\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"采集方式\"\r\n\t\t\t\t\t\t\tonChange={choseHigh}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Option value={0}>自动</Option>\r\n\t\t\t\t\t\t\t<Option value={1}>手动</Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"系统\"\r\n\t\t\t\t\t\tname=\"systemId\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"系统\"\r\n\t\t\t\t\t\t\tonChange={chosenode}\r\n\t\t\t\t\t\t\tdisabled={hige==1?true:false}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsystemList.length&&systemList.map(res =>{\r\n\t\t\t\t\t\t\t\t\treturn <Option value={res.id}>{res.systemName}</Option>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"设备\"\r\n\t\t\t\t\t\tname=\"deviceId\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"设备\"\r\n\t\t\t\t\t\t\tonChange={choseSystem}\r\n\t\t\t\t\t\t\tdisabled={hige==1?true:false}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdeviceList.length&&deviceList.map(res =>{\r\n\t\t\t\t\t\t\t\t\treturn <Option value={res.deviceId}>{res.deviceName}</Option>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"数据点\"\r\n\t\t\t\t\t\tname=\"dataPointId\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"数据点\"\r\n\t\t\t\t\t\t\tonChange={chosepoint}\r\n\t\t\t\t\t\t\tdisabled={hige==1?true:false}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpointViewList.length&&pointViewList.map(res =>{\r\n\t\t\t\t\t\t\t\t\treturn <Option value={res.pointId}>{res.pointName}</Option>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\r\n\t\t\t\t\t\t  确定\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button onClick={quxiao} style={{marginLeft:'10px'}}>\r\n\t\t\t\t\t\t  取消\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\t\r\n\r\n\r\nexport default Pattern"],"names":["Option","Select","confirm","Modal","useState","loading","setLoading","nodeList","setNodeList","nodeId","setNodeId","scopeType","setScopeType","content","setContent","isModalVisible","setIsModalVisible","systemList","setSystemList","systemId","setSystemId","deviceList","setDeviceList","pointViewList","setPointViewList","dataPointName","setDataPointName","collectionModelId","setCollectionModelId","createdTime","emissionFactorNum","setEmissionFactorNum","hige","setHige","scopeType1","setScopeType1","setEdit","currentUnit","setCurrentUnit","systemName","setSystemName","deviceName","setDeviceName","Form","myForm","useEffect","getnodeList","getCollectionModelList","nodeSystemList","http","then","res","console","log","data","code","length","id","title","catch","err","getAllDevice1","e","i","columns","dataIndex","key","render","text","record","_","action","undefined","size","onClick","collectMode","setFieldsValue","emissionFactorName","deviceId","dataPointId","icon","ExclamationCircleOutlined","cancelText","okText","cancelButtonProps","className","style","background","onOk","message","msg","onCancel","placeholder","width","onChange","defaultValue","map","value","nodeName","val","options","label","type","dataSource","pagination","defaultCurrent","defaultPageSize","showSizeChanger","visible","resetFields","footer","name","labelCol","span","wrapperCol","initialValues","remember","onFinish","values","onFinishFailed","errorInfo","autoComplete","form","disabled","children","pointId","pointName","offset","htmlType","marginLeft"],"sourceRoot":""}
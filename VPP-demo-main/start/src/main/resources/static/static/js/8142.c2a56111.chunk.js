"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[8142],{98142:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var n=s(29439),a=s(72791),o=s(61855),l=s(58768),c=s(93070),i=s(13832),m=s(31773),u=s(2556),d=s(78347),r=s(35796),y=s(79286),f=s(5122),Z=s(80184),h=o.Z.Search,g=l.Z.confirm,p=function(){var e=(0,a.useState)(!1),t=(0,n.Z)(e,2),s=(t[0],t[1],(0,a.useState)([])),p=(0,n.Z)(s,2),S=p[0],x=p[1],j=(0,a.useState)(!1),k=(0,n.Z)(j,2),C=k[0],_=k[1],b=(0,a.useState)(0),w=(0,n.Z)(b,2),P=w[0],v=w[1],N=(0,a.useState)(""),z=(0,n.Z)(N,2),K=(z[0],z[1],(0,a.useState)("")),E=(0,n.Z)(K,2),F=(E[0],E[1],(0,a.useState)("")),L=(0,n.Z)(F,2),T=(L[0],L[1],(0,a.useState)("")),B=(0,n.Z)(T,2),O=(B[0],B[1],(0,a.useState)("")),A=(0,n.Z)(O,2),I=A[0],R=A[1],q=(0,a.useState)(!1),V=(0,n.Z)(q,2),Y=V[0],$=V[1],D=(0,a.useState)(""),G=(0,n.Z)(D,2),H=G[0],J=G[1],M=(0,a.useState)(1),Q=(0,n.Z)(M,2),U=(Q[0],Q[1]),W=(0,a.useState)(1),X=(0,n.Z)(W,2),ee=X[0],te=X[1],se=(0,a.useState)(0),ne=(0,n.Z)(se,2),ae=ne[0],oe=ne[1],le=(0,a.useState)(""),ce=(0,n.Z)(le,2),ie=ce[0],me=ce[1],ue=(0,a.useState)(1),de=(0,n.Z)(ue,2),re=de[0],ye=de[1],fe=(0,a.useState)(!1),Ze=(0,n.Z)(fe,2),he=Ze[0],ge=Ze[1],pe=c.Z.useForm(),Se=(0,n.Z)(pe,1)[0],xe=(0,a.useState)(null),je=(0,n.Z)(xe,2),ke=je[0],Ce=je[1];(0,a.useEffect)((function(){0==C&&Se.resetFields()}),[C]),(0,a.useEffect)((function(){Y&&I&&be()}),[Y,I]),(0,a.useEffect)((function(){Y||_e()}),[ee,re]),(0,a.useEffect)((function(){ke&&_e()}),[ke]);var _e=function(){$(!0),f.Z.post("system_management/system_model/queryAllSystemListPageable?number="+ee+"&pageSize=10").then((function(e){200==e.data.code&&(console.log(e),x(e.data.data.content),$(!1),me(e.data.data.totalElements))}))},be=function(){f.Z.post("system_management/system_model/systemListBySystemName?systemName="+I).then((function(e){console.log(e),200==e.data.code?(console.log(e),x(e.data.data),$(!1),me(e.data.data.length)):($(!1),i.ZP.info(e.data.msg))})).catch((function(e){console.log(e)}))},we=function(){Se.validateFields().then((function(e){console.log(e);var t=[];e.system&&(t.push(e.system),R(t)),e.names&&(e.names.push(e.system),R(e.names)),ge(!0),0==P?f.Z.post("system_management/system_model/addSystemList",{systemName:I}).then((function(e){200==e.data.code?(_(!1),ge(!1),_e(),i.ZP.success("\u65b0\u5efa\u6210\u529f"),Se.resetFields()):(ge(!1),i.ZP.info(e.data.msg))})):2==P&&f.Z.post("system_management/system_model/updateSystemList",{newSystemName:e.system,systemKey:H}).then((function(e){200==e.data.code?(_(!1),ge(!1),i.ZP.success("\u7f16\u8f91\u6210\u529f"),ge(!1),Se.resetFields(),_e()):(ge(!1),i.ZP.info(e.data.msg))}))}))},Pe=function(){_(!1)},ve=[{title:"\u5e8f\u53f7",width:"10%",render:function(e,t,s){return 5*(ee-1)+s+1}},{title:"\u7cfb\u7edf\u540d\u79f0",dataIndex:"systemName",key:"systemName"},{title:"\u64cd\u4f5c",key:"operation",width:150,render:function(e,t,s){return"Y"==t.configType?(0,Z.jsxs)(m.Z,{size:"middle",children:[(0,Z.jsx)("a",{style:{display:"none"},disabled:!0,children:"\u7f16\u8f91"}),(0,Z.jsx)("a",{style:{display:"none"},disabled:!0,children:"\u5220\u9664"})]}):(0,Z.jsxs)(m.Z,{size:"middle",children:[(0,Z.jsx)("a",{onClick:function(){return e=t,console.log(e),v(2),_(!0),J(e.systemKey),U(1),oe(1),void Se.setFieldsValue({system:e.systemName});var e},children:"\u7f16\u8f91"}),(0,Z.jsx)("a",{onClick:function(){return e=t,console.log(e),void g({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",icon:(0,Z.jsx)(r.Z,{}),cancelButtonProps:{className:"newbutton",style:{background:"none"}},onOk:function(){console.log("OK");var t=e.systemKey;f.Z.post("system_management/system_model/deleteSystem?systemKey="+t).then((function(e){200==e.data.code?(_(!1),te(1),ye(1),_e(),i.ZP.success("\u5220\u9664\u6210\u529f")):i.ZP.info(e.data.msg)}))},onCancel:function(){console.log("Cancel")}});var e},children:"\u5220\u9664"})]})}}];return(0,Z.jsxs)("div",{className:"allcontent12 systematics",children:[(0,Z.jsxs)("div",{className:"systemstem",children:[(0,Z.jsxs)(u.ZP,{type:"primary",onClick:function(){_(!0),v(0),U(0),oe(0)},children:[(0,Z.jsx)(y.Z,{}),"\u65b0\u5efa\u7cfb\u7edf"]}),(0,Z.jsx)(h,{placeholder:"\u641c\u7d22\u7cfb\u7edf\u540d\u79f0",onSearch:function(e){console.log(e),R(e),""==e?Ce(!0):($(!0),te(1),ye(1),Ce(!1))},style:{width:200,float:"right"}})]}),(0,Z.jsx)(d.Z,{columns:ve,dataSource:S,rowKey:function(e){return e.systemKey},loading:Y,pagination:{total:ie,defaultCurrent:1,defaultPageSize:10,showSizeChanger:!1,onChange:function(e){console.log(e),te(e),ye(e)},current:re}}),(0,Z.jsx)(l.Z,{title:0==ae?"\u65b0\u5efa\u7cfb\u7edf":"\u7f16\u8f91",width:600,visible:C,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",forceRender:!0,onOk:we,onCancel:Pe,maskClosable:!1,confirmLoading:he,footer:[(0,Z.jsx)(u.ZP,{ghost:!0,onClick:Pe,children:"\u53d6\u6d88"}),(0,Z.jsx)(u.ZP,{type:"primary",onClick:we,children:"\u786e\u5b9a"},"submit")],wrapClassName:"newzf",cancelButtonProps:{background:"none"},children:(0,Z.jsx)(c.Z,{name:"dynamic_form_item",form:Se,labelCol:{span:3},wrapperCol:{span:21},children:(0,Z.jsx)(c.Z.Item,{name:"system",label:"\u7cfb\u7edf\u540d\u79f0",rules:[{pattern:new RegExp(/^[a-zA-Z0-9_\u4e00-\u9fa5]{0,12}$/),message:"\u8bf7\u8f93\u51656\uff5e12\u4e2a\u6c49\u5b57\u3001\u5b57\u6bcd\u6216\u6570\u5b57\u3001_"}],children:(0,Z.jsx)(o.Z,{maxLength:50,placeholder:"\u8bf7\u8f93\u5165\u7cfb\u7edf"})})})})]})}}}]);
//# sourceMappingURL=8142.c2a56111.chunk.js.map
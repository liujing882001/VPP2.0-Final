{"version":3,"file":"static/js/6627.309c6509.chunk.js","mappings":"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","sources":["views/respond/Detection/detail.js"],"sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport { Link ,useHistory } from \"react-router-dom\"\r\nimport { Select, Space,Table,Button,Input,message } from 'antd';\r\nimport './index.css'\r\nimport './detail.scss'\r\nimport http from '../../../server/server.js'\r\nconst Detail =(props) =>{\r\n\tconst [respId, setRespId] = useState('');\r\n\tconst [deviceName, setDeviceName] = useState('');\r\n\tconst [deviceRatedPowerSort, setDeviceRatedPowerSort] = useState(1);\r\n\tconst [deviceStatusSort, setDeviceStatusSort] = useState('');\r\n\tconst [strategyId, setStrategyId] = useState('');\r\n\tconst [taskCode, setTaskCode] = useState('');\r\n\tconst [respType, setRespType] = useState('');\r\n\tconst [respLevel, setRespLevel] = useState('');\r\n\tconst [respSubsidy, setRespSubsidy] = useState('');\r\n\tconst [rsDate,setRsDate] = useState('');\r\n\tconst [loading,setLoading] =  useState(false);\r\n\tconst [dataSource,setDataSource] = useState([]);\r\n\tconst [total,setTotal] = useState('');\r\n\tconst [page,setPage] = useState(1);\r\n\tconst [rsTimeSort,setRsTimeSort] = useState(1);\r\n\tconst [feedbackTimeSort,setFeedbackTimeSort] = useState('');\r\n\tconst history = useHistory()\r\n\tuseEffect(() =>{\r\n\t\tif(props.location.query){\r\n\t\t\t// 编辑\r\n\t\t\tconst location = props.location.query\r\n\t\t\tconsole.log(location)\r\n\t\t\tsetRespId(location.respId);\r\n\t\t\tsetTaskCode(location.taskCode);\r\n\t\t\tsetRsDate(location.rsDate+' '+location.rsTime+'~'+location.reTime);\r\n\t\t\tsetRespType(location.respType==1?'削峰响应':'填谷响应');\r\n\t\t\tsetRespLevel(location.respLevel==1?'日前响应':location.respLevel==2?'小时响应':location.respLevel==3?'分钟响应':'秒级响应');\r\n\t\t\tsetRespSubsidy(location.respSubsidy)\r\n\t\t}else{\r\n\t\t\thistory.push('/Detection')\r\n\t\t}\r\n\t},[])\r\n\tuseEffect(() =>{\r\n\t\tif(respId){\r\n\t\t\tgetDeviceListByRespId()\r\n\t\t}\r\n\t\t\r\n\t},[respId,taskCode,respType,respLevel,respSubsidy,page,feedbackTimeSort,])\r\n\t// 获取详情列表\r\n\tconst getDeviceListByRespId =() =>{\r\n\t\tsetLoading(true)\r\n\t\thttp.post('demand_resp/resp_monitor/getDeviceListByRespId',{\r\n\t\t\t\"deviceName\": deviceName,\r\n\t\t\t\"deviceRatedPowerSort\": deviceRatedPowerSort,\r\n\t\t\t\"deviceStatusSort\": deviceStatusSort,\r\n\t\t\t\"number\": page,\r\n\t\t\t\"pageSize\": 10,\r\n\t\t\t\"respId\": respId,\r\n\t\t\t\"sid\": \"\",\r\n\t\t\t\"strategyId\": strategyId\r\n\t\t}).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tif(res.data.data){\r\n\t\t\t\t\tsetDataSource(res.data.data.content);\r\n\t\t\t\t\tsetTotal(res.data.data.totalElements)\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetDataSource(res.data.data)\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\t\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tmessage.info(res.data.msg)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t\r\n\r\n\t\tconst columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '序号',\r\n\t\t\t\tdataIndex: 'number',\r\n\t\t\t\tkey: 'number',\r\n\t\t\t\trender:(value, item, index) => (page - 1) * 10 + index+1,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '节点',\r\n\t\t\t\tdataIndex: 'nodeName',\r\n\t\t\t\tkey: 'nodeName',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '户号',\r\n\t\t\t\tdataIndex: 'noHouseholds',\r\n\t\t\t\tkey: 'noHouseholds',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '申报负荷(kW)',\r\n\t\t\t\tdataIndex: 'declareLoad',\r\n\t\t\t\tkey: 'declareLoad',\r\n\t\t\t\trender:(value, item, index) =>{\r\n\t\t\t\t\tif(value==null||value==undefined||value===\"\"||value=='-'){\r\n\t\t\t\t\t\treturn '-'\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn Number(value).toFixed(2)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t// sorter: true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '基线负荷(kW)',\r\n\t\t\t\tdataIndex: 'baseLoad',\r\n\t\t\t\tkey: 'baseLoad',\r\n\t\t\t\trender:(value, item, index) =>{\r\n\t\t\t\t\tif(value==null||value==undefined||value===\"\"||value=='-'){\r\n\t\t\t\t\t\treturn '-'\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn Number(value).toFixed(2)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '实时负荷(kW)',\r\n\t\t\t\tdataIndex: 'nowLoad',\r\n\t\t\t\tkey: 'nowLoad',\r\n\t\t\t\trender:(value, item, index) =>{\r\n\t\t\t\t\tif(value==null||value==undefined||value===\"\"||value=='-'){\r\n\t\t\t\t\t\treturn '-'\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn Number(value).toFixed(2)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t// sorter: true,\r\n\t\t\t},\r\n\t\t\t// {\r\n\t\t\t// \ttitle: '实时响应负荷(kW)',\r\n\t\t\t// \tdataIndex: 'realTimeLoad',\r\n\t\t\t// \tkey: 'realTimeLoad',\r\n\t\t\t// \t// sorter: true,\r\n\t\t\t// },\r\n\t\t\t{\r\n\t\t\t\ttitle: '状态',\r\n\t\t\t\tdataIndex: 'drsStatus',\r\n\t\t\t\tkey: 'drsStatus',\r\n\t\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\t\treturn text==11?<span>未申报</span>:text==12?<span>执行中未申报</span>:text==15?<span>已结束未申报</span>:text==21?<span>待出清已申报</span>:text==22?<span>出清成功已申报</span>:\r\n\t\t\t\t\ttext== 23?<span>出清失败已申报</span>:text==24?<span>执行中已申报</span>:text==25?<span>已结束已申报</span>:''\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst handlePagination =(page) =>{\r\n\t\t\tconsole.log(page)\r\n\t\t\t\r\n\t\t\tsetPage(page);\r\n\t\t\t// getDeviceListByRespId()\r\n\t\t}\r\n\t\t// \r\n\t\tconst onChangetab = (pagination, filters, sorter) => {\r\n\t\t\tconsole.log(sorter)\r\n\t\t\tif (sorter.order) {\r\n\t\t\t\tif(sorter.columnKey=='declareLoad'){\r\n\t\t\t\t\tif (sorter.order) {\r\n\t\t\t\t\t\t//当前处于升序或者降序 sorter.order == \"descend\" ? '降序' : '升序'\r\n\t\t\t\t\t\tif(sorter.order == \"ascend\"){\r\n\t\t\t\t\t\t\t// 升序\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetRsTimeSort(1);\r\n\t\t\t\t\t\t\tsetFeedbackTimeSort('');\r\n\t\t\t\t\t\t\tgetDeviceListByRespId()\r\n\t\t\t\t\t\t}else if(sorter.order == \"descend\"){\r\n\t\t\t\t\t\t\t// 降序\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetRsTimeSort(2);\r\n\t\t\t\t\t\t\tsetFeedbackTimeSort('');\r\n\t\t\t\t\t\t\tgetDeviceListByRespId()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(sorter.columnKey=='feedbackTime'){\r\n\t\t\t\t\t// 反馈截止排序\r\n\t\t\t\t\tif (sorter.order) {\r\n\t\t\t\t\t\t//当前处于升序或者降序 sorter.order == \"descend\" ? '降序' : '升序'\r\n\t\t\t\t\t\tif(sorter.order == \"ascend\"){\r\n\t\t\t\t\t\t\t// 升序\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetRsTimeSort('');\r\n\t\t\t\t\t\t\tsetFeedbackTimeSort(1);\r\n\t\t\t\t\t\t\tgetDeviceListByRespId()\r\n\t\t\t\t\t\t}else if(sorter.order == \"descend\"){\r\n\t\t\t\t\t\t\t// 降序\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetRsTimeSort('');\r\n\t\t\t\t\t\t\tsetFeedbackTimeSort(2);\r\n\t\t\t\t\t\t\tgetDeviceListByRespId()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"detail\">\r\n\t\t\t\t<div className=\"header\">\r\n\t\t\t\t\t<Link to='/Detection'><a href=\"#\"><img src={require('../../../style/xu/return.png')} />返回</a></Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"detailbody\">\r\n\t\t\t\t\t<h4>任务编码：{taskCode}</h4>\r\n\t\t\t\t\t<ul className=\"detailul\">\r\n\t\t\t\t\t\t<li>响应时段：{rsDate}</li>\r\n\t\t\t\t\t\t<li>响应类型：{respType}</li>\r\n\t\t\t\t\t\t<li>响应级别：{respLevel}</li>\r\n\t\t\t\t\t\t<li>响应补贴(元/kWh)：{respSubsidy}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<Table dataSource={dataSource} columns={columns} loading={loading}\r\n\t\t\t\t\t\tonChange={(pagination, filters, sorter) => { onChangetab(pagination, filters, sorter) }}\r\n\t\t\t\t\t\tpagination={\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttotal: total,//数据的总条数\r\n\t\t\t\t\t\t\t\tdefaultCurrent: 1,//默认当前的页数\r\n\t\t\t\t\t\t\t\tdefaultPageSize: 10,//默认每页的条数\r\n\t\t\t\t\t\t\t\tshowSizeChanger:false,\r\n\t\t\t\t\t\t\t\t// onChange: handlePagination,\r\n\t\t\t\t\t\t\t\tshowQuickJumper:true,\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tonChange: (page) =>handlePagination(page),\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\r\nexport default Detail"],"names":["props","useState","respId","setRespId","deviceName","deviceRatedPowerSort","deviceStatusSort","strategyId","taskCode","setTaskCode","respType","setRespType","respLevel","setRespLevel","respSubsidy","setRespSubsidy","rsDate","setRsDate","loading","setLoading","dataSource","setDataSource","total","setTotal","page","setPage","setRsTimeSort","feedbackTimeSort","setFeedbackTimeSort","history","useHistory","useEffect","location","query","console","log","rsTime","reTime","push","getDeviceListByRespId","http","then","res","data","code","content","totalElements","message","msg","catch","err","columns","title","dataIndex","key","render","value","item","index","undefined","Number","toFixed","text","record","_","action","className","to","href","src","require","onChange","pagination","filters","sorter","order","columnKey","onChangetab","defaultCurrent","defaultPageSize","showSizeChanger","showQuickJumper","handlePagination"],"sourceRoot":""}
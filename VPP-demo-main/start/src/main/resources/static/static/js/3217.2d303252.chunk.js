"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3217],{43217:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s=n(29439),i=n(72791),o=n(66818),a=n(58768),c=n(93070),l=n(13832),r=n(31773),d=n(2556),u=n(78347),p=n(61855),m=n(35796),h=n(5122),g=n(80184),y=o.Z.Option,f=a.Z.confirm,x=function(){var e=(0,i.useState)(!1),t=(0,s.Z)(e,2),n=t[0],x=t[1],Z=(0,i.useState)(""),j=(0,s.Z)(Z,2),F=j[0],v=j[1],T=(0,i.useState)([]),I=(0,s.Z)(T,2),b=I[0],S=I[1],C=(0,i.useState)(0),N=(0,s.Z)(C,2),k=N[0],w=N[1],P=(0,i.useState)(""),V=(0,s.Z)(P,2),E=V[0],L=V[1],q=(0,i.useState)(""),O=(0,s.Z)(q,2),z=(O[0],O[1]),_=(0,i.useState)("\u5317\u4eac\u5e02"),R=(0,s.Z)(_,2),$=R[0],A=R[1],B=(0,i.useState)(""),K=(0,s.Z)(B,2),D=K[0],G=K[1],H=(0,i.useState)(""),J=(0,s.Z)(H,2),M=J[0],Q=J[1],U=(0,i.useState)(""),W=(0,s.Z)(U,2),X=W[0],Y=W[1],ee=(0,i.useState)(""),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],ie=(0,i.useState)(!1),oe=(0,s.Z)(ie,2),ae=oe[0],ce=oe[1],le=(0,i.useState)(""),re=(0,s.Z)(le,2),de=re[0],ue=re[1],pe=(0,i.useState)(1),me=(0,s.Z)(pe,2),he=me[0],ge=me[1],ye=(0,i.useState)(1),fe=(0,s.Z)(ye,2),xe=fe[0],Ze=fe[1],je=(0,i.useState)(!1),Fe=(0,s.Z)(je,2),ve=Fe[0],Te=Fe[1],Ie=(0,i.useState)([]),be=(0,s.Z)(Ie,2),Se=be[0],Ce=be[1],Ne=(0,i.useState)(""),ke=(0,s.Z)(Ne,2),we=(ke[0],ke[1]),Pe=c.Z.useForm(),Ve=(0,s.Z)(Pe,1)[0];(0,i.useEffect)((function(){Ee()}),[]),(0,i.useEffect)((function(){Le()}),[he,xe]);var Ee=function(){h.Z.post("system_management/sysregion_model/regionProvinces").then((function(e){if(console.log(e),200==e.data.code){var t=e.data.data,n=[];t&&t.map((function(e){n.push({label:e.regionName,value:e.regionName})})),Ce(n)}})).catch((function(e){console.log(e)}))},Le=function(){ce(!0),h.Z.post("carbon/emission/getEmissionFactorList",{number:he,pageSize:10,province:$}).then((function(e){console.log(e),200==e.data.code&&(S(e.data.data.content),v(e.data.data.totalElements),ce(!1))})).catch((function(e){}))},qe=[{title:"\u7c7b\u578b",dataIndex:"emissionFactorName",key:"emissionFactorName"},{title:"CO2\u6392\u653e\u91cf",dataIndex:"co2",key:"co2"},{title:"\u5355\u4f4d",dataIndex:"unit",key:"unit",render:function(e,t,n,s){return null==e||void 0==e?"-":e}},{title:"\u8303\u56f4",dataIndex:"scopeType",key:"scopeType",render:function(e,t,n,s){return 1==e?"\u8303\u56f4\u4e00":2==e?"\u8303\u56f4\u4e8c":3==e?"\u8303\u56f4\u4e09":"-"}},{title:"\u5907\u6ce8",dataIndex:"description",key:"description",width:200,render:function(e,t,n,s){return null==e||void 0==e?"-":e}},{title:"\u64cd\u4f5c",dataIndex:"dates",key:"dates",width:150,render:function(e,t,n,s){return(0,g.jsxs)(r.Z,{size:"middle",children:[(0,g.jsx)("a",{onClick:function(){return e=t,console.log(e),void("\u78b3\u6c47"==e.description?(w(1),x(!0),L(e.emissionFactorId),z(e.emissionFactorNum),A(e.province),G(e.sstatus),Q(e.createdTime),Y(e.updateTime),we(e.dischargeType),se(""),ue("\u78b3\u6c47"),Ve.setFieldsValue({type:e.emissionFactorName,co:e.co2,unit:e.unit,scope:"",description:e.description,Initial:e.initialValue,dischargeType:e.dischargeType})):1==e.scopeType?(w(1),x(!0),L(e.emissionFactorId),z(e.emissionFactorNum),A(e.province),G(e.sstatus),Q(e.createdTime),Y(e.updateTime),we(e.dischargeType),se(1),ue(""),Ve.setFieldsValue({type:e.emissionFactorName,co:e.co2,unit:e.unit,scope:e.scopeType,description:e.description,Initial:e.initialValue,dischargeType:e.dischargeType})):(w(1),x(!0),L(e.emissionFactorId),z(e.emissionFactorNum),A(e.province),G(e.sstatus),Q(e.createdTime),Y(e.updateTime),we(null),se(0),ue(""),Ve.setFieldsValue({type:e.emissionFactorName,co:e.co2,unit:e.unit,scope:e.scopeType,description:e.description,Initial:e.initialValue,dischargeType:null})));var e},children:"\u7f16\u8f91"}),(0,g.jsx)("a",{onClick:function(){return e=t,console.log(e),void f({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417?",icon:(0,g.jsx)(m.Z,{}),cancelButtonProps:{className:"newbutton",style:{background:"none"}},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){console.log("OK"),h.Z.post("carbon/emission/removeEmissionFactor?emissionFactorId="+e.emissionFactorId).then((function(e){console.log(e),200==e.data.code&&(l.ZP.success("\u5220\u9664\u6210\u529f"),Le())})).catch((function(e){console.log(e)}))},onCancel:function(){console.log("Cancel")}});var e},children:"\u5220\u9664"})]})}}];return(0,g.jsxs)("div",{className:"allcontent1",children:[(0,g.jsxs)("div",{className:"header",children:["\u7701\u4efd\uff1a",(0,g.jsx)(o.Z,{defaultValue:"\u5317\u4eac\u5e02",style:{width:217},onChange:function(e){A(e),ge(1),Ze(1)},options:Se}),(0,g.jsx)(d.ZP,{type:"primary",onClick:function(){Le()},children:"\u67e5\u8be2"})]}),(0,g.jsxs)("div",{className:"emission",children:[(0,g.jsxs)("div",{className:"title",children:[(0,g.jsx)("span",{children:"\u78b3\u6392\u653e\u56e0\u5b50\u5217\u8868"}),(0,g.jsx)("div",{className:"list",children:(0,g.jsx)(d.ZP,{type:"primary",onClick:function(){x(!0),w(0)},children:"\u65b0\u589e\u7c7b\u578b"})})]}),(0,g.jsx)(u.Z,{dataSource:b,columns:qe,loading:ae,onChange:function(e){console.log(e),ge(e.current),Ze(e.current)},scroll:{x:"100%"},pagination:{total:F,defaultCurrent:1,defaultPageSize:10,showSizeChanger:!1,current:xe}})]}),(0,g.jsx)(a.Z,{title:0==k?"\u65b0\u589e\u7c7b\u578b":"\u7f16\u8f91",visible:n,width:600,onCancel:function(){x(!1),Ve.resetFields()},maskClosable:!1,footer:null,children:(0,g.jsxs)(c.Z,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{remember:!0},onFinish:function(e){console.log("Success:",e);var t="";1==e.scope?"\u5929\u7136\u6c14"==e.type?t=11:"\u7164\u6c14"==e.type?t=12:"\u67f4\u6cb9"==e.type?t=13:"\u516c\u52a1\u8f66"==e.type?t=21:"\u51b7\u673a\u5236\u51b7\u5242"==e.type?t=31:"\u7a7a\u8c03\u6c1f\u5229\u6602"==e.type?t=32:"\u706d\u706b\u5668"==e.type&&(t=33):2==e.scope?"\u5916\u8d2d\u7535\u529b"==e.type?t=1:"\u5916\u8d2d\u70ed\u529b"==e.type&&(t=2):3==e.scope&&("\u5dee\u65c5-\u706b\u8f66"==e.type?t=2:"\u5dee\u65c5-\u98de\u673a"==e.type?t=1:"\u5dee\u65c5-\u79c1\u5bb6\u8f66"==e.type?t=3:"\u81ea\u6765\u6c34"==e.type?t=4:"\u7eb8\u5f20\u6d88\u8017"==e.type&&(t=5)),console.log(t),0==k?(Te(!0),h.Z.post("carbon/emission/addEmissionFactor",{co2:e.co,createdTime:"",dischargeType:1==ne?e.dischargeType:"",emissionFactorId:"",emissionFactorName:e.type,emissionFactorNum:t,initialValue:e.Initial,province:$,scopeType:e.scope,sstatus:"",unit:e.unit,updateTime:"",description:e.description}).then((function(e){console.log(e),200==e.data.code?(l.ZP.success("\u6210\u529f"),x(!1),Te(!1),Ve.resetFields(),Le()):(Te(!1),l.ZP.info(e.data.msg))})).catch((function(e){console.log(e)}))):1==k&&(Te(!0),h.Z.post("carbon/emission/editEmissionFactor",{co2:e.co,createdTime:M,dischargeType:e.dischargeType,emissionFactorId:E,emissionFactorName:e.type,emissionFactorNum:t,initialValue:e.Initial,province:$,scopeType:e.scope,sstatus:D,unit:e.unit,updateTime:X,description:e.description}).then((function(e){console.log(e),200==e.data.code?(l.ZP.success("\u7f16\u8f91\u6210\u529f"),x(!1),Te(!1),Ve.resetFields(),Le()):(Te(!1),l.ZP.info(e.data.msg))})).catch((function(e){console.log(e)})))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",form:Ve,children:[(0,g.jsx)(c.Z.Item,{label:"\u7c7b\u578b",name:"type",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7c7b\u578b"}],children:(0,g.jsx)(p.Z,{onChange:function(e){console.log(e.target.value);var t=e.target.value;"\u8349\u576a"==t||"\u6811\u6728"==t?(ue("\u78b3\u6c47"),Ve.setFieldsValue({scope:""})):ue("")}})}),(0,g.jsx)(c.Z.Item,{label:"CO2\u6392\u653e\u91cf",name:"co",rules:[{required:!0,pattern:new RegExp(/^([0-9][0-9]{0,5}(\.\d{1,9})?|1000000)$/),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}],children:(0,g.jsx)(p.Z,{maxLength:50})}),(0,g.jsx)(c.Z.Item,{label:"\u5355\u4f4d",name:"unit",children:(0,g.jsx)(p.Z,{maxLength:50})}),(0,g.jsx)(c.Z.Item,{label:"\u8303\u56f4",name:"scope",rules:[{required:"\u78b3\u6c47"!=de,message:"\u8bf7\u9009\u62e9\u8303\u56f4"}],children:(0,g.jsxs)(o.Z,{placeholder:"\u8303\u56f4",onChange:function(e){console.log(e),se(e)},disabled:"\u78b3\u6c47"==de,children:[(0,g.jsx)(y,{value:1,children:"\u8303\u56f4\u4e00"}),(0,g.jsx)(y,{value:2,children:"\u8303\u56f4\u4e8c"}),(0,g.jsx)(y,{value:3,children:"\u8303\u56f4\u4e09"})]})}),(0,g.jsx)(c.Z.Item,{label:"\u71c3\u70e7\u6392\u653e\u7c7b\u578b",name:"dischargeType",className:[1==ne?"":"className6"],style:{display:1==ne?"block":"none"},rules:[{required:1==ne||"",message:"\u8bf7\u9009\u62e9\u71c3\u70e7\u6392\u653e\u7c7b\u578b"}],children:(0,g.jsxs)(o.Z,{placeholder:"\u71c3\u70e7\u6392\u653e\u7c7b\u578b",children:[(0,g.jsx)(y,{value:1,children:"\u56fa\u5b9a\u71c3\u70e7\u6e90\u7684\u71c3\u70e7\u6392\u653e"}),(0,g.jsx)(y,{value:2,children:"\u79fb\u52a8\u71c3\u70e7\u6e90\u7684\u71c3\u70e7\u6392\u653e"}),(0,g.jsx)(y,{value:3,children:"\u9038\u6563\u578b\u6392\u653e\u6e90\u7684\u6392\u653e"})]})}),(0,g.jsx)(c.Z.Item,{label:"\u5907\u6ce8",name:"description",rules:[{pattern:new RegExp(/^[\S]{0,50}$/),message:"\u8bf7\u8f93\u51650-50\u4e2a\u4ee5\u5185\u7684\u5b57\u7b26"}],children:(0,g.jsx)(p.Z,{maxLength:50})}),(0,g.jsx)(c.Z.Item,{label:"\u521d\u59cb\u503c",name:"Initial",rules:[{required:!0,pattern:new RegExp(/^(([1-9][0-9]{0,5})|0|1000000)$/),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u8303\u56f4\u5185\u7684\u6574\u6570"}],children:(0,g.jsx)(p.Z,{maxLength:50})}),(0,g.jsxs)(c.Z.Item,{wrapperCol:{offset:8,span:16},style:{textAlign:"right"},children:[(0,g.jsx)(d.ZP,{ghost:!0,onClick:function(){x(!1),Ve.resetFields()},children:"\u53d6\u6d88"}),(0,g.jsx)(d.ZP,{style:{marginLeft:"10px"},loading:ve,type:"primary",htmlType:"submit",children:"\u786e\u5b9a"})]})]})})]})}}}]);
//# sourceMappingURL=3217.2d303252.chunk.js.map
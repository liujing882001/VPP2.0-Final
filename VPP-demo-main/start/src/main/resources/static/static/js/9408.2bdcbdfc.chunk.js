"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[9408],{9408:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=a(4942),i=a(15671),n=a(43144),o=a(60136),r=a(27277),l=a(72791),d=a(66818),c=a(45959),h=a(66550),u=(a(97892),a(5122)),x=a(80184),m=(d.Z.Option,function(e){(0,o.Z)(l,e);var t=(0,r.Z)(l);function l(e){var a,n;return(0,i.Z)(this,l),(n=t.call(this,e)).handleChange=function(e){console.log(e),n.setState({nodeid:e[e.length-1]},(function(){n.storageEnergyListNow(),n.loadListByNow(),n.storageEnergyListChart(),n.photovoltaicListNow()}))},n.onChange=function(e){},n.state=(a={current:0,currentState:0,nodeNameList:[],nodeid:"",year:"",alarmNumber:"",soc:"",soh:"",storageCapacity:"",storageLoad:"",urgent:"",ciyao:"",tishi:"",zhongyao:"",inEnergy:"",outEnergy:"",yearMonth:"",yearMonthday:"",xdata:[],x_in:[],x_out:[],gurgent:"",gciyao:"",gtishi:"",gzhongyao:"",galarmNumber:"",pvLoad:"",AccumulatedStartupTime:"",energy:"",pvCapacity:""},(0,s.Z)(a,"pvLoad",""),(0,s.Z)(a,"load",""),(0,s.Z)(a,"totalLoad",""),(0,s.Z)(a,"alarmRatio",[]),(0,s.Z)(a,"loadRatio",[]),(0,s.Z)(a,"falarmNumber",""),(0,s.Z)(a,"loading",!0),(0,s.Z)(a,"options",[]),a),n}return(0,n.Z)(l,[{key:"componentDidMount",value:function(){this.tabFn(1),this.element(),this.house(),this.factory(),this.nodeTree()}},{key:"nodeTree",value:function(){var e=this;u.Z.post("tree/nodeTree").then((function(t){if(console.log(t),200==t.data.code){var a=t.data.data;!function e(t){for(var a in t)t[a].label=t[a].title,t[a].value=t[a].id,t[a].children&&(e(t[a].children))}(a),console.log(a),e.setState({options:a},(function(){}))}})).catch((function(e){console.log(e)}))}},{key:"nodeNameList",value:function(){var e=this;u.Z.post("system_management/node_model/nodeNameList").then((function(t){console.log(t),200==t.data.code&&e.setState({nodeNameList:t.data.data,loading:!1})})).catch((function(e){console.log(e)}))}},{key:"tabFn",value:function(e){console.log(e),this.setState({current:e,dateType:e})}},{key:"clsFn",value:function(e,t,a){return this.state.current===e?t:a}},{key:"storageEnergyListNow",value:function(){var e=this;u.Z.post("runSchedule/runManagement/storageEnergyListNow?nodeId="+this.state.nodeid).then((function(t){if(console.log(t),200==t.data.code){var a=t.data.data;console.log(Number(undefined)),e.setState({alarmNumber:a.alarmNumber,soc:null===a.soc||void 0===a.soc?"":(100*Number(a.soc)).toFixed(2),soh:null===a.soh||void 0===a.soh?"":(100*Number(a.soh)).toFixed(2),storageCapacity:null===a.storageCapacity||void 0===a.storageCapacity?"":Number(a.storageCapacity).toFixed(2),storageLoad:null===a.storageLoad||void 0===a.storageLoad?"":Number(a.storageLoad).toFixed(2),urgent:a.\u7d27\u6025,ciyao:a.\u6b21\u8981,tishi:a.\u63d0\u793a,zhongyao:a.\u91cd\u8981,inEnergy:a.inEnergy,outEnergy:a.outEnergy})}})).catch((function(e){console.log(e)}))}},{key:"loadListByNow",value:function(){var e=this;u.Z.post("runSchedule/runManagement/loadListByNow?nodeId="+this.state.nodeid).then((function(t){console.log(t);var a=t.data.data,s=JSON.parse(a.loadRatio),i=[];for(var n in s){var o={};o.name=n,o.value=s[n],i.push(o)}console.log(i),e.setState({totalLoad:a.totalLoad,load:a.load,falarmNumber:a.alarmNumber,alarmRatio:JSON.parse(a.alarmRatio),loadRatio:i},(function(){e.factory(),e.house()}))})).catch((function(e){console.log(e)}))}},{key:"storageEnergyListChart",value:function(){var e=this;u.Z.post("runSchedule/runManagement/storageEnergyListChart?nodeId="+this.state.nodeid).then((function(t){console.log(t);t.data.data;if(200==t.data.code){var a=t.data.data;e.setState({xdata:a.y,x_in:a.x_in,x_out:a.x_out},(function(){e.element()}))}})).catch((function(e){console.log(e)}))}},{key:"photovoltaicListNow",value:function(){var e=this;u.Z.post("runSchedule/runManagement/photovoltaicListNow?nodeId="+this.state.nodeid).then((function(t){if(console.log(t),200==t.data.code){var a=t.data.data;e.setState({gurgent:a.\u7d27\u6025,gciyao:a.\u6b21\u8981,gtishi:a.\u63d0\u793a,gzhongyao:a.\u91cd\u8981,galarmNumber:a.alarmNumber,pvLoad:a.pvLoad,AccumulatedStartupTime:a.AccumulatedStartupTime,energy:a.energy,pvCapacity:a.pvCapacity})}})).catch((function(e){console.log(e)}))}},{key:"element",value:function(){var e,t=document.getElementById("element"),a=h.init(t);(e={color:["rgba(0, 191, 143, 0.5)","rgba(255, 207, 64, 0.5)"],tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},grid:{top:10,bottom:60,left:"5%",right:"5%"},legend:{data:["\u5145\u7535","\u653e\u7535"],textStyle:{color:"#FFFFFF"},bottom:0},xAxis:[{type:"category",data:this.state.xdata,axisPointer:{type:"shadow"},axisLabel:{show:!0,color:"#FFF",formatter:"{value}\u6708"}}],yAxis:[{type:"value",min:0,max:250,interval:50,axisLabel:{formatter:"{value}",color:"#FFFFFF"},splitLine:{show:!0,lineStyle:{type:"dashed",color:"rgba(255, 255, 255, 0.2)"}}}],series:[{name:"\u5145\u7535",type:"bar",tooltip:{valueFormatter:function(e){return e+" kWh"}},barWidth:26,itemStyle:{normal:{barBorderRadius:[4,4,0,0],borderWidth:1,borderColor:"#00BF8F"}},data:this.state.x_in},{name:"\u653e\u7535",type:"bar",tooltip:{valueFormatter:function(e){return e+" kWh"}},itemStyle:{normal:{barBorderRadius:[4,4,0,0],borderWidth:1,borderColor:"#FFCF40"}},barWidth:26,data:this.state.x_out}]})&&a.setOption(e),window.addEventListener("resize",(function(){a.resize()}))}},{key:"house",value:function(){var e,t,a=document.getElementById("house"),i=h.init(a);(t={tooltip:{trigger:"item"},legend:{formatter:function(e){for(var a,s=t.series[0].data,i=0,n=0;n<s.length;n++)i+=s[n].value,s[n].name==e&&(a=s[n].value);var o=void 0===a?"":a;Math.round(a/i*100);return"".concat(e,"     ").concat(o,"kW")},icon:"circle",orient:"vertical",right:"20%",top:50,textStyle:{color:"#FFFFFF"}},series:[(e={name:"\u8d1f\u8377\u5360\u6bd4",type:"pie",radius:"80%",center:["25%","50%"],labelLine:{show:!1},label:{show:!1,position:"center"},data:this.state.loadRatio},(0,s.Z)(e,"label",{normal:{show:!0,position:"inner",formatter:"{d}%",color:"#FFFFFF"}}),(0,s.Z)(e,"emphasis",{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}),e)]})&&i.setOption(t),window.addEventListener("resize",(function(){i.resize()}))}},{key:"factory",value:function(){var e,t,a=document.getElementById("factory"),i=h.init(a);(t={tooltip:{trigger:"item"},legend:{formatter:function(e){for(var a,s=t.series[0].data,i=0,n=0;n<s.length;n++)i+=s[n].value,s[n].name==e&&(a=s[n].value);var o=void 0===a?"":a;Math.round(a/i*100);return"".concat(e,"  ").concat(o,"\u4e2a")},icon:"circle",orient:"vertical",right:"20%",top:50,textStyle:{color:"#FFFFFF"}},series:[(e={name:"\u62a5\u8b66\u6570\u91cf",type:"pie",radius:"80%",center:["25%","50%"],labelLine:{show:!1},label:{show:!1,position:"center"},data:this.state.alarmRatio},(0,s.Z)(e,"label",{normal:{show:!0,position:"inner",formatter:"{d}%",color:"#FFFFFF"}}),(0,s.Z)(e,"emphasis",{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}),e)]})&&i.setOption(t),window.addEventListener("resize",(function(){i.resize()}))}},{key:"render",value:function(){var e=this.state,t=(e.nodeNameList,e.alarmNumber),s=e.soc,i=e.soh,n=e.storageCapacity,o=e.storageLoad,r=e.urgent,l=e.inEnergy,d=e.outEnergy,h=e.ciyao,u=e.tishi,m=e.zhongyao,g=(e.xdata,e.x_in,e.x_out,e.gurgent),j=e.gciyao,p=e.gtishi,v=e.gzhongyao,y=e.galarmNumber,b=e.pvCapacity,f=e.AccumulatedStartupTime,N=e.energy,F=e.pvLoad,L=e.totalLoad,w=e.load,S=e.falarmNumber,k=(e.loading,e.options);return(0,x.jsxs)("div",{className:"allcontent12",children:[(0,x.jsx)("div",{className:"manageheader",children:(0,x.jsx)(c.Z,{style:{width:230},options:k,onChange:this.handleChange,placeholder:"\u8bf7\u9009\u62e9"})}),(0,x.jsxs)("div",{className:"Distributed",children:[(0,x.jsx)("h4",{children:"\u5206\u5e03\u5f0f\u50a8\u80fd\u5b9e\u65f6\u8fd0\u884c\u72b6\u6001"}),(0,x.jsxs)("div",{className:"manage",children:[(0,x.jsxs)("div",{className:"hadoop",children:[(0,x.jsx)("div",{className:"quantity1"}),(0,x.jsxs)("ul",{className:"hadooplist",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u7535\u6c60\u5bb9\u91cf(kWh)"}),(0,x.jsx)("b",{children:n})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u7535\u6c60\u529f\u7387(kW)"}),(0,x.jsx)("b",{children:o})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"SOH"}),(0,x.jsxs)("b",{children:[i,"%"]})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"SOC"}),(0,x.jsxs)("b",{children:[s,"%"]})]})]})]}),(0,x.jsxs)("div",{className:"hadoop",children:[(0,x.jsxs)("div",{className:"quantity1",children:[(0,x.jsx)("img",{src:a(78752)}),"\u62a5\u8b66\u6570\u91cf",(0,x.jsx)("span",{children:t})]}),(0,x.jsxs)("ul",{className:"hadooplist warnhadooplist",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u7d27\u6025"}),(0,x.jsx)("b",{children:r})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u91cd\u8981"}),(0,x.jsx)("b",{children:m})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u6b21\u8981"}),(0,x.jsx)("b",{children:h})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u63d0\u793a"}),(0,x.jsx)("b",{children:u})]})]})]})]}),(0,x.jsxs)("div",{className:"battery",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("img",{src:a(77573)}),(0,x.jsx)("b",{children:l}),(0,x.jsx)("br",{}),(0,x.jsx)("span",{children:"\u7535\u6c60\u603b\u5145\u7535\u91cf\uff08kWh\uff09"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("img",{src:a(50513)}),(0,x.jsx)("b",{children:d}),(0,x.jsx)("br",{}),(0,x.jsx)("span",{children:"\u7535\u6c60\u603b\u653e\u7535\u91cf\uff08kWh\uff09"})]})]}),(0,x.jsx)("div",{id:"element"})]}),(0,x.jsxs)("div",{className:"cell",children:[(0,x.jsx)("h4",{children:"\u5149\u4f0f\u8d44\u6e90"}),(0,x.jsxs)("div",{className:"manage",children:[(0,x.jsxs)("div",{className:"hadoop",children:[(0,x.jsx)("div",{className:"quantity1"}),(0,x.jsxs)("ul",{className:"hadooplist",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u53d1\u7535\u91cf(kWh)"}),(0,x.jsx)("b",{children:N})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u6ee1\u53d1\u5c0f\u65f6\u6570(h)"}),(0,x.jsx)("b",{children:f})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u5b9e\u65f6\u529f\u7387(kW)"}),(0,x.jsx)("b",{children:F})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u88c5\u673a\u5bb9\u91cf(kW)"}),(0,x.jsx)("b",{children:b})]})]})]}),(0,x.jsxs)("div",{className:"hadoop",children:[(0,x.jsxs)("div",{className:"quantity1",children:[(0,x.jsx)("img",{src:a(78752)}),"\u62a5\u8b66\u6570\u91cf",(0,x.jsx)("span",{children:y})]}),(0,x.jsxs)("ul",{className:"hadooplist warnhadooplist",children:[(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u7d27\u6025"}),(0,x.jsx)("b",{children:g})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u91cd\u8981"}),(0,x.jsx)("b",{children:v})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u6b21\u8981"}),(0,x.jsx)("b",{children:j})]}),(0,x.jsxs)("li",{children:[(0,x.jsx)("h4",{children:"\u63d0\u793a"}),(0,x.jsx)("b",{children:p})]})]})]})]})]}),(0,x.jsxs)("div",{className:"load",style:{padding:"0px 20px 30px 20px"},children:[(0,x.jsx)("h4",{style:{paddingLeft:0},children:"\u53ef\u8c03\u8d1f\u8377"}),(0,x.jsxs)("div",{className:"loadcontent",children:[(0,x.jsxs)("div",{className:"stations",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:L}),(0,x.jsx)("br",{}),(0,x.jsx)("span",{children:"\u603b\u53ef\u8c03\u8d1f\u8377\uff08kW\uff09"})]}),(0,x.jsx)("img",{src:a(16849)})]}),(0,x.jsxs)("div",{className:"stations",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("b",{children:w}),(0,x.jsx)("br",{}),(0,x.jsx)("span",{children:"\u5b9e\u65f6\u53ef\u8c03\u8d1f\u8377\uff08kW\uff09"})]}),(0,x.jsx)("img",{src:a(71561)})]})]}),(0,x.jsxs)("div",{className:"building",style:{marginTop:"60px"},children:[(0,x.jsxs)("div",{className:"storied",children:[(0,x.jsxs)("div",{className:"title",children:[(0,x.jsx)("img",{src:a(89659)}),"\u8d1f\u8377\u5360\u6bd4"]}),(0,x.jsx)("div",{id:"house"})]}),(0,x.jsxs)("div",{className:"storied",children:[(0,x.jsxs)("div",{className:"title",children:[(0,x.jsx)("img",{src:a(78752)}),"\u62a5\u8b66\u6570\u91cf ",(0,x.jsx)("span",{className:"number",children:S})]}),(0,x.jsx)("div",{id:"factory"})]})]})]})]})}}]),l}(l.Component))}}]);
//# sourceMappingURL=9408.2bdcbdfc.chunk.js.map
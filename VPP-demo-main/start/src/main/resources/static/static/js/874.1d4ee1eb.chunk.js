"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[874],{20874:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var s=n(1413),o=n(29439),i=n(72791),l=n(93070),r=n(13832),a=n(31773),d=n(2556),c=n(78347),u=n(58768),h=n(61855),g=n(5122),x=(n(97892),n(80184)),p=function(e){var t=(0,i.useState)([]),n=(0,o.Z)(t,2),p=n[0],f=n[1],m=(0,i.useState)(e.user.respId),y=(0,o.Z)(m,2),Z=y[0],j=(y[1],(0,i.useState)(!1)),C=(0,o.Z)(j,2),S=C[0],v=C[1],k=(0,i.useState)("-"),b=(0,o.Z)(k,2),I=b[0],N=b[1],P=(0,i.useState)(""),F=(0,o.Z)(P,2),w=F[0],H=F[1],E=(0,i.useState)(""),M=(0,o.Z)(E,2),R=M[0],A=M[1],V=(0,i.useState)(""),z=(0,o.Z)(V,2),D=z[0],_=z[1],B=(0,i.useState)(""),K=(0,o.Z)(B,2),L=(K[0],K[1]),O=(0,i.useState)(""),Q=(0,o.Z)(O,2),T=Q[0],U=Q[1],Y=(0,i.useState)(""),q=(0,o.Z)(Y,2),G=(q[0],q[1],(0,i.useState)("")),J=(0,o.Z)(G,2),W=J[0],X=J[1],$=(0,i.useState)([]),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],se=(0,i.useState)("block"),oe=(0,o.Z)(se,2),ie=(oe[0],oe[1],l.Z.useForm()),le=(0,o.Z)(ie,1)[0];(0,i.useEffect)((function(){e.user.respId&&re(e.user.respId)}),[]);var re=function(e){console.log(e),g.Z.post("AIEnergy/strategyQuery",{respId:e}).then((function(e){(console.log(e),200==e.data.code)&&(e.data.data.map((function(e,t){return e.key=t})),f(e.data.data))})).catch((function(e){console.log(e)}))},ae=function(e){var t=new Date(e),n=t.getFullYear(),s=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),l=t.getMinutes().toString().padStart(2,"0");return"".concat(n,"-").concat(s,"-").concat(o," ").concat(i,":").concat(l)},de=function(e){g.Z.post("AIEnergy/strategyEnsure",{ids:e},{headers:{"Content-Type":"application/json"}}).then((function(e){r.ZP.success("\u786e\u8ba4\u6210\u529f"),re(Z),ne([])})).catch((function(e){r.ZP.error("\u63a5\u53e3\u9519\u8befstrategyEnsure")}))},ce=[{title:"\u5e8f\u53f7",dataIndex:"name",key:"name",render:function(e,t,n){return n+1}},{title:"\u8282\u70b9",dataIndex:"nodeName",key:"nodeName"},{title:"\u6237\u53f7",dataIndex:"noHouseholds",key:"noHouseholds"},{title:"\u65f6\u95f4\u70b9",dataIndex:"timePoint",key:"timePoint",render:function(e,t,n){return ae(e)}},{title:"\u7b56\u7565\u5185\u5bb9",dataIndex:"ensure",key:"ensure",render:function(e){return e?"\u5df2\u786e\u8ba4":"\u672a\u786e\u8ba4"}},{title:"\u7b56\u7565\u72b6\u6001",dataIndex:"strategyContent",key:"strategyContent"},{title:"\u64cd\u4f5c",dataIndex:"address",key:"address",render:function(e,t,n,s){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.Z,{size:"middle",children:(0,x.jsx)("a",{onClick:function(){return function(e){console.log(e);var t=e.strategyContent,n=t.indexOf("\u6e29\u5ea6");if(-1!==n){var s=t.substring(n+2);console.log(s),s.includes("\u2103")&&(console.log("111"),s=s.replace("\u2103","")),console.log(s),X(s),le.setFieldsValue({temp:s})}else console.log("\u627e\u4e0d\u5230\u6e29\u5ea6\u4fe1\u606f\u3002");v(!0),N(e.nodeName?e.nodeName:"-"),H(e.noHouseholds),A(ae(e.timePoint)),_(e.deviceName),L(e.strategyContent),U(e.id)}(t)},style:{marginRight:"8px"},children:"\u7f16\u8f91"})}),0===(null===t||void 0===t?void 0:t.ensure)?(0,x.jsx)(a.Z,{size:"middle",children:(0,x.jsx)("a",{onClick:function(){return de([null===t||void 0===t?void 0:t.id])},children:"\u786e\u8ba4"})}):null]})}}],ue=function(){v(!1)},he={onChange:function(e,t){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t);var n=t.map((function(e){return null===e||void 0===e?void 0:e.id}));ne(n)},getCheckboxProps:function(e){return{disabled:1===(null===e||void 0===e?void 0:e.ensure)}}};return(0,x.jsxs)("div",{style:{padding:16,background:"#212029",borderRadius:"2px"},children:[(0,x.jsx)(d.ZP,{className:"confirm-btn",disabled:0===te.length,onClick:function(){return de(te)},children:"\u6279\u91cf\u786e\u8ba4"}),(0,x.jsx)(c.Z,{columns:ce,dataSource:p,rowSelection:(0,s.Z)({type:"checkbox"},he)}),(0,x.jsx)(u.Z,{className:"ModalRight",title:"\u7f16\u8f91",visible:S,onCancel:ue,footer:[(0,x.jsx)(d.ZP,{ghost:!0,onClick:ue,children:"\u53d6\u6d88"}),(0,x.jsx)(d.ZP,{type:"primary",onClick:function(){console.log(le.getFieldsValue());var e=le.getFieldsValue().temp;console.log(e),""!==e&&e<7||e>12?r.ZP.error("\u51fa\u6c34\u6e29\u5ea6\u8303\u56f4\u9700\u57287\u2103\u523012\u2103\u4e4b\u95f4"):e?g.Z.post("AIEnergy/strategyUpdate",{id:T,strategyContentBefore:W,strategyContent:Number(e).toFixed(2)}).then((function(e){200==e.data.code&&(console.log(e),v(!1),r.ZP.success("\u4fee\u6539\u6210\u529f"),le.resetFields(),re(Z))})).catch((function(e){console.log(e)})):r.ZP.info("\u8bf7\u8f93\u5165\u51fa\u6c34\u6e29\u5ea6")},children:"\u786e\u5b9a"})],children:(0,x.jsxs)("div",{className:"editModal",children:[(0,x.jsx)("div",{className:"editModal-Left",children:(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"\u8282\u70b9"}),(0,x.jsx)("li",{children:"\u6237\u53f7"}),(0,x.jsx)("li",{children:"\u65f6\u95f4\u70b9"}),(0,x.jsx)("li",{children:"\u63a7\u5236\u8bbe\u5907"}),(0,x.jsx)("li",{children:"\u51fa\u6c34\u6e29\u5ea6"})]})}),(0,x.jsx)("div",{className:"editModal-Right",children:(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{style:{lineHeight:"50px"},children:I}),(0,x.jsx)("li",{style:{lineHeight:"50px"},children:w}),(0,x.jsx)("li",{style:{lineHeight:"40px"},children:R}),(0,x.jsx)("li",{children:D}),(0,x.jsx)("li",{children:(0,x.jsx)(l.Z,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},autoComplete:"off",form:le,children:(0,x.jsxs)(l.Z.Item,{children:[(0,x.jsx)(l.Z.Item,{name:"temp",style:{width:"60px",float:"left"},rules:[{message:""}],children:(0,x.jsx)(h.Z,{})}),(0,x.jsxs)("span",{className:"prompt-title",style:{color:"#FFF",margin:"5px 0px 0px 0px"},children:[" \xb0C",(0,x.jsx)("b",{children:"\uff08\u8303\u56f4\u9650\u5236\uff1a7\xb0C-12\xb0C\uff09"})]})]})})})]})})]})})]})}}}]);
//# sourceMappingURL=874.1d4ee1eb.chunk.js.map
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3898],{33898:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var o=n(29439),i=n(72791),d=n(5122),r=n(41418),a=n.n(r),s=n(12781),l=n(96463),c=n(13832),u=n(50131),v=n(67571),h=n(80184),m=function(){var t,e,n=(0,i.useState)([]),r=(0,o.Z)(n,2),m=r[0],p=r[1],f=(0,i.useState)([]),x=(0,o.Z)(f,2),g=x[0],j=x[1],N=(0,v.k6)(),S=(0,v.TH)(),k=l.jsPlumb.getInstance(),w=function(){k.repaintEverything()},b=function(t){var n=new URLSearchParams;n.append("respId",t),d.Z.post("AIEnergy/getDecisionChainList",n).then((function(t){var n=t.data.data;p(null===n||void 0===n?void 0:n.nodeList),j(null===n||void 0===n?void 0:n.respTask),function(t,n){var o=.01,i=.98;e=setInterval((function(){(o+=.02)>.98&&(o=.012),(i-=.02)<.012&&(i=.98),k.deleteEveryConnection();var e=(0,s.Q3)(null===n||void 0===n?void 0:n.dstatus,null===n||void 0===n?void 0:n.declareStatus);"\u5f85\u7533\u62a5"!==e&&"\u5df2\u51fa\u6e05"!==e||k.connect({source:"node-top",target:"node-center",endpoint:"Blank",connector:["Straight"],anchor:["Bottom","Top"],paintStyle:{stroke:"#0F9D90",strokeWidth:2},overlays:[["Arrow",{width:12,length:12,location:o}]]}),"\u5f85\u51fa\u6e05"!==e&&"\u6267\u884c\u4e2d"!==e||k.connect({source:"node-top",target:"node-center",endpoint:"Blank",connector:["Straight"],anchor:["Bottom","Top"],paintStyle:{stroke:"#0F9D90",strokeWidth:2},overlays:[["Arrow",{width:12,length:12,location:i,direction:-1}]]}),"\u5df2\u5b8c\u6210"===e&&k.connect({source:"node-top",target:"node-center",endpoint:"Blank",connector:["Straight"],anchor:["Bottom","Top"],paintStyle:{stroke:"#0F9D90",strokeWidth:2}}),null===t||void 0===t||t.forEach((function(t,n){"\u5f85\u7533\u62a5"!==e&&"\u6267\u884c\u4e2d"!==e||k.connect({source:"node-center-bottom",target:"node-item-".concat(n),endpoint:"Blank",connector:["Straight"],anchor:["Top","Bottom"],paintStyle:{stroke:"#0F9D90",strokeWidth:2},overlays:[["Arrow",{width:12,length:12,location:i,direction:-1}]]}),"\u5f85\u51fa\u6e05"!==e&&"\u5df2\u51fa\u6e05"!==e||k.connect({source:"node-center-bottom",target:"node-item-".concat(n),endpoint:"Blank",connector:["Straight"],anchor:["Bottom","Top"],paintStyle:{stroke:"#0F9D90",strokeWidth:2},overlays:[["Arrow",{width:12,length:12,location:o}]]}),"\u5df2\u5b8c\u6210"===e&&k.connect({source:"node-center-bottom",target:"node-item-".concat(n),endpoint:"Blank",connector:["Straight"],anchor:["Bottom","Top"],paintStyle:{stroke:"#0F9D90",strokeWidth:2}})}))}),200)}(null===n||void 0===n?void 0:n.nodeList,null===n||void 0===n?void 0:n.respTask)})).catch((function(t){c.ZP.error("\u63a5\u53e3\u9519\u8befgetDecisionChainList")}))};return(0,i.useEffect)((function(){return b(S.state.respId),window.addEventListener("resize",w),function(){e&&clearInterval(e),k.deleteEveryConnection(),window.removeEventListener("resize",w)}}),[]),(0,h.jsxs)("div",{className:"all-node-page",children:[(0,h.jsx)("i",{className:"close-icon",onClick:function(){N.push("/demandForecast")}}),(0,h.jsxs)("div",{className:"demand-forecast_content_right_content",children:[(0,h.jsxs)("div",{className:"demand-forecast-right-top",children:[(0,h.jsx)("div",{className:"right-img"}),(0,h.jsx)("span",{className:"right-text",id:"node-top",children:"\u9700\u6c42\u54cd\u5e94\u5e73\u53f0"})]}),(0,h.jsx)("div",{style:{height:"1px"},id:"demand-forecast-right-top"}),(0,h.jsxs)("div",{className:"demand-forecast-right-center",children:[(0,h.jsx)("div",{className:"center-img-top"}),(0,h.jsx)("div",{style:{height:"1px"},id:"model-wrap"}),(0,h.jsxs)("div",{className:"model-wrap",children:[(0,h.jsx)("div",{className:"modal-img",id:"node-center"}),(0,h.jsx)("span",{className:"model-text",id:"node-center-bottom",children:"\u80fd\u6e90\u5927\u6a21\u578b"})]})]}),(0,h.jsx)("div",{className:"demand-forecast-right-bottom",children:(0,h.jsx)("div",{className:"arrow-bottom"})}),(0,h.jsxs)("div",{className:"left-text-wrap",children:[(0,h.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u65f6\u6bb5\uff1a",null===g||void 0===g?void 0:g.rsTime,"-",null===g||void 0===g||null===(t=g.reTime)||void 0===t?void 0:t.split(" ")[1]]}),(0,h.jsxs)("p",{className:"left-text",children:["\u8d1f\u8377\u9700\u6c42(kW)\uff1a",(0,s.ZO)(null===g||void 0===g?void 0:g.respLoad)]}),"\u5df2\u51fa\u6e05"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)||"\u6267\u884c\u4e2d"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)||"\u5df2\u5b8c\u6210"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)?(0,h.jsxs)("p",{className:"left-text",children:["\u51fa\u6e05\u8d1f\u8377(kW)\uff1a",(0,s.ZO)((null===g||void 0===g?void 0:g.declareLoad)-(0,s.Id)(null===m||void 0===m?void 0:m.slice(0,3)))]}):null,(0,h.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u7c7b\u578b\uff1a",(0,s.Mc)(null===g||void 0===g?void 0:g.respType)]}),(0,h.jsxs)("p",{className:"left-text",children:["\u54cd\u5e94\u7ea7\u522b\uff1a",(0,s.M1)(null===g||void 0===g?void 0:g.respLevel)]})]}),(0,h.jsxs)("div",{className:"right-text-wrap",children:[(0,h.jsxs)("p",{className:"other-right-text",children:["\u9700\u6c42\u54cd\u5e94\u72b6\u6001\uff1a",(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)]}),(0,h.jsxs)("p",{className:"other-right-text",children:["\u7533\u62a5\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)?0:(0,s.ZO)((null===g||void 0===g?void 0:g.declareLoad)-(0,s.Id)(m))]}),(0,h.jsxs)("p",{className:"other-right-text",children:["\u8c03\u8282\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)?0:(0,s.ZO)((null===g||void 0===g?void 0:g.adjustLoad)-(0,s.t5)(m))]}),"\u5f85\u7533\u62a5"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)?null:(0,h.jsxs)("p",{className:"other-right-text",children:["\u9884\u6d4b\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===g||void 0===g?void 0:g.forecastLoad)]}),"\u6267\u884c\u4e2d"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{className:"other-right-text",children:["\u5b9e\u9645\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===g||void 0===g?void 0:g.actualLoad)]}),(0,h.jsxs)("p",{className:"other-right-text",children:["\u57fa\u7ebf\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===g||void 0===g?void 0:g.baseLoad)]})]}):null,"\u5df2\u5b8c\u6210"===(0,s.Q3)(null===g||void 0===g?void 0:g.dstatus,null===g||void 0===g?void 0:g.declareStatus)?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{className:"other-right-text",children:["\u54cd\u5e94\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===g||void 0===g?void 0:g.actualLoad)]}),(0,h.jsxs)("p",{className:"other-right-text",children:["\u54cd\u5e94\u7535\u91cf(kWh)\uff1a",(0,s.ZO)(null===g||void 0===g?void 0:g.baseLoad)]}),(0,h.jsxs)("p",{className:"other-right-text",children:["\u9884\u4f30\u6536\u76ca\uff08\u5143\uff09\uff1a",(0,s.ZO)(null===g||void 0===g?void 0:g.baseLoad),"\u5143"]})]}):null]})]}),(0,h.jsx)("div",{className:"dots-wrapper",children:null===m||void 0===m?void 0:m.map((function(t,e){return(0,h.jsxs)("div",{className:"dots-1",children:[(0,h.jsxs)("div",{className:"dots-1-header",id:"node-item-".concat(e),children:[(0,h.jsx)("div",{className:a()("round",{"online-status":null===t||void 0===t?void 0:t.online})}),(0,h.jsx)(u.Z,{placement:"top",title:t.nodeName,color:"#38373F",children:(0,h.jsx)("span",{className:"dots-1-header-text",children:null===t||void 0===t?void 0:t.nodeName})})]}),(0,h.jsxs)("div",{className:"dots1-content",children:[(0,h.jsxs)("p",{className:"dots1-text",children:["\u72b6\u6001\uff1a",(0,s.ei)(null===t||void 0===t?void 0:t.drsStatus)||"-"]}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{className:"dots1-text",children:["\u7533\u62a5\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===(0,s.ei)(null===t||void 0===t?void 0:t.drsStatus)?0:(0,s.ZO)(null===t||void 0===t?void 0:t.declareLoad)]}),(0,h.jsxs)("p",{className:"dots1-text",children:["\u8c03\u8282\u8d1f\u8377(kW)\uff1a","\u5f85\u7533\u62a5"===(0,s.ei)(null===t||void 0===t?void 0:t.drsStatus)?0:(0,s.ZO)(null===t||void 0===t?void 0:t.adjustLoad)]}),(0,h.jsxs)("p",{className:"dots1-text",children:["\u9884\u6d4b\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===t||void 0===t?void 0:t.forecastLoad)]})]}),24===(null===t||void 0===t?void 0:t.drsStatus)?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{className:"dots1-text",children:["\u5b9e\u9645\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===t||void 0===t?void 0:t.deviceRatedLoad)]}),(0,h.jsxs)("p",{className:"dots1-text",children:["\u57fa\u7ebf\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===t||void 0===t?void 0:t.reality)]})]}):null,25===(null===t||void 0===t?void 0:t.drsStatus)?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{className:"dots1-text",children:["\u54cd\u5e94\u8d1f\u8377(kW)\uff1a",(0,s.ZO)(null===t||void 0===t?void 0:t.responseLoad)]}),(0,h.jsxs)("p",{className:"dots1-text",children:["\u54cd\u5e94\u7535\u91cf(kWh)\uff1a",(0,s.ZO)(null===t||void 0===t?void 0:t.realTimeLoad)]}),(0,h.jsxs)("p",{className:"dots1-text",children:["\u9884\u4f30\u6536\u76ca\uff08\u5143\uff09\uff1a",(0,s.ZO)(null===t||void 0===t?void 0:t.income),"\u5143"]})]}):null]})]},e)}))})]})}},12781:function(t,e,n){n.d(e,{Id:function(){return v},M1:function(){return a},Mc:function(){return r},Q:function(){return c},Q3:function(){return s},ZO:function(){return u},ei:function(){return l},gu:function(){return o},jl:function(){return d},p6:function(){return i},t5:function(){return h}});var o=function(t){return{"3da72e052a0b48759b0f4633df42235a":"\u6df1\u5733\u67d0\u5de5\u4e1a\u8bbe\u5907\u65b0\u6750\u6599\u80a1\u4efd\u6709\u9650\u516c\u53f8","176c0991f24e30c2b25a9dbf1185b7b9":"\u6df1\u5733\u6cf0\u4f26\u5e7f\u573aA\u5ea7","5eb413037ba16ea6108c12e0d6353be3":"\u6df1\u5733\u6cf0\u4f26\u5e7f\u573aB\u5ea7"}[t]},i=function(t){var e=new Date(t),n=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),d=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return"".concat(n,"-").concat(o,"-").concat(i," ").concat(d,":").concat(r)},d=function(t,e){var n=new Date(t),o=new Date(e);return Math.abs(o.getTime()-n.getTime())>9e6},r=function(t){return 1===t?"\u524a\u5cf0\u54cd\u5e94":2===t?"\u586b\u8c37\u54cd\u5e94":"-"},a=function(t){return 1===t?"\u65e5\u524d\u54cd\u5e94":2===t?"\u5c0f\u65f6\u54cd\u5e94":3===t?"\u5206\u949f\u54cd\u5e94":4===t?"\u79d2\u7ea7\u54cd\u5e94":void 0},s=function(t,e){if(!e){if(1===t)return"\u5f85\u7533\u62a5";if(2===t)return"\u6267\u884c\u4e2d";if(3===t)return"\u5df2\u5b8c\u6210";if(4===t||0===t)return"\u4e0d\u53c2\u52a0"}if(!t){if(1===e)return"\u5f85\u7533\u62a5";if(2===e)return"\u5f85\u51fa\u6e05";if(3===e)return"\u5df2\u51fa\u6e05"}if(e){if(1===e&&1===t)return"\u5f85\u7533\u62a5";if(2===e&&1===t)return"\u5f85\u51fa\u6e05";if(3===e&&1===t)return"\u5df2\u51fa\u6e05";if(3===e&&2===t)return"\u6267\u884c\u4e2d";if(3===e&&3===t)return"\u5df2\u5b8c\u6210";if(4===t||0===t)return"\u4e0d\u53c2\u52a0"}return"\u4e0d\u53c2\u52a0"},l=function(t){switch(t){case 11:case 12:return"\u5f85\u7533\u62a5";case 15:return"\u4e0d\u53c2\u52a0";case 21:return"\u5f85\u51fa\u6e05";case 22:return"\u5df2\u51fa\u6e05";case 24:return"\u6267\u884c\u4e2d";case 25:return"\u5df2\u5b8c\u6210";default:return"-"}},c=function(t){var e=new Date(t),n=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),d="",r="";if(Number(e.getHours().toString())>=22)d="23",r="45";else{var a=new Date(t);a.setTime(a.getTime()+9e6),d=Number(a.getHours().toString()).toString().padStart(2,"0"),r=a.getMinutes().toString().padStart(2,"0")}return{startTime:t.split(" ")[1],endDate:"".concat(n,"-").concat(o,"-").concat(i),endTime:"".concat(d,":").concat(r)}},u=function(t){return isNaN(t)?0:t?Math.round(100*t)/100:0},v=function(t){var e=0;return t&&(null===t||void 0===t?void 0:t.length)>0&&t.forEach((function(t){"\u5f85\u7533\u62a5"===l(null===t||void 0===t?void 0:t.drsStatus)&&(e+=Number(null===t||void 0===t?void 0:t.declareLoad))})),e},h=function(t){var e=0;return t&&(null===t||void 0===t?void 0:t.length)>0&&t.forEach((function(t){"\u5f85\u7533\u62a5"===l(null===t||void 0===t?void 0:t.drsStatus)&&(e+=Number(null===t||void 0===t?void 0:t.adjustLoad))})),e}}}]);
//# sourceMappingURL=3898.ff7353e9.chunk.js.map
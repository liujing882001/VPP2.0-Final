{"version":3,"file":"static/js/3811.dd23d2cb.chunk.js","mappings":"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","sources":["views/respond/Responsetask/tactful/index.js"],"sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport { Link  } from \"react-router-dom\"\r\n\r\nimport { Select, Space,Table,Button,Input,message } from 'antd';\r\n\r\nimport './tactful.scss'\r\nimport http from '../../../../server/server.js'\r\nimport {\r\n  InfoCircleOutlined,\r\n  \r\n} from '@ant-design/icons';\r\nconst { Search } = Input;\r\nconst Tactful =(props) =>{\r\n\t// console.log(props)\r\n\tconst [respId, setRespId] = useState(props.user.respId);\r\n\tconst [tactfulList, setTactfulList] = useState([]);\r\n\tconst [strategyId, setStrategyId] = useState('');\r\n\tconst [deviceRatedPowerSort, setDeviceRatedPowerSort] = useState(1);\r\n\tconst [deviceStatusSort, setDeviceStatusSort] = useState('');\r\n\tconst [page, setPage] = useState(1);\r\n\tconst [totalActualLoad, setTotalActualLoad] = useState('-');\r\n\tconst [totalDeviceRatedPower, setTotalDeviceRatedPower] = useState('-');\r\n\tconst [deviceName, setDeviceName] = useState('');\r\n\tconst [oldStrategyId, setOldStrategyId] = useState('');\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [dataSource, setDataSource] = useState([]);\r\n\tconst [strategyName, setStrategyName] = useState('');\r\n\tconst [ymd, setYmd] = useState('');\r\n\tconst [times, setTimes] = useState('');\r\n\tconst [power, setPower] = useState('');\r\n\tconst [val, setVal] = useState('');\r\n\tconst [total,setTotal] = useState('')\r\n\tuseEffect(() =>{\r\n\t\tgetStrategyList()\r\n\t},[])\r\n\tuseEffect(() =>{\r\n\t\tgetDeviceListById()\r\n\t\tstrategyDetail()\r\n\t},[strategyId])\r\n\tuseEffect(() =>{\r\n\t\tgetDeviceListById()\r\n\t},[deviceName,page])\r\n\t\r\n\t// 查询该用户具有权限的策略名称\r\n\tconst getStrategyList =() =>{\r\n\t\thttp.post('demand_resp/resp_task/getStrategyList?respId='+respId).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tlet obj = res.data.data.strategyList\r\n\t\t\t\tlet objNew = [];\r\n\t\t\t\tfor (let i in obj) {\r\n\t\t\t\t\tobjNew.push({ \r\n\t\t\t\t\t\tlabel: obj[i],\r\n\t\t\t\t\t\tvalue:i\r\n\t\t\t\t\t})\r\n\t\t\t\t}\t\t\r\n\t\t\t\tconsole.log('objNew',objNew);\r\n\t\t\t\tif(res.data.data.oldStrategyId){\r\n\t\t\t\t\tsetVal(res.data.data.oldStrategyId)\r\n\t\t\t\t\tsetStrategyId(res.data.data.oldStrategyId)\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tsetTactfulList(objNew)\r\n\t\t\t\tsetOldStrategyId(res.data.data.oldStrategyId)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// id获取设备列表\r\n\tconst getDeviceListById=() =>{\r\n\t\tsetLoading(true)\r\n\t\thttp.post('demand_resp/resp_task/getDeviceListById',{\r\n\t\t\t\"deviceName\": deviceName,\t//设备名称\r\n\t\t\t\"deviceRatedPowerSort\": deviceRatedPowerSort,\t//额定负荷排序\r\n\t\t\t\"deviceStatusSort\": deviceStatusSort,\t//策略状态排序 \r\n\t\t\t\"number\": page,\r\n\t\t\t\"pageSize\": 5,\r\n\t\t\t\"respId\": respId,\t//响应任务id\r\n\t\t\t\"sid\": \"\",\r\n\t\t\t\"strategyId\": strategyId\t//可调负荷运行策略id\r\n\t\t}).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\t// console.log(res.data.data.devieInfo.content)\r\n\t\t\t\tif(res.data.data.devieInfo){\r\n\t\t\t\t\tsetDataSource(res.data.data.devieInfo.content || []);\r\n\t\t\t\t\tsetTotal(res.data.data.devieInfo.totalElements);\r\n\t\t\t\t\tsetTotalActualLoad(res.data.data.totalActualLoad);\r\n\t\t\t\t\tsetTotalDeviceRatedPower(res.data.data.totalDeviceRatedPower);\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetDataSource([]);\r\n\t\t\t\t\tsetTotal('');\r\n\t\t\t\t\tsetTotalActualLoad(res.data.data.totalActualLoad);\r\n\t\t\t\t\tsetTotalDeviceRatedPower(res.data.data.totalDeviceRatedPower);\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 策略选择\r\n\tconst strategyChange =(val) =>{\r\n\t\tconsole.log(val)\r\n\t\tsetStrategyId(val);\r\n\t\tsetLoading(true);\r\n\t\tsetVal(val);\r\n\t\tgetDeviceListById()\r\n\t\tstrategyDetail()\r\n\t}\r\n\t// 搜索设备列表\r\n\tconst getDeviceListByName=() =>{\r\n\t\thttp.post('demand_resp/resp_task/getDeviceListByName',{\r\n\t\t\t\"deviceName\": deviceName,\t//设备名称\r\n\t\t\t\"deviceRatedPowerSort\": deviceRatedPowerSort,\r\n\t\t\t\"deviceStatusSort\": deviceStatusSort,\r\n\t\t\t\"number\": page,\r\n\t\t\t\"pageSize\": 10,\r\n\t\t\t\"respId\": respId,\r\n\t\t\t\"sid\": \"\",\r\n\t\t\t\"strategyId\": strategyId\r\n\t\t}).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 搜索\r\n\tconst onSearch =(val) =>{\r\n\t\tconsole.log(val)\r\n\t\tsetDeviceName(val)\r\n\t\t// getDeviceListById()\r\n\t}\r\n\t// 编辑策略\r\n\tconst editStrategy =() =>{\r\n\t\thttp.post('demand_resp/resp_task/editStrategy?oldStrategyId='+\r\n\t\toldStrategyId+'&strategyId='+strategyId+'&respId='+respId).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 详情\r\n\tconst strategyDetail=() =>{\r\n\t\thttp.post('run_schedule/run_strategy/strategyDetail?strategyId='+strategyId).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tlet data = res.data.data\r\n\t\t\t\tif(data.strategyType==0){\r\n\t\t\t\t\t// 空调\r\n\t\t\t\t\tif(data.runStrategy==0){\r\n\t\t\t\t\t\t// 一次性\r\n\t\t\t\t\t\tsetYmd(data.onceExe.ymd);\r\n\t\t\t\t\t\tsetTimes(data.onceExe.times);\r\n\t\t\t\t\t\tsetPower(data.airConditioningDTO.power === 'POWER_ON' ? '开启' : '关闭');\r\n\t\t\t\t\t\tsetStrategyName(data.strategyName);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetYmd('');\r\n\t\t\t\t\t\tsetTimes(data.cycleExe.cycleTimes);\r\n\t\t\t\t\t\tsetPower(data.airConditioningDTO.power === 'POWER_ON' ? '开启' : '关闭');\r\n\t\t\t\t\t\tsetStrategyName(data.strategyName);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(data.strategyType==1){\r\n\t\t\t\t\t// 七天\r\n\t\t\t\t\tif(data.runStrategy==0){\r\n\t\t\t\t\t\t// 一次性\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetYmd(data.onceExe.ymd);\r\n\t\t\t\t\t\tsetTimes(data.onceExe.times);\r\n\t\t\t\t\t\tsetPower(data.otherConditioningDTO.power=='POWER_ON'?'开启':'关闭');\r\n\t\t\t\t\t\tsetStrategyName(data.strategyName);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetYmd('');\r\n\t\t\t\t\t\tsetTimes(data.onceExe.times);\r\n\t\t\t\t\t\tsetPower(data.otherConditioningDTO.power=='POWER_ON'?'开启':'关闭');\r\n\t\t\t\t\t\tsetStrategyName(data.strategyName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// \r\n\t// \r\n\tconst ontactful =() =>{\r\n\t\thttp.post('demand_resp/resp_task/editStrategy?oldStrategyId='+\r\n\t\toldStrategyId+'&strategyId='+strategyId+'&respId='+respId\r\n\t\t).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code==200){\r\n\t\t\t\tmessage.success('成功')\r\n\t\t\t\t// this.props.history.push({ pathname: '/Responsetask' });\r\n\t\t\t}else{\r\n\t\t\t\tmessage.info(res.data.msg)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: '编号',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t\twidth:80,\r\n\t\t\trender:(value, item, index) => (page - 1) * 5 + index+1,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '户号',\r\n\t\t\tdataIndex: 'noHouseholds',\r\n\t\t\tkey: 'noHouseholds',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '节点',\r\n\t\t\tdataIndex: 'nodeName',\r\n\t\t\tkey: 'nodeName',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '系统',\r\n\t\t\tdataIndex: 'systemName',\r\n\t\t\tkey: 'systemName',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '设备',\r\n\t\t\tdataIndex: 'deviceName',\r\n\t\t\tkey: 'deviceName',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '额定负荷（kW）',\r\n\t\t\tdataIndex: 'deviceRatedPower',\r\n\t\t\tkey: 'deviceRatedPower',\r\n\t\t\tsorter: true,\r\n\t\t\trender:(value, item, index) =>{\r\n\t\t\t\tif(value==null||value==undefined||value===\"\"||value=='-'){\r\n\t\t\t\t\treturn '-'\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn Number(value).toFixed(2)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t// {\r\n\t\t// \ttitle: '实时负荷（kW）',\r\n\t\t// \tdataIndex: 'actualLoad',\r\n\t\t// \tkey: 'actualLoad',\r\n\t\t// },\r\n\t\t{\r\n\t\t\ttitle: '设备状态',\r\n\t\t\tdataIndex: 'sstatus',\r\n\t\t\tkey: 'sstatus',\r\n\t\t\tsorter: true,\r\n\t\t\trender:(text, item, index) =>{\r\n\t\t\t\treturn text==1?'开启':'关闭'\r\n\t\t\t}\r\n\t\t},\r\n\t];\r\n\t\t \r\n\t\t// 分页\r\n\tconst handlePagination = page => {\r\n\t\t\r\n\t\tsetPage(page)\r\n\t\t// getDeviceListById()\r\n\t};\r\n\t// 排序\r\n\tconst onChangetab = (pagination, filters, sorter) =>{\r\n\t\t\r\n\t\tconsole.log(sorter)\r\n\t\tif (sorter.order) {\r\n\t\t\t// deviceRatedPower\r\n\t\t\t// \r\n\t\t\tif(sorter.columnKey=='deviceRatedPower'){\r\n\t\t\t\tif(sorter.order == \"ascend\"){\r\n\t\t\t\t\t// 升序\r\n\t\t\t\t\tsetDeviceRatedPowerSort(1);\r\n\t\t\t\t\tsetDeviceStatusSort('');\r\n\t\t\t\t\tgetDeviceListById()\r\n\t\t\t\t}else if(sorter.order == \"descend\"){\r\n\t\t\t\t\t// 降序\r\n\t\t\t\t\tsetDeviceRatedPowerSort(2);\r\n\t\t\t\t\tsetDeviceStatusSort('');\r\n\t\t\t\t\tgetDeviceListById()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"tactful\">\r\n\t\t\t\r\n\t\t\t<div className=\"tactfulbody\">\r\n\t\t\t\t<h4>选择策略</h4>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"strategy\">\r\n\t\t\t\t\t\t<span className=\"strategyspan\">策略名称</span>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tdefaultValue=\"请选择\"\r\n\t\t\t\t\t\t\tstyle={{ width: 155 }}\r\n\t\t\t\t\t\t\tbordered={false}\r\n\t\t\t\t\t\t\toptions={tactfulList}\r\n\t\t\t\t\t\t\tonChange={strategyChange}\r\n\t\t\t\t\t\t\tvalue={val}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"breed\">\r\n\t\t\t\t\t<ul className=\"breedul\">\r\n\t\t\t\t\t\t<li style={{width:'100%'}}>策略类型：{strategyName}</li>\r\n\t\t\t\t\t\t<li>执行日期：{ymd}</li>\r\n\t\t\t\t\t\t<li>执行时间：{times}</li>\r\n\t\t\t\t\t\t<li>执行动作：{power}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"breed\" style={{border:'none'}}>\r\n\t\t\t\t\t<div style={{overflow:'hidden'}}>\r\n\t\t\t\t\t\t<div className=\"all\">合计</div>\r\n\t\t\t\t\t\t<div className=\"charges\">\r\n\t\t\t\t\t\t\t额定负荷(kW)\r\n\t\t\t\t\t\t\t<span>{totalDeviceRatedPower}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<Search placeholder=\"搜索设备\" onSearch={onSearch} style={{ width: 200,float:'right',marginTop:15 }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{marginTop:'20px'}}>\r\n\t\t\t\t\t\t<Table dataSource={dataSource} columns={columns} \r\n\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\tonChange={(pagination, filters, sorter) => { onChangetab(pagination, filters, sorter) }}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpagination={\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttotal:total,//数据的总条数\r\n\t\t\t\t\t\t\t\t\tdefaultCurrent: 1,//默认当前的页数\r\n\t\t\t\t\t\t\t\t\tdefaultPageSize: 5,//默认每页的条数\r\n\t\t\t\t\t\t\t\t\tshowQuickJumper:false,\r\n\t\t\t\t\t\t\t\t\tonChange: (page)=>handlePagination(page),\r\n\t\t\t\t\t\t\t\t\t// onChange: handlePagination,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"footerbtn\">\r\n\t\t\t\t\t<Button type=\"primary\" onClick={ontactful} disabled={dataSource.length==0?true:false}>确定</Button>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\nexport default Tactful\r\n// <div className=\"header\">\r\n// \t\t\t\t\t<Link to='/Responsetask'><a href=\"#\"><img src={require('../../../../style/xu/return.png')} />返回</a></Link>\r\n// \t\t\t\t</div>"],"names":["Search","Input","props","useState","user","respId","tactfulList","setTactfulList","strategyId","setStrategyId","deviceRatedPowerSort","setDeviceRatedPowerSort","deviceStatusSort","setDeviceStatusSort","page","setPage","setTotalActualLoad","totalDeviceRatedPower","setTotalDeviceRatedPower","deviceName","setDeviceName","oldStrategyId","setOldStrategyId","loading","setLoading","dataSource","setDataSource","strategyName","setStrategyName","ymd","setYmd","times","setTimes","power","setPower","val","setVal","total","setTotal","useEffect","getStrategyList","getDeviceListById","strategyDetail","http","then","res","console","log","data","code","obj","strategyList","objNew","i","push","label","value","catch","err","devieInfo","content","totalElements","totalActualLoad","strategyType","runStrategy","onceExe","airConditioningDTO","cycleExe","cycleTimes","otherConditioningDTO","columns","title","dataIndex","key","width","render","item","index","sorter","undefined","Number","toFixed","text","className","defaultValue","style","bordered","options","onChange","border","overflow","placeholder","onSearch","float","marginTop","pagination","filters","order","columnKey","onChangetab","defaultCurrent","defaultPageSize","showQuickJumper","handlePagination","type","onClick","message","msg","disabled","length"],"sourceRoot":""}
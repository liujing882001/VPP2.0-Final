"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[9745],{79745:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var s=t(1413),o=t(15671),l=t(43144),a=t(60136),r=t(27277),i=t(72791),c=t(58768),u=t(61855),d=t(66818),m=t(13832),f=t(2556),h=t(78347),p=t(93070),y=(t(74569),t(5122)),g=t(35796),Z=t(21391),x=t.n(Z),v=t(80184);i.Component.prototype.$md5=x();var S=c.Z.confirm,k=u.Z.Search,b={labelCol:{xs:{span:28},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}},j={wrapperCol:{offset:8,span:16}},C=d.Z.Option,U={onChange:function(e,n){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",n)}};var w=function(e){(0,a.Z)(t,e);var n=(0,r.Z)(t);function t(){var e;return(0,o.Z)(this,t),(e=n.call(this)).del=function(n){console.log(n);var t=n.userId;c.Z.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417",icon:(0,v.jsx)(g.Z,{}),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",cancelButtonProps:{className:"newbutton",style:{background:"none"}},onOk:function(){y.Z.post("sysUser/deleteSysUser?sysUserId="+t).then((function(n){console.log(n),200==n.data.code?(m.ZP.success(n.data.msg),e.queryAllSysUser()):m.ZP.info(n.data.msg)}))},onCancel:function(){console.log("Cancel")}})},e.handleSubmit=function(n){n.preventDefault(),e.props.form.validateFields((function(e,n){e||console.log("Received values of form: ",n)}))},e.showModal=function(){e.setState({visible:!0})},e.handleOk=function(n){console.log(n),console.log(e.refs.myForm.getFieldsValue());e.refs.myForm.getFieldsValue()},e.handleCancel=function(){console.log("Clicked cancel button"),e.setState({visible:!1})},e.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},e.handleChange=function(n){"uploading"!==n.file.status?"done"===n.file.status&&function(e,n){var t=new FileReader;t.addEventListener("load",(function(){return n(t.result)})),t.readAsDataURL(e)}(n.file.originFileObj,(function(n){return e.setState({imageUrl:n,loading:!1})})):e.setState({loading:!0})},e.cancel=function(){e.setState({visible:!1})},e.search=function(e){console.log(e),y.Z.post("sysUser/checkSysUserName?sysUserName="+e).then((function(e){console.log(e)}))},e.state={ModalText:"Content of the modal",visible:!1,confirmLoading:!1,loading:!1,imageUrl:"",dataSource:[]},e}return(0,l.Z)(t,[{key:"componentDidMount",value:function(){this.queryAllSysUser()}},{key:"queryAllSysUser",value:function(){var e=this;y.Z.post("sysUser/queryAllSysUser").then((function(n){if(console.log(n),200==n.data.code){n.data.data;e.setState({dataSource:n.data.data})}}))}},{key:"del",value:function(){S({title:"\u63d0\u793a",content:"\u672c\u6b21\u64cd\u4f5c\u5c06\u4f1a\u5220\u9664\u5458\u5de5\u4fe1\u606f\uff0c\u662f\u5426\u7ee7\u7eed\uff1f",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){console.log("OK")},onCancel:function(){console.log("Cancel")}})}},{key:"point",value:function(){S({title:"\u63d0\u793a",content:"\u672c\u6b21\u64cd\u4f5c\u5c06\u4f1a\u8986\u76d6\u6240\u6709\u5458\u5de5\u4fe1\u606f\uff0c\u662f\u5426\u7ee7\u7eed\uff1f",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){console.log("OK")},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,n=[{title:"\u5e8f\u53f7",width:"10%",render:function(e,n,t){return"".concat(t+1)}},{title:"\u7528\u6237\u540d",dataIndex:"userName"},{title:"\u90ae\u7bb1",dataIndex:"userEmail"},{title:"\u7ba1\u7406\u5458\u6216\u666e\u901a\u7528\u6237",dataIndex:"roleType",render:function(e,n){return"ADMIN"==n.roleType?"\u7ba1\u7406\u5458":"CONSUMER"==n.roleType?"\u666e\u901a\u7528\u6237":void 0}},{title:"\u64cd\u4f5c",key:"action",render:function(n,t){return(0,v.jsx)("span",{children:(0,v.jsx)("a",{onClick:function(){return e.del(t)},children:"\u5220\u9664"})})}}],t=(this.state.imageUrl,this.state),o=t.visible,l=t.confirmLoading,a=(t.ModalText,t.dataSource);return(0,v.jsxs)("div",{className:"personal",children:[(0,v.jsxs)("div",{className:"person",children:[(0,v.jsx)(f.ZP,{type:"primary",onClick:this.showModal,children:"\u65b0\u5efa\u7528\u6237"}),(0,v.jsx)(k,{placeholder:"\u6a21\u7cca\u641c\u7d22",onSearch:this.search,style:{width:200},disabled:!0})]}),(0,v.jsx)("div",{className:"alltable",children:(0,v.jsx)(h.Z,{rowSelection:U,columns:n,dataSource:a})}),(0,v.jsx)(c.Z,{title:"\u65b0\u5efa\u7528\u6237",cancelText:"\u53d6\u6d88",okText:"",visible:o,onOk:this.handleOk,confirmLoading:l,onCancel:this.handleCancel,style:{top:"center"},footer:null,children:(0,v.jsxs)(p.Z,(0,s.Z)((0,s.Z)({onSubmit:this.handleSubmit},b),{},{onFinish:function(n){console.log(n);var t=x()(n.password),s=n.username;y.Z.post("sysUser/checkSysUserName?sysUserName="+s,{}).then((function(s){200==s.data.code?y.Z.post("sysUser/addSysUser",{configType:"",roleType:n.roletype,userEmail:n.email,userId:"",userName:n.username,userPassword:t}).then((function(n){console.log(n),200==n.data.code?(m.ZP.success("\u6dfb\u52a0\u6210\u529f"),setTimeout((function(){e.setState({visible:!1})}),1e3),e.refs.myForm.resetFields(),e.queryAllSysUser()):m.ZP.info(n.data.msg)})):m.ZP.info(s.data.msg)}))},ref:"myForm",className:"newform",children:[(0,v.jsx)(p.Z.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],getValueFromEvent:function(e){return e.target.value.replace(/[\u4e00-\u9fa50-9]/g,"")},children:(0,v.jsx)(u.Z,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),(0,v.jsx)(p.Z.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u5bc6\u7801"}],children:(0,v.jsx)(u.Z.Password,{})}),(0,v.jsx)(p.Z.Item,{label:"\u90ae\u7bb1",name:"email",rules:[{label:"\u90ae\u7bb1",pattern:new RegExp(/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u90ae\u7bb1"}],children:(0,v.jsx)(u.Z,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})}),(0,v.jsx)(p.Z.Item,{label:"\u7ba1\u7406\u5458\u6216\u666e\u901a\u7528\u6237",name:"roletype",children:(0,v.jsxs)(d.Z,{placeholder:"\u8bf7\u9009\u62e9",children:[(0,v.jsx)(C,{value:"ADMIN",children:"\u7ba1\u7406\u5458"}),(0,v.jsx)(C,{value:"CONSUMER",children:"\u666e\u901a\u7528\u6237"})]})}),(0,v.jsxs)(p.Z.Item,(0,s.Z)((0,s.Z)({},j),{},{children:[(0,v.jsx)(f.ZP,{type:"primary",htmlType:"submit",children:"\u786e\u5b9a"}),(0,v.jsx)(f.ZP,{type:"button",onClick:this.cancel,children:"\u53d6\u6d88"})]}))]}))})]})}}]),t}(i.Component)}}]);
//# sourceMappingURL=9745.651363f4.chunk.js.map
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[8595],{58595:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var o=t(74165),a=t(93433),i=t(15861),r=t(29439),l=t(1413),c=t(45987),s=t(72791),d=t(71106),u=t(61855),m=t(93070),p=t(58768),f=t(47195),g=t(66818),h=t(13832),x=t(91082),Z=t(67049),v=t(2556),y=t(78347),j=t(35796),C=t(96106),b=t(15821),k=(t(97892),t(67571)),S=t(5122),O=t(80184),T=["editing","dataIndex","title","inputType","record","index","children"],P=d.Z.Text,I=[],N=function(e){var n=e.editing,t=e.dataIndex,o=(e.title,e.inputType,e.record,e.index,e.children),a=(0,c.Z)(e,T),i=(0,O.jsx)(u.Z,{});return(0,O.jsx)("td",(0,l.Z)((0,l.Z)({},a),{},{children:n?(0,O.jsx)(m.Z.Item,{name:t,style:{margin:0},rules:[{required:!0,pattern:new RegExp(/^(([1-9][0-9]{0,5})|0|1000000)$/),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u8303\u56f4\u5185\u7684\u6574\u6570"}],children:i}):o}))},E=p.Z.confirm,w=(u.Z.Search,f.Z.RangePicker,g.Z.Option,function(e){var n=(0,s.useState)(!1),t=(0,r.Z)(n,2),c=t[0],g=(t[1],(0,s.useState)(!1)),T=(0,r.Z)(g,2),w=T[0],z=T[1],F=(0,s.useState)(""),L=(0,r.Z)(F,2),B=L[0],V=L[1],R=(0,s.useState)(I),A=(0,r.Z)(R,2),W=A[0],_=A[1],Y=(0,s.useState)(""),q=(0,r.Z)(Y,2),X=q[0],$=q[1],D=(0,s.useState)(""),H=(0,r.Z)(D,2),K=H[0],M=H[1],U=(0,s.useState)(""),G=(0,r.Z)(U,2),J=G[0],Q=G[1],ee=(0,s.useState)(""),ne=(0,r.Z)(ee,2),te=ne[0],oe=ne[1],ae=(0,s.useState)([]),ie=(0,r.Z)(ae,2),re=ie[0],le=ie[1],ce=(0,s.useState)(""),se=(0,r.Z)(ce,2),de=se[0],ue=se[1],me=(0,s.useState)(""),pe=(0,r.Z)(me,2),fe=pe[0],ge=pe[1],he=(0,s.useState)(""),xe=(0,r.Z)(he,2),Ze=xe[0],ve=xe[1],ye=(0,s.useState)(""),je=(0,r.Z)(ye,2),Ce=(je[0],je[1]),be=(0,s.useState)(""),ke=(0,r.Z)(be,2),Se=ke[0],Oe=ke[1],Te=(0,s.useState)(!1),Pe=(0,r.Z)(Te,2),Ie=Pe[0],Ne=Pe[1],Ee=(0,s.useState)(1),we=(0,r.Z)(Ee,2),ze=we[0],Fe=we[1],Le=(0,s.useState)(""),Be=(0,r.Z)(Le,2),Ve=Be[0],Re=Be[1],Ae=(0,s.useState)(!1),We=(0,r.Z)(Ae,2),_e=We[0],Ye=We[1],qe=(0,s.useState)(1),Xe=(0,r.Z)(qe,2),$e=Xe[0],De=Xe[1],He=(0,k.k6)(),Ke=m.Z.useForm(),Me=(0,r.Z)(Ke,1)[0],Ue=m.Z.useForm(),Ge=(0,r.Z)(Ue,1)[0];(0,s.useEffect)((function(){if(console.log(e),e.location.state){var n=e.location.state;console.log(n),console.log(n.nodeId),$(n.title),M(n.nodeId),oe(n.endTime),Q(n.startTime)}else He.push("/skin")}),[]),(0,s.useEffect)((function(){""!==K&&""!==te&&""!==J&&Je(),console.log(K)}),[X,K,te,J]),(0,s.useEffect)((function(){""!==K&&""!==te&&""!==J&&Je()}),[ze,$e]);var Je=function(){Ne(!0),S.Z.post("carbon/sink/getTreeOrAreaList",{ctype:"\u7eff\u5316\u9762\u79ef"==X?"lvhuamianji":"zhongzhishumu",endTime:te,nodeId:K,number:ze,pageSize:10,startTime:J}).then((function(e){(console.log(e),200==e.data.code)&&(e.data.data.content.map((function(e,n){return e.key=n})),le(e.data.data.content),Re(e.data.data.totalElements),Ne(!1))})).catch((function(e){console.log(e)}))},Qe=function(e){return e.key===B},en=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){var t,i,r,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ge.validateFields();case 3:t=e.sent,i=(0,a.Z)(W),r=i.findIndex((function(e){return n===e.key})),r>-1?(c=i[r],i.splice(r,1,(0,l.Z)((0,l.Z)({},c),t)),_(i),V("")):(i.push(t),_(i),V(""),S.Z.post("carbon/sink/editTreeOrArea",{addTime:de,attrNum:t.attrNum,cid:fe,createdTime:Ze,ctype:"\u7eff\u5316\u9762\u79ef"==X?"lvhuamianji":"zhongzhishumu",nodeId:K,updateTime:Se}).then((function(e){console.log(e),200==e.data.code?(h.ZP.success("\u4fee\u6539\u6210\u529f"),Je()):h.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),nn=[{title:"\u6dfb\u52a0\u65e5\u671f",dataIndex:"addTime",render:function(e,n){return e.substr(0,7)}},{title:"\u7eff\u5316\u9762\u79ef"==X?"\u9762\u79ef\u7edf\u8ba1\uff08m3\uff09":"\u79cd\u690d\u6811\u6728\u7edf\u8ba1\uff08\u68f5\uff09",dataIndex:"attrNum",editable:!0},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,n){return Qe(n)?(0,O.jsxs)("span",{children:[(0,O.jsx)(d.Z.Link,{onClick:function(){return en(n.key)},style:{marginRight:8},children:(0,O.jsx)("a",{children:"\u786e\u5b9a"})}),(0,O.jsx)(x.Z,{onClick:function(){return n.key,void V("")},children:(0,O.jsx)("a",{children:"\u53d6\u6d88"})})]}):(0,O.jsxs)(d.Z.Link,{children:[(0,O.jsx)("a",{disabled:""!==B,onClick:function(){return function(e){console.log(e),Ge.setFieldsValue((0,l.Z)({attrNum:""},e)),V(e.key),ue(e.addTime),ge(e.cid),ve(e.createdTime),Ce(e.ctype),Oe(e.updateTime),M(e.nodeId)}(n)},children:"\u7f16\u8f91"}),(0,O.jsx)("a",{disabled:""!==B,onClick:function(){return e=n,console.log(e),void E({title:"\u786e\u5b9a\u8981\u5220\u9664\u54171?",icon:(0,O.jsx)(j.Z,{}),cancelButtonProps:{className:"newbutton",style:{background:"none"}},okButtonProps:{className:"newOkbutton"},onOk:function(){console.log("OK"),S.Z.post("carbon/sink/delTreeOrArea?cId="+e.cid).then((function(e){console.log(e),200==e.data.code?(Fe(1),De(1),h.ZP.success("\u5220\u9664\u6210\u529f"),Je()):h.ZP.success(e.data.msg)})).catch((function(e){console.log(e)}))},onCancel:function(){console.log("Cancel")}});var e},style:{marginLeft:"20px"},children:"\u5220\u9664"})]})}}].map((function(e){return e.editable?(0,l.Z)((0,l.Z)({},e),{},{onCell:function(n){return{record:n,inputType:"attrNum"===e.dataIndex,dataIndex:e.dataIndex,title:e.title,editing:Qe(n)}}}):e}));return(0,O.jsx)(Z.ZP,{locale:b.Z,children:(0,O.jsxs)("div",{className:"area1",children:[(0,O.jsxs)("div",{className:"header",children:[(0,O.jsx)("a",{onClick:function(){e.history.push({pathname:"/skin",query:{nodeId:K,endTime:te,startTime:J}})},style:{color:"#DFE1E5"},children:(0,O.jsx)(C.Z,{})}),(0,O.jsx)("span",{children:X})]}),(0,O.jsxs)("div",{className:"area",children:[(0,O.jsx)("div",{className:"areadiv",style:{marginBottom:"18px"},children:(0,O.jsx)(v.ZP,{type:"primary",onClick:function(){z(!0)},children:"\u6dfb\u52a0"})}),(0,O.jsx)(m.Z,{form:Ge,component:!1,children:(0,O.jsx)(y.Z,{components:{body:{cell:N}},rowKey:function(e){return e.cid},loading:Ie,bordered:!0,dataSource:re,columns:nn,rowClassName:"editable-row",onChange:function(e){console.log(e),Fe(e.current),De(e.current)},pagination:{total:Ve,defaultCurrent:1,defaultPageSize:10,showSizeChanger:!1,current:$e},summary:function(e){var n=0;return e.forEach((function(e){var t=e.attrNum;n+=Number(t)})),(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(y.Z.Summary.Row,{children:[(0,O.jsx)(y.Z.Summary.Cell,{index:0,children:"\u5408\u8ba1"}),(0,O.jsx)(y.Z.Summary.Cell,{index:1,children:(0,O.jsx)(P,{children:n})}),(0,O.jsx)(y.Z.Summary.Cell,{index:2})]})})}})})]}),(0,O.jsx)(Z.ZP,{locale:b.Z,children:(0,O.jsx)(p.Z,{title:"\u6dfb\u52a0",visible:w,confirmLoading:c,onCancel:function(){z(!1),Ye(!1),Me.resetFields()},footer:null,children:(0,O.jsxs)(m.Z,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},initialValues:{remember:!0},onFinish:function(e){console.log("Success:",e);var n=e.addTime.format("YYYY-MM")+"-01";console.log(n),Ye(!0),S.Z.post("carbon/sink/addTreeOrArea",{addTime:n,attrNum:e.attrNum,cid:"",createdTime:"",ctype:"\u7eff\u5316\u9762\u79ef"==X?"lvhuamianji":"zhongzhishumu",nodeId:K,updateTime:""}).then((function(e){console.log(e),200==e.data.code?(z(!1),Ye(!1),h.ZP.success("\u6dfb\u52a0\u6210\u529f"),Me.resetFields(),Je()):(Ye(!1),h.ZP.info(e.data.msg))})).catch((function(e){console.log(e)}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",form:Me,children:[(0,O.jsxs)(m.Z.Item,{label:"\u7eff\u5316\u9762\u79ef"==X?"\u9762\u79ef\u7edf\u8ba1":"\u79cd\u690d\u6811\u6728",children:[(0,O.jsx)(m.Z.Item,{name:"attrNum",style:{width:"90.5%",float:"left",margin:"0px"},rules:[{required:!0,pattern:new RegExp(/^(([1-9][0-9]{0,5})|0|1000000)$/),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u8303\u56f4\u5185\u7684\u6574\u6570"}],children:(0,O.jsx)(u.Z,{maxLength:50,style:{marginLeft:"0px"}})}),(0,O.jsx)("span",{className:"peraie",children:"\u7eff\u5316\u9762\u79ef"==X?"m\xb3":"\u68f5"})]}),(0,O.jsx)(m.Z.Item,{label:"\u6dfb\u52a0\u65e5\u671f",name:"addTime",children:(0,O.jsx)(f.Z,{picker:"month",style:{width:"100%",marginLeft:"0px"}})}),(0,O.jsxs)(m.Z.Item,{wrapperCol:{offset:8,span:16},style:{textAlign:"right"},children:[(0,O.jsx)(v.ZP,{ghost:!0,onClick:function(){z(!1)},children:"\u53d6\u6d88"}),(0,O.jsx)(v.ZP,{type:"primary",style:{marginLeft:"10px"},loading:_e,htmlType:"submit",children:"\u786e\u5b9a"})]})]})})})]})})})},91082:function(e,n,t){t.d(n,{Z:function(){return P}});var o=t(29439),a=t(72791),i=t(10187),r=t(41418),l=t.n(r),c=t(75179),s=t(41818),d=t(71929),u=t(69228),m=t(41783),p=t(57924),f=t(2556),g=t(25428),h=t(24e3),x=t(91489),Z=t(49152),v=t(4942),y=t(80462),j=(0,y.I$)("Popconfirm",(function(e){return function(e){var n,t,o=e.componentCls,a=e.iconCls,i=e.antCls,r=e.zIndexPopup,l=e.colorText,c=e.colorWarning,s=e.marginXXS,d=e.marginXS,u=e.fontSize,m=e.fontWeightStrong,p=e.colorTextHeading;return(0,v.Z)({},o,(t={zIndex:r},(0,v.Z)(t,"&".concat(i,"-popover"),{fontSize:u}),(0,v.Z)(t,"".concat(o,"-message"),(n={marginBottom:d,display:"flex",flexWrap:"nowrap",alignItems:"start"},(0,v.Z)(n,"> ".concat(o,"-message-icon ").concat(a),{color:c,fontSize:u,lineHeight:1,marginInlineEnd:d}),(0,v.Z)(n,"".concat(o,"-title"),{fontWeight:m,color:p,"&:only-child":{fontWeight:"normal"}}),(0,v.Z)(n,"".concat(o,"-description"),{marginTop:s,color:l}),n)),(0,v.Z)(t,"".concat(o,"-buttons"),{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:d}}),t))}(e)}),(function(e){return{zIndexPopup:e.zIndexPopupBase+60}}),{resetStyle:!1}),C=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(t[o[a]]=e[o[a]])}return t},b=function(e){var n=e.prefixCls,t=e.okButtonProps,r=e.cancelButtonProps,c=e.title,s=e.description,u=e.cancelText,Z=e.okText,v=e.okType,y=void 0===v?"primary":v,j=e.icon,C=void 0===j?a.createElement(i.Z,null):j,b=e.showCancel,k=void 0===b||b,S=e.close,O=e.onConfirm,T=e.onCancel,P=e.onPopupClick,I=a.useContext(d.E_).getPrefixCls,N=(0,h.Z)("Popconfirm",x.Z.Popconfirm),E=(0,o.Z)(N,1)[0],w=(0,p.Z)(c),z=(0,p.Z)(s);return a.createElement("div",{className:"".concat(n,"-inner-content"),onClick:P},a.createElement("div",{className:"".concat(n,"-message")},C&&a.createElement("span",{className:"".concat(n,"-message-icon")},C),a.createElement("div",{className:"".concat(n,"-message-text")},w&&a.createElement("div",{className:l()("".concat(n,"-title"))},w),z&&a.createElement("div",{className:"".concat(n,"-description")},z))),a.createElement("div",{className:"".concat(n,"-buttons")},k&&a.createElement(f.ZP,Object.assign({onClick:T,size:"small"},r),u||(null===E||void 0===E?void 0:E.cancelText)),a.createElement(m.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,g.nx)(y)),t),actionFn:O,close:S,prefixCls:I("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},Z||(null===E||void 0===E?void 0:E.okText))))},k=function(e){var n=e.prefixCls,t=e.placement,i=e.className,r=e.style,c=C(e,["prefixCls","placement","className","style"]),s=(0,a.useContext(d.E_).getPrefixCls)("popconfirm",n),u=j(s);return(0,(0,o.Z)(u,1)[0])(a.createElement(Z.ZP,{placement:t,className:l()(s,i),style:r,content:a.createElement(b,Object.assign({prefixCls:s},c))}))},S=void 0,O=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(t[o[a]]=e[o[a]])}return t},T=a.forwardRef((function(e,n){var t,r,m=e.prefixCls,p=e.placement,f=void 0===p?"top":p,g=e.trigger,h=void 0===g?"click":g,x=e.okType,Z=void 0===x?"primary":x,v=e.icon,y=void 0===v?a.createElement(i.Z,null):v,C=e.children,k=e.overlayClassName,T=e.onOpenChange,P=e.onVisibleChange,I=O(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),N=a.useContext(d.E_).getPrefixCls,E=(0,c.Z)(!1,{value:null!==(t=e.open)&&void 0!==t?t:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),w=(0,o.Z)(E,2),z=w[0],F=w[1],L=function(e,n){F(e,!0),null===P||void 0===P||P(e),null===T||void 0===T||T(e,n)},B=N("popconfirm",m),V=l()(B,k),R=j(B);return(0,(0,o.Z)(R,1)[0])(a.createElement(u.Z,Object.assign({},(0,s.Z)(I,["title"]),{trigger:h,placement:f,onOpenChange:function(n,t){var o=e.disabled;void 0!==o&&o||L(n,t)},open:z,ref:n,overlayClassName:V,content:a.createElement(b,Object.assign({okType:Z,icon:y},e,{prefixCls:B,close:function(e){L(!1,e)},onConfirm:function(n){var t;return null===(t=e.onConfirm)||void 0===t?void 0:t.call(S,n)},onCancel:function(n){var t;L(!1,n),null===(t=e.onCancel)||void 0===t||t.call(S,n)}})),"data-popover-inject":!0}),C))}));T._InternalPanelDoNotUseOrYouWillBeFired=k;var P=T}}]);
//# sourceMappingURL=8595.065fbb7d.chunk.js.map
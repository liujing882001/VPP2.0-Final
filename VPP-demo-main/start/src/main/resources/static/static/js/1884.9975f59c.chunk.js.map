{"version":3,"file":"static/js/1884.9975f59c.chunk.js","mappings":"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","sources":["views/respond/chronicle/index.js"],"sourcesContent":["import React,{Component} from 'react'\r\nimport { Table ,DatePicker ,ConfigProvider,Modal } from 'antd';\r\nimport './index.css'\r\nimport locale from 'antd/locale/zh_CN';\nimport dayjs from 'dayjs';\r\nimport http from '../../../server/server.js'\r\nconst { RangePicker } = DatePicker;\r\n\r\n\r\n\r\nclass chronicle extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state={\r\n\t\t\tdataSource:[],\r\n\t\t\tstartDate:'',\r\n\t\t\tendDate:'',\r\n\t\t\tisModalVisible:false,\r\n\t\t\tlookdataSource:[],\r\n\t\t\tpage:1,\r\n\t\t\ttotaltab:'',\r\n\t\t\tloading:false,\r\n\t\t\tloading1:false\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\t// this.getASHistoryList()\r\n\t}\r\n\t// 查询历史记录列表\r\n\tgetASHistoryList(){\r\n\t\tthis.setState({\r\n\t\t\tloading:true\r\n\t\t})\r\n\t\thttp.post('ancillary_services/ancillary_history/getASHistoryList',{\r\n\t\t\tnumber:this.state.page,\r\n\t\t\tpageSize:10,\r\n\t\t\tstartDate:this.state.startDate,\r\n\t\t\tendDate:this.state.endDate\r\n\t\t}).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code ==200){\r\n\t\t\t\tlet data = res.data.data.content\r\n\t\t\t\tdata.sort(function(a, b) {\r\n\t\t\t\t    return b.taskCode< a.taskCode? -1 : 1\r\n\t\t\t\t})\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource:data,\r\n\t\t\t\t\ttotaltab:res.data.data.totalElements,\r\n\t\t\t\t\tloading:false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\tchosedate =(data,datastring) =>{\r\n\t\tthis.setState({\r\n\t\t\tendDate:datastring[1],\r\n\t\t\tstartDate:datastring[0]\r\n\t\t},() =>{\r\n\t\t\tthis.getASHistoryList()\r\n\t\t})\r\n\t}\r\n\t// 查看\r\n\tlookover= (e) =>{\r\n\t\tconsole.log(e)\r\n\t\tthis.setState({\r\n\t\t\tisModalVisible:true,\r\n\t\t\tloading1:true\r\n\t\t},() =>{\r\n\t\t\thttp.get('ancillary_services/ancillary_history/getASListByASId?asId='+e.asId).then(res =>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tif(res.data.code ==200){\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tlookdataSource:res.data.data,\r\n\t\t\t\t\t\t// loading1\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}).catch(err =>{\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\trender(){\r\n\t\tlet {dataSource,isModalVisible,lookdataSource,loading,page,loading1} = this.state\r\n\t\tconst disabledDate: RangePickerProps['disabledDate'] = current => {\r\n\t\t\treturn current < dayjs(new Date('2023-01-01')) || current > dayjs().endOf('day')\r\n\t\t};\r\n\t\tconst columns =[\r\n\t\t\t{\r\n\t\t\t\ttitle: '序号',\r\n\t\t\t\twidth: '5%',\r\n\t\t\t\trender:(value, item, index) => (page - 1) * 10 + index+1,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务编码',\r\n\t\t\t\tdataIndex: 'taskCode',\r\n\t\t\t\tkey: 'taskCode',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '辅助服务时段',\r\n\t\t\t\tdataIndex: 'rsDate',\r\n\t\t\t\tkey: 'rsDate',\r\n\t\t\t\trender: (s, record, index) =>{\r\n\t\t\t\t\t// console.log(record)\r\n\t\t\t\t\treturn record.assDate +'    '+record.assTime+'~'  +record.aseTime\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '辅助服务规模（kW）',\r\n\t\t\t\tdataIndex: 'asLoad',\r\n\t\t\t\tkey: 'asLoad',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '辅助服务类型',\r\n\t\t\t\tdataIndex: 'asType',\r\n\t\t\t\tkey: 'asType',\r\n\t\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\t\tif(record.asType ===1){\r\n\t\t\t\t\t\treturn '调峰'\r\n\t\t\t\t\t}else if(record.asType ===2){\r\n\t\t\t\t\t\treturn '调频'\r\n\t\t\t\t\t}else if(record.asType ===3){\r\n\t\t\t\t\t\treturn '备用'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '补贴（元/kWh）',\r\n\t\t\t\tdataIndex: 'asSubsidy',\r\n\t\t\t\tkey: 'asSubsidy',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '总调节负荷(kW)',\r\n\t\t\t\tdataIndex: 'actualLoad',\r\n\t\t\t\tkey: 'actualLoad',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '总调节电量(kWh)',\r\n\t\t\t\tdataIndex: 'actualPower',\r\n\t\t\t\tkey: 'actualPower',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '收益预估',\r\n\t\t\t\tdataIndex: 'profit',\r\n\t\t\t\tkey: 'profit',\r\n\t\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\t\treturn Number(text).toFixed(2)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '详情',\r\n\t\t\t\tkey: 'action',\r\n\t\t\t\trender: (text,record,_,action) =>{\r\n\t\t\t\t\treturn <a onClick={() => this.lookover(record)}>查看</a>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t]\r\n\t\tconst lookcolumns =[\r\n\t\t\t{\r\n\t\t\t\ttitle: '序号',\r\n\t\t\t\twidth: '10%',\r\n\t\t\t\trender:(text,record,index)=> `${index+1}`\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '节点',\r\n\t\t\t\tdataIndex: 'nodeName',\r\n\t\t\t\tkey: 'nodeName',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '实际响应负荷（kW）',\r\n\t\t\t\tdataIndex: 'deviceRatedLoad',\r\n\t\t\t\tkey: 'deviceRatedLoad',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '实际响应电量（kWh）',\r\n\t\t\t\tdataIndex: 'regulatePower',\r\n\t\t\t\tkey: 'regulatePower',\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\ttitle: '占比（%）',\r\n\t\t\t\tdataIndex: 'powerRate',\r\n\t\t\t\tkey: 'powerRate',\r\n\t\t\t},\r\n\t\t]\r\n\t\tconst handleOk = () => {\r\n\t\t    // setIsModalVisible(false);\r\n\t\t\tthis.setState({\r\n\t\t\t\tisModalVisible:false\r\n\t\t\t})\r\n\t\t  };\r\n\t\t\r\n\t\t  const handleCancel = () => {\r\n\t\t\t  this.setState({\r\n\t\t\t  \tisModalVisible:false\r\n\t\t\t  })\r\n\t\t    // setIsModalVisible(false);\r\n\t\t  };\r\n\t\t  // 分页\r\n\t\tconst onChangetab = page => {\r\n\t\t    console.log(page);\r\n\t\t\tthis.setState({\r\n\t\t\t\tpage:page.current\r\n\t\t\t},() =>{\r\n\t\t\t\tthis.getASHistoryList()\r\n\t\t\t})\r\n\t\t};\r\n\t\treturn(\r\n\t\t\t<div className=\"allcontent12\">\r\n\t\t\t\t<ConfigProvider locale={locale}>\r\n\t\t\t\t    <RangePicker disabledDate={disabledDate} onChange={this.chosedate} />\r\n\t\t\t\t</ConfigProvider>\r\n\t\t\t\t<div style={{margin:'20px 0px'}}>\r\n\t\t\t\t\t<Table dataSource={dataSource} columns={columns} \r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tonChange={onChangetab}\r\n\t\t\t\t\t\tpagination={\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t  total: this.state.totaltab,//数据的总条数\r\n\t\t\t\t\t\t\t  defaultCurrent: 1,//默认当前的页数\r\n\t\t\t\t\t\t\t  defaultPageSize: 10,//默认每页的条数\r\n\t\t\t\t\t\t\t  showSizeChanger:false,\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Modal title=\"查看详情\" visible={isModalVisible} \r\n\t\t\t\tcancelText='取消'\r\n\t\t\t\tokText='确定'\r\n\t\t\t\twidth={700}\r\n\t\t\t\tonOk={handleOk} onCancel={handleCancel}>\r\n\t\t\t\t       <Table dataSource={lookdataSource}  columns={lookcolumns} />;\r\n\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\t\r\n}\r\n\r\nexport default chronicle\r\n\r\n\r\n\r\n\r\n"],"names":["RangePicker","DatePicker","chronicle","props","chosedate","data","datastring","setState","endDate","startDate","getASHistoryList","lookover","e","console","log","isModalVisible","loading1","http","asId","then","res","code","lookdataSource","catch","err","state","dataSource","page","totaltab","loading","this","number","pageSize","content","sort","a","b","taskCode","totalElements","columns","title","width","render","value","item","index","dataIndex","key","s","record","assDate","assTime","aseTime","text","_","action","asType","Number","toFixed","onClick","className","locale","disabledDate","current","dayjs","Date","endOf","onChange","style","margin","pagination","total","defaultCurrent","defaultPageSize","showSizeChanger","visible","cancelText","okText","onOk","onCancel","Component"],"sourceRoot":""}
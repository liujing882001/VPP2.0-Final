"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3811],{43811:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(29439),s=a(72791),d=a(61855),o=a(13832),r=a(66818),i=a(78347),c=a(2556),l=a(5122),u=a(80184),g=d.Z.Search,h=function(e){var t=(0,s.useState)(e.user.respId),a=(0,n.Z)(t,2),d=a[0],h=(a[1],(0,s.useState)([])),f=(0,n.Z)(h,2),y=f[0],m=f[1],p=(0,s.useState)(""),x=(0,n.Z)(p,2),v=x[0],S=x[1],Z=(0,s.useState)(1),N=(0,n.Z)(Z,2),j=N[0],I=N[1],w=(0,s.useState)(""),k=(0,n.Z)(w,2),b=k[0],E=k[1],P=(0,s.useState)(1),_=(0,n.Z)(P,2),O=_[0],C=_[1],R=(0,s.useState)("-"),T=(0,n.Z)(R,2),D=(T[0],T[1]),W=(0,s.useState)("-"),L=(0,n.Z)(W,2),z=L[0],A=L[1],H=(0,s.useState)(""),B=(0,n.Z)(H,2),F=B[0],J=B[1],K=(0,s.useState)(""),Q=(0,n.Z)(K,2),V=Q[0],q=Q[1],G=(0,s.useState)(!1),M=(0,n.Z)(G,2),U=M[0],X=M[1],Y=(0,s.useState)([]),$=(0,n.Z)(Y,2),ee=$[0],te=$[1],ae=(0,s.useState)(""),ne=(0,n.Z)(ae,2),se=ne[0],de=ne[1],oe=(0,s.useState)(""),re=(0,n.Z)(oe,2),ie=re[0],ce=re[1],le=(0,s.useState)(""),ue=(0,n.Z)(le,2),ge=ue[0],he=ue[1],fe=(0,s.useState)(""),ye=(0,n.Z)(fe,2),me=ye[0],pe=ye[1],xe=(0,s.useState)(""),ve=(0,n.Z)(xe,2),Se=ve[0],Ze=ve[1],Ne=(0,s.useState)(""),je=(0,n.Z)(Ne,2),Ie=je[0],we=je[1];(0,s.useEffect)((function(){ke()}),[]),(0,s.useEffect)((function(){be(),Ee()}),[v]),(0,s.useEffect)((function(){be()}),[F,O]);var ke=function(){l.Z.post("demand_resp/resp_task/getStrategyList?respId="+d).then((function(e){if(console.log(e),200==e.data.code){var t=e.data.data.strategyList,a=[];for(var n in t)a.push({label:t[n],value:n});console.log("objNew",a),e.data.data.oldStrategyId&&(Ze(e.data.data.oldStrategyId),S(e.data.data.oldStrategyId),X(!1)),m(a),q(e.data.data.oldStrategyId)}})).catch((function(e){console.log(e)}))},be=function(){X(!0),l.Z.post("demand_resp/resp_task/getDeviceListById",{deviceName:F,deviceRatedPowerSort:j,deviceStatusSort:b,number:O,pageSize:5,respId:d,sid:"",strategyId:v}).then((function(e){console.log(e),200==e.data.code&&(e.data.data.devieInfo?(te(e.data.data.devieInfo.content||[]),we(e.data.data.devieInfo.totalElements),D(e.data.data.totalActualLoad),A(e.data.data.totalDeviceRatedPower),X(!1)):(te([]),we(""),D(e.data.data.totalActualLoad),A(e.data.data.totalDeviceRatedPower),X(!1)))})).catch((function(e){console.log(e)}))},Ee=function(){l.Z.post("run_schedule/run_strategy/strategyDetail?strategyId="+v).then((function(e){if(console.log(e),200==e.data.code){var t=e.data.data;0==t.strategyType?0==t.runStrategy?(ce(t.onceExe.ymd),he(t.onceExe.times),pe("POWER_ON"===t.airConditioningDTO.power?"\u5f00\u542f":"\u5173\u95ed"),de(t.strategyName)):(ce(""),he(t.cycleExe.cycleTimes),pe("POWER_ON"===t.airConditioningDTO.power?"\u5f00\u542f":"\u5173\u95ed"),de(t.strategyName)):1==t.strategyType&&(0==t.runStrategy?(ce(t.onceExe.ymd),he(t.onceExe.times),pe("POWER_ON"==t.otherConditioningDTO.power?"\u5f00\u542f":"\u5173\u95ed"),de(t.strategyName)):(ce(""),he(t.onceExe.times),pe("POWER_ON"==t.otherConditioningDTO.power?"\u5f00\u542f":"\u5173\u95ed"),de(t.strategyName)))}})).catch((function(e){console.log(e)}))},Pe=[{title:"\u7f16\u53f7",dataIndex:"name",key:"name",width:80,render:function(e,t,a){return 5*(O-1)+a+1}},{title:"\u6237\u53f7",dataIndex:"noHouseholds",key:"noHouseholds"},{title:"\u8282\u70b9",dataIndex:"nodeName",key:"nodeName"},{title:"\u7cfb\u7edf",dataIndex:"systemName",key:"systemName"},{title:"\u8bbe\u5907",dataIndex:"deviceName",key:"deviceName"},{title:"\u989d\u5b9a\u8d1f\u8377\uff08kW\uff09",dataIndex:"deviceRatedPower",key:"deviceRatedPower",sorter:!0,render:function(e,t,a){return null==e||void 0==e||""===e||"-"==e?"-":Number(e).toFixed(2)}},{title:"\u8bbe\u5907\u72b6\u6001",dataIndex:"sstatus",key:"sstatus",sorter:!0,render:function(e,t,a){return 1==e?"\u5f00\u542f":"\u5173\u95ed"}}];return(0,u.jsx)("div",{className:"tactful",children:(0,u.jsxs)("div",{className:"tactfulbody",children:[(0,u.jsx)("h4",{children:"\u9009\u62e9\u7b56\u7565"}),(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"strategy",children:[(0,u.jsx)("span",{className:"strategyspan",children:"\u7b56\u7565\u540d\u79f0"}),(0,u.jsx)(r.Z,{defaultValue:"\u8bf7\u9009\u62e9",style:{width:155},bordered:!1,options:y,onChange:function(e){console.log(e),S(e),X(!0),Ze(e),be(),Ee()},value:Se})]})}),(0,u.jsx)("div",{className:"breed",children:(0,u.jsxs)("ul",{className:"breedul",children:[(0,u.jsxs)("li",{style:{width:"100%"},children:["\u7b56\u7565\u7c7b\u578b\uff1a",se]}),(0,u.jsxs)("li",{children:["\u6267\u884c\u65e5\u671f\uff1a",ie]}),(0,u.jsxs)("li",{children:["\u6267\u884c\u65f6\u95f4\uff1a",ge]}),(0,u.jsxs)("li",{children:["\u6267\u884c\u52a8\u4f5c\uff1a",me]})]})}),(0,u.jsxs)("div",{className:"breed",style:{border:"none"},children:[(0,u.jsxs)("div",{style:{overflow:"hidden"},children:[(0,u.jsx)("div",{className:"all",children:"\u5408\u8ba1"}),(0,u.jsxs)("div",{className:"charges",children:["\u989d\u5b9a\u8d1f\u8377(kW)",(0,u.jsx)("span",{children:z})]}),(0,u.jsx)(g,{placeholder:"\u641c\u7d22\u8bbe\u5907",onSearch:function(e){console.log(e),J(e)},style:{width:200,float:"right",marginTop:15}})]}),(0,u.jsx)("div",{style:{marginTop:"20px"},children:(0,u.jsx)(i.Z,{dataSource:ee,columns:Pe,loading:U,onChange:function(e,t,a){!function(e,t,a){console.log(a),a.order&&"deviceRatedPower"==a.columnKey&&("ascend"==a.order?(I(1),E(""),be()):"descend"==a.order&&(I(2),E(""),be()))}(0,0,a)},pagination:{total:Ie,defaultCurrent:1,defaultPageSize:5,showQuickJumper:!1,onChange:function(e){return function(e){C(e)}(e)}}})})]}),(0,u.jsx)("div",{className:"footerbtn",children:(0,u.jsx)(c.ZP,{type:"primary",onClick:function(){l.Z.post("demand_resp/resp_task/editStrategy?oldStrategyId="+V+"&strategyId="+v+"&respId="+d).then((function(e){console.log(e),200==e.data.code?o.ZP.success("\u6210\u529f"):o.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))},disabled:0==ee.length,children:"\u786e\u5b9a"})})]})})}}}]);
//# sourceMappingURL=3811.dd23d2cb.chunk.js.map
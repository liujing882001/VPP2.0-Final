{"version":3,"file":"static/js/6928.9798a09a.chunk.js","mappings":"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","sources":["views/system/user/role/index.js"],"sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport { Input,Button ,Table,Space ,Modal,Form,Select,message ,Tree } from 'antd';\r\nimport http from '../../../../server/server.js'\r\nimport { ExclamationCircleOutlined,PlusOutlined } from '@ant-design/icons';\r\n\r\nimport './index.css'\r\n\r\nconst { confirm } = Modal;\r\nconst { Search } = Input;\r\n\r\nconst { Option } = Select;\r\nconst layout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 20 },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 17, span: 7 },\r\n};\r\nconst { TextArea } = Input;\r\nconst Role =() =>{\r\n\tconst [dataSource, setDataSource] = useState([]);\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false);\r\n\tconst [RoleType, setRoleType] = useState([]);\r\n\tconst [Visible, setVisible] = useState(false);\r\n\tconst [roleId, setRoleId] = useState('');\r\n\tconst [Visible1, setVisible1] = useState(false);\r\n\tconst [treeData, setTreeData] = useState([]);\r\n\tconst [selectedKeys, setSelectedKeys] = useState([]);\r\n\tconst [trees, setTrees] = useState('');\r\n\tconst [autoExpandParent, setAutoExpandParent] = useState('');\r\n\tconst [defaultExpandAll, setDefaultExpandAll] = useState(true);\r\n\tconst [random, setRandom] = useState('');\r\n\tconst [checkedKeys, setCheckedKeys] = useState([]);\r\n\tconst [checkStrictly, setCheckStrictly] = useState(true);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [look, setLook] = useState(1);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst [total, setTotal] = useState('');\r\n\tconst [roleName, setRoleName] = useState('');\r\n\tconst [edits, setEdits] = useState(0);\r\n\tconst [expandedKeys,setExpandedKeys] =useState([]);\r\n\tconst [currentNum,setCurrentNum] =useState(1)\r\n\tconst [myForm1] =  Form.useForm();\r\n\tconst [myForm] =  Form.useForm();\r\n\t\r\n\tuseEffect(() =>{\r\n\t\tallUserRoles()\r\n\t},[page])\r\n\tuseEffect(() =>{\r\n\t\tif(roleName){\r\n\t\t\tallUserRoles()\r\n\t\t}else if(roleName==''){\r\n\t\t\tallUserRoles()\r\n\t\t}\r\n\t},[roleName])\r\n\t// 获取角色列表\r\n\tconst allUserRoles =() =>{\r\n\t\tsetLoading(true)\r\n\t\tconst params = new URLSearchParams();\r\n\t\tparams.append('number', page);\r\n\t\tparams.append('pageSize', 10);\r\n\t\tparams.append('roleName', roleName);\r\n\t\thttp.post('system_management/system_user/role/allRoleListByNamePageable',params).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code ==200){\r\n\t\t\t\tsetDataSource(res.data.data.content);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\tsetTotal(res.data.data.totalElements)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t\r\n\t// 获取类型\r\n\tconst allRoleTypes =() =>{\r\n\t\thttp.post('system_management/system_user/role/allRoleTypes').then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code ==200){\r\n\t\t\t\tsetRoleType(res.data.data)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t// 修改\r\n\tconst edit =(e) =>{\r\n\r\n\t\tsetVisible(true);\r\n\t\tsetRoleId(e.roleId);\r\n\t\tsetEdits(1)\r\n\t\tmyForm1.setFieldsValue({\r\n\t\t\tsname:e.roleName,\r\n\t\t\troleLabel:e.roleLabel\r\n\t\t})\r\n\t}\r\n\t// 删除\r\n\tconst del =(e) =>{\r\n\t\tconsole.log(e)\r\n\t\tlet roleId = e.roleId\r\n\t\t\r\n\t\tconfirm({\r\n\t\t    title: '确定要删除吗?',\r\n\t\t    icon: <ExclamationCircleOutlined />,\r\n\t\t\tcancelText:'取消',\r\n\t\t\tokText:'确定',\r\n\t\t\tcancelButtonProps: {className:'newbutton',style: { background: 'none'} }, \r\n\t\t    onOk() {\r\n\t\t\t\tconsole.log('OK');\r\n\t\t\t\thttp.post('system_management/system_user/role/deleteRoleById?roleId='+roleId).then(res =>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\t\tmessage.success('删除成功')\r\n\t\t\t\t\t\tallUserRoles()\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmessage.warning(res.data.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t    },\r\n\t\t    onCancel() {\r\n\t\t\t\tconsole.log('Cancel');\r\n\t\t    },\r\n\t\t  });\r\n\t}\r\n\t// 搜索\r\n\tconst onSearch =(e) =>{\r\n\t\tconsole.log(e)\r\n\t\tsetPage(1);\r\n\t\tsetCurrentNum(1)\r\n\t\tsetRoleName(e);\r\n\t\t\r\n\t}\r\n\t// 分配权限\r\n\tconst power =(e) =>{\r\n\t\tconsole.log(e)\r\n\t\tlet arr  = []\r\n\t\tsetVisible1(true);\r\n\t\tsetRoleId(e.roleId);\r\n\t\tsetLook(0)\r\n\t\thttp.post('system_management/system_user/menu/menuTree').then(res =>{\r\n\t\t\tif(res.data.code ==200){\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tlet data = res.data.data\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\thttp.post('system_management/system_user/menu/menuListByRoleId?roleId='+e.roleId).then(res =>{\r\n\t\t\t\t\tif(res.data.code ==200){\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tsetSelectedKeys(res.data.data)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\thttp.post('system_management/system_user/menu/menuListByRoleId?roleId='+e.roleId).then(res =>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.code ==200){\r\n\t\t\t\t\t\tlet tree = res.data.data\r\n\t\t\t\t\t\tfor(var i=0;i<data.length;i++){\r\n\t\t\t\t\t\t\tif(data[i].children){\r\n\t\t\t\t\t\t\t\tconsole.log(data[i].children)\r\n\t\t\t\t\t\t\t\tfor(var j=0;j<tree.length;j++){\r\n\t\t\t\t\t\t\t\t\tif(tree[j] ==data[i].key){\r\n\t\t\t\t\t\t\t\t\t\ttree.splice(j,1)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlet children = data[i].children\r\n\t\t\t\t\t\t\t\tfor(var s=0;s<children.length;s++ ){\r\n\t\t\t\t\t\t\t\t\tif(children[s].children){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(children[s],'-----')\r\n\t\t\t\t\t\t\t\t\t\tfor(var j=0;j<tree.length;j++){\r\n\t\t\t\t\t\t\t\t\t\t\tif(tree[j] ==children[s].key){\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(children[s])\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(children[s].children){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(children[s].children)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttree.splice(j,1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlet schildren = children[s].children\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(schildren,'key')\r\n\t\t\t\t\t\t\t\t\t\tif(schildren){\r\n\t\t\t\t\t\t\t\t\t\t\tfor(var a = 0;a<schildren.length;a++){\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(schildren[a])\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor(var c=0;c<tree.length;c++){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(tree[c] == schildren[a].key){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(schildren[a].children){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttree.splice(c,1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor(var j=0;j<tree.length;j++){\r\n\t\t\t\t\t\t\t\t\tif(tree[j] ==data[i].key){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(data[i].key)\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(tree[j])\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(tree)\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetTrees([...res.data.data]);\r\n\t\t\t\t\t\tsetTreeData([...data]);\r\n\t\t\t\t\t\tsetCheckedKeys([...res.data.data])\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err =>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t\t\r\n\t}\r\n\t\r\n\tconst onExpand=(expandedKeys) => {\r\n\r\n\t\tsetExpandedKeys(expandedKeys)\r\n\t};\r\n\tconst onCheck=(checkedKeys,info)=>{ //选中事件\r\n\t   console.log(checkedKeys)\r\n\t   console.log(info)\r\n\t   let checkedNodes = []\r\n\t   checkedKeys.map(item =>{\r\n\t\t   checkedNodes.push(item)\r\n\t   })\r\n\t   console.log(checkedNodes)\r\n\t   if(info.halfCheckedKeys &&info.halfCheckedKeys.length>0){\r\n\t\t   info.halfCheckedKeys.map(res =>{\r\n\t\t\t   checkedNodes.push(res)\r\n\t\t   })\r\n\t\t   \r\n\t   }\r\n\t   setCheckedKeys(checkedKeys);\r\n\t   setSelectedKeys(checkedNodes)\r\n\t } \r\n\t// 新建\r\n\tconst add =() =>{\r\n\t\tsetVisible(true);\r\n\t\tsetEdits(0)\r\n\t}\r\n\t // 查看\r\n\tconst lookover =(e) =>{\r\n\t\tlet arr  = []\r\n\t\tsetVisible1(true);\r\n\t\tsetRoleId(e.roleId);\r\n\t\tsetLook(1)\r\n\t\thttp.post('system_management/system_user/menu/menuTree').then(res =>{\r\n\t\t\tif(res.data.code ==200){\r\n\t\t\t\tlet data = res.data.data\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\thttp.post('system_management/system_user/menu/menuListByRoleId?roleId='+e.roleId).then(res =>{\r\n\t\t\t\t\tif(res.data.code ==200){\r\n\t\t\t\t\t\t// console.log(res.data.data)\r\n\t\t\t\t\t\tlet tree = res.data.data\r\n\t\t\t\t\t\tfor(var i=0;i<data.length;i++){\r\n\t\t\t\t\t\t\tif(data[i].children){\r\n\t\t\t\t\t\t\t\tconsole.log(data[i].children)\r\n\t\t\t\t\t\t\t\tfor(var j=0;j<tree.length;j++){\r\n\t\t\t\t\t\t\t\t\tif(tree[j] ==data[i].key){\r\n\t\t\t\t\t\t\t\t\t\ttree.splice(j,1)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlet children = data[i].children\r\n\t\t\t\t\t\t\t\tfor(var s=0;s<children.length;s++ ){\r\n\t\t\t\t\t\t\t\t\tif(children[s].children){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(children[s],'-----')\r\n\t\t\t\t\t\t\t\t\t\tfor(var j=0;j<tree.length;j++){\r\n\t\t\t\t\t\t\t\t\t\t\tif(tree[j] ==children[s].key){\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(children[s])\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(children[s].children){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(children[s].children)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttree.splice(j,1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlet schildren = children[s].children\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(schildren,'key')\r\n\t\t\t\t\t\t\t\t\t\tif(schildren){\r\n\t\t\t\t\t\t\t\t\t\t\tfor(var a = 0;a<schildren.length;a++){\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(schildren[a])\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor(var c=0;c<tree.length;c++){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(tree[c] == schildren[a].key){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(schildren[a].children){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// alert(0)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttree.splice(c,1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(schildren[a].title,'jjjjjjjjjjjjjjjj')\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tfor(var j=0;j<tree.length;j++){\r\n\t\t\t\t\t\t\t\t\tif(tree[j] ==data[i].key){\r\n\t\t\t\t\t\t\t\t\t\t// var index = this.indexOf(data[i].key);\r\n\t\t\t\t\t\t\t\t\t\t// console.log(index)\r\n\t\t\t\t\t\t\t\t\t\t// tree.splice(j,1)\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(data[i].key)\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(tree[j])\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(tree)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetTrees([...res.data.data]);\r\n\t\t\t\t\t\tsetTreeData([...data]);\r\n\t\t\t\t\t\tsetCheckedKeys([...res.data.data])\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err =>{\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\t\r\n\tconst columns =[\r\n\t\t{\r\n\t\t\ttitle: '序号',\r\n\t\t\tdataIndex: 'orderNum',\r\n\t\t\tkey: 'orderNum',\r\n\t\t\trender:(value, item, index) => (page - 1) * 10 + index+1,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '角色名称',\r\n\t\t\tdataIndex: 'roleName',\r\n\t\t\tkey: 'roleName',\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\ttitle: '备注',\r\n\t\t\tdataIndex: 'roleLabel',\r\n\t\t\tkey: 'roleLabel',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '创建时间',\r\n\t\t\tdataIndex: 'createdTime',\r\n\t\t\tkey: 'createdTime',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '操作',\r\n\t\t\tdataIndex: 'action',\r\n\t\t\tkey: 'action',\r\n\t\t\trender: (text, record, index) =>{\r\n\t\t\t\tif(record.configType ==\"Y\"){\r\n\t\t\t\t\treturn <Space size=\"middle\">\r\n\t\t\t\t\t\t\t\t\t<a onClick={() => power(record)}>分配权限 </a>\r\n\t\t\t\t\t\t\t\t\t<a style={{display:'none'}} disabled>编辑 </a>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<a style={{display:'none'}} disabled>删除</a>\r\n\t\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn  <Space size=\"middle\">\r\n\t\t\t\t\t\t\t\t<a onClick={() => power(record)}>分配权限 </a>\r\n\t\t\t\t\t\t\t\t<a onClick={() => edit(record)}>编辑 </a>\r\n\t\t\t\t\t\t\t\t<a onClick={() => del(record)}>删除</a>\r\n\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t  \r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t]\r\n\t// <a onClick={() => this.lookover(record)}>查看 </a>\r\n\tconst showModal = () => {\r\n\t\tsetIsModalVisible(true);\r\n\t\tallRoleTypes();\r\n\t};\t\t\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t};\r\n\r\n\t// 新增\r\n\tconst onFinish1 =(values) =>{\r\n\t\tconsole.log(values,'-------')\r\n\t\tif(edits==0){\r\n\t\t\t// 新增\r\n\t\t\thttp.post('system_management/system_user/role/addRole',{\r\n\t\t\t\t\"roleId\": \"\",\r\n\t\t\t\t\"roleKey\": \"\",\r\n\t\t\t\t\"roleLabel\": values.roleLabel?values.roleLabel:'',\r\n\t\t\t\t\"roleName\": values.sname\r\n\t\t\t\t\r\n\t\t\t}).then(res =>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tif(res.data.code ==200){\r\n\t\t\t\t\tmessage.success('添加成功')\r\n\t\t\t\t\tallUserRoles()\r\n\t\t\t\t\tmyForm1.resetFields();\r\n\t\t\t\t\tsetVisible(false)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmessage.warning(res.data.msg)\r\n\t\t\t\t}\r\n\t\t\t}).catch(err =>{\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\r\n\t\t}else if(edits==1){\r\n\t\t\t// 编辑\r\n\t\t\tconst params = new URLSearchParams();\r\n\t\t\tparams.append('roleId', roleId);\r\n\t\t\tparams.append('roleName', values.sname);\r\n\t\t\tparams.append('roleLabel', values.roleLabel);\r\n\t\t\thttp.post('system_management/system_user/role/updateRoleName',params).then(res =>{\r\n\t\t\t\tif(res.data.code ==200){\r\n\t\t\t\t\tmessage.success('编辑成功')\r\n\t\t\t\t\tsetVisible(false)\r\n\t\t\t\t\tallUserRoles()\r\n\t\t\t\t\tmyForm1.resetFields();\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmessage.warning(res.data.msg)\r\n\t\t\t\t}\r\n\t\t\t}).catch(err =>{\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tconst onFinishFailed = (errorInfo: any) => {\r\n\t\tconsole.log('Failed:', errorInfo);\r\n\t};\r\n\tconst onReset = () => {\r\n\t\tmyForm.resetFields();\r\n\t\tsetIsModalVisible(false)\r\n\t};\r\n\tconst onReset1 = () => {\r\n\t\tmyForm1.resetFields();\r\n\t\tsetVisible(false)\r\n\t};\r\n\tconst handleCancel2 =() =>{\r\n\t\tmyForm1.resetFields();\r\n\t\tsetVisible(false);\r\n\t}\r\n\tconst handleCancel3 =() =>{\r\n\t\tsetVisible1(false);\r\n\t}\r\n\tconst onSelect: TreeProps['onSelect'] = (selectedKeys, info) => {\r\n\t\tconsole.log('selected', selectedKeys, info);\r\n\t};\r\n\t// 分配权限\r\n\tconst handleOk = () => {\r\n\t\thttp.post('system_management/system_user/role/updateRoleMenuIds',{\r\n\t\t\t\"menuIds\": selectedKeys,\r\n\t\t\t\"roleId\": roleId\r\n\t\t}).then(res =>{\r\n\t\t\tconsole.log(res)\r\n\t\t\tif(res.data.code ==200){\r\n\t\t\t\tmessage.success('成功')\r\n\t\t\t\tsetTrees([]);\r\n\t\t\t\tsetTreeData([]);\r\n\t\t\t\tsetVisible1(false)\r\n\t\t\t}\r\n\t\t}).catch(err =>{\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t\r\n\t};\r\n\tconst TableChange =(page) =>{\r\n\t\tconsole.log(page)\r\n\t\t\r\n\t\tsetPage(page.current)\r\n\t\tsetCurrentNum(page.current)\r\n\t}\r\n\t// <Button type=\"primary\" onClick={showModal}>添加角色</Button>\r\n\treturn(\r\n\t\t<div className=\"role\">\r\n\t\t\t<div className=\"roleheader\">\r\n\t\t\t<Button type=\"primary\" onClick={add}><PlusOutlined />新建角色</Button>\r\n\t\t\t<Search placeholder=\"名称\" onSearch={onSearch} style={{ width: 200,float:'right' }} />\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<Table dataSource={dataSource} columns={columns} loading={loading}\r\n\t\t\t\tpagination={\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttotal: total,//数据的总条数\r\n\t\t\t\t\t\tdefaultCurrent: 1,//默认当前的页数\r\n\t\t\t\t\t\tdefaultPageSize: 10,//默认每页的条数\r\n\t\t\t\t\t\tshowSizeChanger:false,\r\n\t\t\t\t\t\tcurrent:currentNum\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tonChange={TableChange}\r\n\t\t\t  />\r\n\t\t\t\r\n\t\t\t<Modal title={edits==0?'新增':'编辑'}\r\n\t\t\t\tfooter={null}\r\n\t\t\t\tmaskClosable={false}\r\n\t\t\t\tvisible={Visible} \r\n\t\t\t\tonCancel={handleCancel2}>\r\n\t\t\t\t<Form form={myForm1} {...layout} onFinish={onFinish1}>\r\n\t\t\t\t\t<Form.Item name=\"sname\" label=\"角色名称\" \r\n\t\t\t\t\t// rules={[{ required: true ,message: '请填写名称' }]}\r\n\t\t\t\t\t\trules={ [{ required: true,pattern: new RegExp(/^[a-zA-Z0-9_\\u4e00-\\u9fa5]{0,20}$/),message: '请填写正确的名称（20个以内的汉字、字母或数字、_）'}]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Input maxLength={50} />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item name=\"roleLabel\" label=\"备注\">\r\n\t\t\t\t\t\t<TextArea maxLength={50} />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t<Form.Item wrapperCol={{ offset: 14, span: 10 }} style={{textAlign:'right'}}>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t<Button ghost onClick={onReset1} style={{marginRight:10}}>\r\n\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button  type=\"primary\" htmlType=\"submit\">\r\n\t\t\t\t\t\t\t确定\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t\t<Modal title={look==1?'查看':'分配权限'}\r\n\t\t\t\tvisible={Visible1} \r\n\t\t\t\tclassName=\"menu_managementForm\"\r\n\t\t\t\t// onOk={handleOk}\r\n\t\t\t\tonCancel={handleCancel3}\r\n\t\t\t\tokText=\"确定\"\r\n\t\t\t\tcancelText=\"取消\"\r\n\t\t\t\tfooter={[\r\n\t\t\t\t<Button ghost onClick={handleCancel3}>取消</Button>,\r\n\t\t\t\t<Button key=\"submit\" type=\"primary\" onClick={handleOk}>确定</Button> ]}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\t\ttreeData.length && <Tree\r\n\t\t\t\t\tcheckable\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tautoExpandParent\r\n\t\t\t\t\tdefaultExpandAll\r\n\t\t\t\t\tdefaultCheckedKeys={trees}\r\n\t\t\t\t\tdefaultExpandedKeys = {trees}\r\n\t\t\t\t\tcheckedKeys={checkedKeys} //选中的key\r\n\t\t\t\t\tonCheck = {onCheck}\r\n\t\t\t\t\ttreeData={treeData}\r\n\t\t\t\t\tonExpand={onExpand}\r\n\t\t\t\t\tdisabled={look==1?true:false}\r\n\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\t// treeData.length &&\r\n\r\nexport default Role"],"names":["confirm","Modal","Search","Input","layout","Select","labelCol","span","wrapperCol","TextArea","useState","dataSource","setDataSource","Visible","setVisible","roleId","setRoleId","Visible1","setVisible1","treeData","setTreeData","selectedKeys","setSelectedKeys","trees","setTrees","checkedKeys","setCheckedKeys","loading","setLoading","look","setLook","page","setPage","total","setTotal","roleName","setRoleName","edits","setEdits","setExpandedKeys","currentNum","setCurrentNum","Form","myForm1","useEffect","allUserRoles","params","URLSearchParams","append","http","then","res","console","log","data","code","content","totalElements","catch","err","power","e","tree","i","length","children","j","key","splice","s","schildren","a","c","columns","title","dataIndex","render","value","item","index","text","record","configType","size","onClick","style","display","disabled","setFieldsValue","sname","roleLabel","icon","ExclamationCircleOutlined","cancelText","okText","cancelButtonProps","className","background","onOk","message","msg","onCancel","del","handleCancel3","type","PlusOutlined","placeholder","onSearch","width","float","pagination","defaultCurrent","defaultPageSize","showSizeChanger","current","onChange","footer","maskClosable","visible","resetFields","form","onFinish","values","name","label","rules","required","pattern","RegExp","maxLength","offset","textAlign","ghost","marginRight","htmlType","checkable","multiple","autoExpandParent","defaultExpandAll","defaultCheckedKeys","defaultExpandedKeys","onCheck","info","checkedNodes","map","push","halfCheckedKeys","onExpand","expandedKeys"],"sourceRoot":""}
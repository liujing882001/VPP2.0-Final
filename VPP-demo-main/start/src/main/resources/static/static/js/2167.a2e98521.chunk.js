"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[2167],{52167:function(e,t,a){a.r(t);for(var n=a(74165),s=a(93433),d=a(15861),o=a(29439),r=a(1413),c=a(45987),i=a(72791),l=a(67571),u=a(61855),p=a(93070),f=a(66818),m=a(13832),h=a(71106),Z=a(58768),g=a(2556),x=a(78347),S=(a(9177),a(5122)),v=a(80184),y=["editing","dataIndex","title","inputType","record","index","children"],k=u.Z.Search,I=[],j=0;j<100;j++)I.push({key:j.toString(),name:"Edrward ".concat(j),age:32,address:"London Park no. ".concat(j)});var b=function(e){var t=e.editing,a=e.dataIndex,n=(e.title,e.inputType,e.record,e.index,e.children),s=(0,c.Z)(e,y),d=(0,v.jsx)(u.Z,{});return(0,v.jsx)("td",(0,r.Z)((0,r.Z)({},s),{},{children:t?(0,v.jsx)(p.Z.Item,{name:a,style:{margin:0},rules:[{required:!0,pattern:new RegExp(/^(?!1000000$)(?:\d{1,6}(?:\.\d{1,2})?|0\.\d{1,2}|[1-9]\d{0,5}(?:\.\d{1,2})?)$/),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u8303\u56f4\u5185\u7684\u6570\u5b57"}],children:d}):n}))},P=f.Z.Option,L=[];for(j=0;j<46;j++)L.push({key:j,name:"Edward King ".concat(j),age:32,address:"London, Park Lane no. ".concat(j),drsId:j});t.default=function(e){var t=e.user,a=(0,i.useState)(0),c=(0,o.Z)(a,2),u=c[0],y=c[1],I=(0,i.useState)([]),j=(0,o.Z)(I,2),L=j[0],N=j[1],C=(0,i.useState)([]),w=(0,o.Z)(C,2),_=(w[0],w[1],(0,i.useState)("")),T=(0,o.Z)(_,2),D=T[0],E=(T[1],(0,i.useState)(1)),R=(0,o.Z)(E,2),F=R[0],K=(R[1],(0,i.useState)("")),W=(0,o.Z)(K,2),z=W[0],B=(W[1],(0,i.useState)(t.respId)),H=(0,o.Z)(B,2),O=H[0],V=(H[1],(0,i.useState)("")),A=(0,o.Z)(V,2),$=A[0],q=(A[1],(0,i.useState)(1)),G=(0,o.Z)(q,2),J=G[0],Q=G[1],U=(0,i.useState)(""),M=(0,o.Z)(U,2),X=M[0],Y=M[1],ee=(0,i.useState)(""),te=(0,o.Z)(ee,2),ae=te[0],ne=te[1],se=(0,i.useState)([]),de=(0,o.Z)(se,2),oe=(de[0],de[1]),re=(0,i.useState)(""),ce=(0,o.Z)(re,2),ie=ce[0],le=ce[1],ue=(0,i.useState)([]),pe=(0,o.Z)(ue,2),fe=pe[0],me=pe[1],he=(0,i.useState)(""),Ze=(0,o.Z)(he,2),ge=Ze[0],xe=Ze[1],Se=(0,i.useState)(""),ve=(0,o.Z)(Se,2),ye=(ve[0],ve[1]),ke=(0,i.useState)(""),Ie=(0,o.Z)(ke,2),je=Ie[0],be=Ie[1],Pe=(0,i.useState)(t.taskCode),Le=(0,o.Z)(Pe,2),Ne=Le[0],Ce=(Le[1],(0,i.useState)(t.rsDate+" "+t.rsTime+"~"+t.reTime)),we=(0,o.Z)(Ce,2),_e=we[0],Te=(we[1],(0,i.useState)(t.feedbackTime)),De=(0,o.Z)(Te,2),Ee=De[0],Re=(De[1],(0,i.useState)(t.respLoad)),Fe=(0,o.Z)(Re,2),Ke=Fe[0],We=(Fe[1],(0,i.useState)(t.respSubsidy)),ze=(0,o.Z)(We,2),Be=ze[0],He=(ze[1],(0,i.useState)(1==t.respType?"\u524a\u5cf0\u54cd\u5e94":"\u586b\u8c37\u54cd\u5e94")),Oe=(0,o.Z)(He,2),Ve=Oe[0],Ae=(Oe[1],(0,i.useState)(1==t.respLevel?"\u65e5\u524d\u54cd\u5e94":2==t.respLevel?"\u5c0f\u65f6\u54cd\u5e94":3==t.respLevel?"\u5206\u949f\u54cd\u5e94":"\u79d2\u7ea7\u54cd\u5e94")),$e=(0,o.Z)(Ae,2),qe=$e[0],Ge=($e[1],(0,i.useState)(!1)),Je=(0,o.Z)(Ge,2),Qe=(Je[0],Je[1]),Ue=(0,i.useState)(!1),Me=(0,o.Z)(Ue,2),Xe=Me[0],Ye=Me[1],et=(0,i.useState)(1),tt=(0,o.Z)(et,2),at=tt[0],nt=tt[1],st=(0,i.useState)(""),dt=(0,o.Z)(st,2),ot=dt[0],rt=dt[1],ct=(0,i.useState)(!1),it=(0,o.Z)(ct,2),lt=(it[0],it[1],(0,i.useState)(!1)),ut=(0,o.Z)(lt,2),pt=(ut[0],ut[1],(0,i.useState)("\u53d1\u9001")),ft=(0,o.Z)(pt,2),mt=(ft[0],ft[1],(0,i.useState)("")),ht=(0,o.Z)(mt,2),Zt=(ht[0],ht[1],(0,i.useState)([])),gt=(0,o.Z)(Zt,2),xt=(gt[0],gt[1],(0,i.useState)("")),St=(0,o.Z)(xt,2),vt=(St[0],St[1],(0,i.useState)(!0)),yt=(0,o.Z)(vt,2),kt=yt[0],It=yt[1],jt=(0,i.useState)(sessionStorage.getItem("osType")),bt=(0,o.Z)(jt,2),Pt=(bt[0],bt[1],(0,i.useState)("")),Lt=(0,o.Z)(Pt,2),Nt=Lt[0],Ct=Lt[1],wt=(0,i.useState)([]),_t=(0,o.Z)(wt,2),Tt=_t[0],Dt=_t[1],Et=(0,i.useState)(""),Rt=(0,o.Z)(Et,2),Ft=Rt[0],Kt=Rt[1],Wt=(0,i.useState)(1),zt=(0,o.Z)(Wt,2),Bt=zt[0],Ht=zt[1],Ot=(0,i.useState)([]),Vt=(0,o.Z)(Ot,2),At=Vt[0],$t=Vt[1],qt=p.Z.useForm(),Gt=(0,o.Z)(qt,1)[0];(0,l.k6)();(0,i.useEffect)((function(){Jt()}),[]),(0,i.useEffect)((function(){0==u&&Ut()}),[J,u]),(0,i.useEffect)((function(){1==u&&Xt()}),[at,u]);var Jt=function(){S.Z.post("system_management/systemParam/thirdPartyEnergyPlat?id=12").then((function(e){if(console.log(e),200==e.data.code){var t=e.data.data.status;y("0"==t?1:0),Dt(e.data.data.param),Ct(e.data.data.status)}})).catch((function(e){console.log(e)}))},Qt=function(e){console.log(e),y(e),da(),N([]),Q(1),Ht(1)},Ut=function(){Ye(!0),S.Z.post("demand_resp/resp_task/getDeclareList",{deviceName:D,deviceRatedPowerSort:F,deviceStatusSort:z,number:J,pageSize:5,respId:O,sid:"",strategyId:$}).then((function(e){if(console.log(e),200==e.data.code)if(e.data.data.devieInfo){var t=e.data.data.devieInfo.content;t.map((function(e,t){return e.key=t})),console.log(t),me(e.data.data.devieInfo.content),Y(e.data.data.invitation),ne(e.data.data.totalDeclare),Kt(e.data.data.devieInfo.totalElements),It(!0),Ye(!1)}else me([]),Y(e.data.data.invitation),ne(e.data.data.totalDeclare),Kt(""),Ye(!1),It(!1);else m.ZP.info(e.data.msg),me([]),Y(""),ne(""),Kt(""),Ye(!1),It(!1)})).catch((function(e){console.log(e)}))},Mt=function(){Ye(!0),S.Z.post("demand_resp/resp_task/thirdPlatformDeclareList",{deviceName:D,deviceRatedPowerSort:F,deviceStatusSort:z,number:at,pageSize:10,platformId:ot,respId:O,sid:"",strategyId:$}).then((function(e){(console.log(e),200==e.data.code)?e.data.data&&(e.data.data.devieInfo.content.map((function(e){return e.key=e.drsId})),me(e.data.data.devieInfo.content),Y(e.data.data.invitation),ne(e.data.data.totalDeclare),Kt(e.data.data.devieInfo.totalElements),Ye(!1)):m.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))},Xt=function(){S.Z.post("demand_resp/resp_task/getCSPGDeclareList",{deviceName:D,deviceRatedPowerSort:F,deviceStatusSort:z,number:at,pageSize:10,platformId:ot,respId:O,sid:"",strategyId:$}).then((function(e){(console.log(e),200==e.data.code)?e.data.data&&(e.data.data.devieInfo.content.map((function(e,t){return e.key=t})),me(e.data.data.devieInfo.content),Y(e.data.data.invitation),ne(e.data.data.totalDeclare),Kt(e.data.data.devieInfo.totalElements),Ye(!1)):m.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))},Yt=function(){"0"==Nt?Mt():Xt()},ea={title:"\u5df2\u7533\u62a5"},ta=[{title:"\u5e8f\u53f7",dataIndex:"name",key:"name",render:function(e,t,a){return 5*(J-1)+a+1}},{title:"\u8282\u70b9",dataIndex:"nodeName",key:"nodeName"},{title:"\u6237\u53f7",dataIndex:"noHouseholds",key:"noHouseholds"},{title:"\u7533\u62a5\u8d1f\u8377(kW)",dataIndex:"declareLoad",editable:!0,render:function(e,t,a){return null==e||void 0==e||""===e||"-"==e?"-":Number(e).toFixed(2)}},{title:"\u57fa\u7ebf\u5e73\u5747\u8d1f\u8377(kW)",dataIndex:"baseLoad",render:function(e,t,a){return null==e||void 0==e||""===e||"-"==e?"-":Number(e).toFixed(2)}},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,t){return na(t)?(0,v.jsxs)("span",{children:[(0,v.jsx)(h.Z.Link,{onClick:function(){return oa(t.key)},style:{marginRight:8},children:"\u786e\u5b9a"}),(0,v.jsx)(h.Z.Link,{onClick:function(){return da(t.key)},children:"\u53d6\u6d88"})]}):(0,v.jsx)(h.Z.Link,{disabled:""!==ie,onClick:function(){return sa(t)},children:"\u7f16\u8f91"})}}],aa={selectedRowKeys:L,preserveSelectedRowKeys:!0,onChange:function(e,t){N(e),oe(e),e&&$t(t)},getCheckboxProps:function(e){return{disabled:21==e.drsStatus}}},na=function(e){return e.key===ie},sa=function(e){console.log(e,"-------"),e.declareLoad=e.declareLoad?Number(e.declareLoad).toFixed(2):"-",21==e.drsStatus?Z.Z.info(ea):(Gt.setFieldsValue((0,r.Z)({declareLoad:"",declarePrice:""},e)),le(e.key),be(e.drsId),xe(e.declareLoad),ye(e.declarePrice),Qe(!1))},da=function(){le("")},oa=function(){var e=(0,d.Z)((0,n.Z)().mark((function e(t){var a,d,o,c,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.validateFields();case 3:a=e.sent,d=(0,s.Z)(fe),o=d.findIndex((function(e){return t===e.key})),o>-1?(c=d[o],d.splice(o,1,(0,r.Z)((0,r.Z)({},c),a)),console.log(a),0==u?((i=new URLSearchParams).append("drsIdid",je),i.append("declareLoadBefore",ge),i.append("declareLoad",a.declareLoad),i.append("declarePrice",Number(a.declarePrice)||0),S.Z.post("demand_resp/resp_task/editDeclare?drsId="+je+"&declareLoad="+a.declareLoad+"&declarePrice="+(a.declarePrice||0)+"&declareLoadBefore="+ge).then((function(e){console.log(e),200==e.data.code?(m.ZP.success("\u6210\u529f"),Ut()):m.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))):S.Z.post("demand_resp/resp_task/editDeclare?drsId="+je+"&declareLoad="+a.declareLoad+"&declarePrice=0&declareLoadBefore="+ge).then((function(e){console.log(e),200==e.data.code?m.ZP.success("\u6210\u529f"):m.ZP.info(e.data.msg)})).catch((function(e){console.log(e)})),le(""),me(d)):(d.push(a),me(d),le("")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ra=ta.map((function(e){return e.editable?(0,r.Z)((0,r.Z)({},e),{},{onCell:function(t){return{record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:na(t)}}}):e}));return(0,v.jsxs)("div",{className:"ploy",children:[(0,v.jsx)("div",{className:"ploybody",style:{marginTop:0},children:(0,v.jsxs)("div",{className:"ploybody-Left",children:[(0,v.jsxs)("h4",{children:["\u54cd\u5e94\u4efb\u52a1\u7f16\u53f7\uff1a",Ne]}),(0,v.jsxs)("ul",{children:[(0,v.jsxs)("li",{children:["\u54cd\u5e94\u65f6\u95f4\uff1a ",_e]}),(0,v.jsxs)("li",{children:["\u53cd\u9988\u622a\u6b62\u65f6\u95f4\uff1a ",Ee]}),(0,v.jsxs)("li",{children:["\u8d1f\u8377\u9700\u6c42\uff1a",Ke,"KW"]}),(0,v.jsxs)("li",{children:["\u54cd\u5e94\u8865\u8d34\uff1a ",Be,"\u5143/kWh"]}),(0,v.jsxs)("li",{children:["\u54cd\u5e94\u7c7b\u578b\uff1a",Ve]}),(0,v.jsxs)("li",{children:["\u54cd\u5e94\u7ea7\u522b\uff1a",qe]})]})]})}),(0,v.jsxs)("div",{className:"declaration",children:["0"==Nt?(0,v.jsx)("div",{className:"declarationbody",style:{textAlign:"center"},children:(0,v.jsx)("span",{onClick:function(){return Qt(1)},className:1===u?"active":"noactive",children:"\u7b2c\u4e09\u65b9\u667a\u6167\u80fd\u6e90\u5e73\u53f0"})}):(0,v.jsxs)("div",{className:"declarationbody",children:[(0,v.jsx)("span",{onClick:function(){return Qt(0)},className:0===u?"active":"noactive1",children:"\u624b\u52a8\u7533\u62a5"}),(0,v.jsx)("span",{onClick:function(){return Qt(1)},className:1===u?"active":"noactive",children:" AI\u63a8\u8350\u7533\u62a5"})]}),(0,v.jsxs)("div",{className:"breed",style:{border:"none"},children:[(0,v.jsxs)("div",{className:"breedcjose",style:{display:1==u?"block":"none"},children:["0"==Nt?(0,v.jsxs)("div",{style:{float:"left",marginRight:16},children:[(0,v.jsx)(f.Z,{defaultValue:"\u8bf7\u9009\u62e9",style:{width:260,float:"left",marginTop:12},onChange:function(e){if(console.log("selected ".concat(e)),e){var t=e.indexOf("\u3002"),a=e.substring(t+1,e.length);console.log(a),-1!==a.indexOf("\u9ad8\u65b0\u5174\u6570\u5b57\u80fd\u6e90")?(rt("demand_response_invitation_response"),Mt()):(rt(e),Mt())}},children:Tt&&Tt.map((function(e){return(0,v.jsx)(P,{value:e.name,children:e.name},e.name)}))}),(0,v.jsx)(g.ZP,{type:"primary",onClick:Yt,style:{marginTop:12},children:"\u5237\u65b0"})]}):"",(0,v.jsxs)("div",{className:"charges",children:["\u9080\u7ea6\u5bf9\u8c61",(0,v.jsx)("span",{children:X})]}),(0,v.jsxs)("div",{className:"charges",children:["\u7533\u62a5\u8d1f\u8377(kW)",(0,v.jsx)("span",{children:ae})]}),"0"==Nt?"":(0,v.jsx)(g.ZP,{type:"primary",onClick:Yt,style:{marginTop:12},children:"\u5237\u65b0"}),"0"==Nt?(0,v.jsx)(k,{placeholder:"\u641c\u7d22\u76f8\u5173\u4fe1\u606f",onSearch:function(e){},style:{width:200,float:"right",marginTop:12}}):""]}),(0,v.jsxs)("div",{style:{marginTop:"20px"},className:"chargetitle",children:[(0,v.jsx)(p.Z,{form:Gt,component:!1,children:(0,v.jsx)(x.Z,{components:{body:{cell:b}},rowSelection:aa,rowKey:function(e){return e.drsId},dataSource:fe,columns:ra,rowClassName:"editable-row",loading:Xe,pagination:{total:Ft,defaultCurrent:1,defaultPageSize:5,showQuickJumper:!1,current:Bt,onChange:function(e){console.log(e),0==u?(Q(e),Ht(e)):1==u&&(nt(e),Ht(e))}}})}),(0,v.jsx)("div",{className:"footerbtn",children:(0,v.jsx)(g.ZP,{type:"primary",disabled:0==L.length,onClick:function(){if(0==u){var e=[];At.map((function(t){console.log(t),e.push(t.drsId)})),console.log(e),S.Z.post("demand_resp/resp_task/declareSubmit?drsIds="+e+"&respId="+O).then((function(e){console.log(e),200==e.data.code?(m.ZP.success("\u6210\u529f"),Ut()):m.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))}else if(1==u){var t=[];At.map((function(e){console.log(e),t.push(e.drsId)})),console.log(t),S.Z.post("demand_resp/resp_task/declareSubmit?drsIds="+t+"&respId="+O).then((function(e){console.log(e),200==e.data.code?(m.ZP.success("\u6210\u529f"),Xt()):m.ZP.info(e.data.msg)})).catch((function(e){console.log(e)}))}},children:"\u786e\u5b9a"})}),(0,v.jsxs)("div",{className:"chargesbody",style:{display:0==kt&&0==u?"block":"none"},children:[(0,v.jsxs)("p",{children:["\u8be5\u54cd\u5e94\u4efb\u52a1\u5c1a\u672a\u9009\u62e9\u53ef\u8c03\u8d1f\u8377\u8fd0\u884c\u7b56\u7565\uff0c\u8bf7\u524d\u5f80\u54cd\u5e94\u4efb\u52a1\u5217\u8868",(0,v.jsx)("br",{}),"\u201c\u8fd0\u884c\u7b56\u7565\u201d\u4e2d\u9009\u62e9\u76f8\u5e94\u53ef\u8c03\u8d1f\u8377\u8fd0\u884c\u7b56\u7565"]}),(0,v.jsx)(g.ZP,{type:"primary",onClick:function(){e.sendDataToParent("Hell")},children:"\u524d\u5f80\u9009\u62e9\u7b56\u7565"})]})]})]})]})]})}},9177:function(){}}]);
//# sourceMappingURL=2167.a2e98521.chunk.js.map